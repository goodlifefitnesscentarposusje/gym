<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="utf-8" />
  <!-- sprjeƒçava auto-zoom na iOS + bolje pona≈°anje na mobitelu -->
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>GOODLIFE ‚Äî POSU≈†JE</title>
  <meta name="description" content="GoodLife i osobni treninzi. Programi snage, mr≈°avljenja i kondicije. Rezerviraj svoj termin danas!" />
  <style>
    :root{
      --bg:#0f0f12;
      --card:#16161a;
      --muted:#9aa0a6;
      --text:#f4f5f6;
      --brand:#ff7a00;
      --brand-2:#ffab66;
      --radius:18px;
      --shadow: 0 10px 30px rgba(0,0,0,.35);
      --maxw:1200px;
      --headerH:70px;
    }
    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6}
    html{scroll-behavior:smooth}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:0 20px}

    /* Header + auto-hide */
    header{
      position:sticky;top:0;z-index:200;
      background:rgba(15,15,18,.75);backdrop-filter: blur(8px);
      border-bottom:1px solid rgba(255,255,255,.06);
      transition: transform .28s ease, background .2s ease;
      will-change: transform;
    }
    header.hide{ transform: translateY(-100%); }

    .nav{
      position:relative;
      display:flex;align-items:center;justify-content:space-between;
      padding:14px 0;
    }
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.6px;cursor:pointer}
    .menu{
      position:absolute;
      left:50%;
      transform:translateX(-50%);
      display:flex;gap:18px;
    }
    .menu a{opacity:.9;position:relative;transition:color .5s ease}
    .menu a:hover{color:var(--brand)}
    .menu a.active{color:var(--brand)}
    .menu a.active::after{
      content:"";position:absolute;left:0;right:0;bottom:-6px;height:2px;background:var(--brand);
    }

    /* Burger (mobitel) */
    .burger{
      display:none;align-items:center;justify-content:center;
      width:44px;height:44px;border:1px solid rgba(255,255,255,.12);
      border-radius:10px;cursor:pointer;background:#121216;
    }
    .burger span, .burger span::before, .burger span::after{
      content:"";display:block;height:2px;background:#fff;border-radius:1px;width:20px;position:relative
    }
    .burger span::before{position:absolute;top:-6px;width:20px}
    .burger span::after{position:absolute;top:6px;width:20px}

    /* Mobilni drawer */
    .mobile-drawer{
      position:fixed;inset:0 0 0 auto;
      width:min(86vw,360px);
      background:rgba(15,15,18,.98);
      transform:translateX(100%);
      transition:transform .4s ease; /* malo sporije */
      z-index:300;display:flex;flex-direction:column;
      border-left:1px solid rgba(255,255,255,.08)
    }
    .mobile-drawer.open{transform:none}
    .mobile-drawer .top{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
    .mobile-drawer nav{display:flex;flex-direction:column;padding:10px}
    .mobile-drawer a{padding:14px 12px;border-radius:10px;transition: background .5s ease;}
    .mobile-drawer a:hover{background:#1a1a1f}
    .drawer-overlay{
      position:fixed;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);
      opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:250
    }
    .drawer-overlay.show{opacity:1;pointer-events:auto}

    /* Hero */
    .hero{position:relative;min-height:82vh;display:grid;place-items:center;overflow:hidden}
    .hero::before{
      content:"";position:absolute;inset:0;
      background:url('images/goodlife1.jpeg') center/cover no-repeat;
      filter:brightness(.45);
    }
    .hero .inner{position:relative;z-index:1;display:grid;gap:18px;text-align:center;padding:40px 0}
    h1{font-size:clamp(28px,6vw,64px);line-height:1.1;margin:6px 0 0}
    .lead{color:var(--muted);max-width:760px;margin:0 auto}
    .actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:10px}

    /* Gumbi */
    .btn{
      display:inline-flex;align-items:center;gap:10px;font-weight:700;
      border-radius:12px;padding:14px 18px;border:1px solid rgba(255,255,255,.12);
      transition: background .7s ease, color .7s ease, transform .7s ease;
    }
    .btn.primary{background:var(--brand);border-color:transparent}
    .btn.primary:hover{background:var(--brand-2)}
    .btn:active{transform:scale(.98)}

    /* Fade-in sekcije */
    section{padding:72px 0;border-top:1px solid rgba(255,255,255,.06);opacity:0; transform:translateY(8px); transition:opacity 1.2s ease, transform 1.2s ease;}
    section.show{opacity:1; transform:none;}

    .k-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow)}
    .program{display:grid;grid-template-columns:1fr 1.2fr;gap:28px;align-items:center}
    .program .img{border-radius:var(--radius);overflow:hidden;border:1px solid rgba(255,255,255,.08)}
    .coaches{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
    .coach{overflow:hidden;padding:0}
    .coach img{aspect-ratio:4/5;object-fit:cover}
    .coach .info{padding:16px}
    table{width:100%;border-collapse:collapse;border:1px solid rgba(255,255,255,.08);overflow:hidden;border-radius:var(--radius)}
    th,td{padding:14px;border-bottom:1px solid rgba(255,255,255,.06);text-align:left}
    th{background:#19191e}
    .pricing{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .price{padding:28px}
    .price .tag{font-size:38px;font-weight:900}
    .quote{display:grid;gap:10px}
    .contact{display:grid;grid-template-columns:1.1fr 1fr;gap:28px}
    .field{display:grid;gap:6px}

    /* inputi: 16px da iPhone ne zumira */
    .input, select, textarea{
      background:#121216;border:1px solid rgba(255,255,255,.12);
      border-radius:10px;padding:12px;color:var(--text);
      font-size:16px;
    }
    textarea{min-height:120px}
    .small{font-size:12px;color:var(--muted)}
    .status{margin-top:8px;font-size:14px}
    footer{padding:28px 0;color:var(--muted)}
    footer .row{display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap}
    .muted{color:var(--muted)}

    .hidden{display:none}

    /* RESPONSIVE */
    @media (max-width:1024px){
      .k-grid{grid-template-columns:1fr 1fr}
      .program{grid-template-columns:1fr}
      .coaches{grid-template-columns:1fr 1fr}
      .pricing{grid-template-columns:1fr}
      .contact{grid-template-columns:1fr}
    }
    @media (max-width:720px){
      .menu{display:none; position:static; transform:none;}
      .burger{display:inline-flex}
      .k-grid{grid-template-columns:1fr}
    }

    .table-scroll{overflow:auto;-webkit-overflow-scrolling:touch}
  </style>
</head>
<body>
 <header id="siteHeader">
  <div class="wrap nav">
    <div class="brand" id="logoBtn" title="Poƒçetna">
      <img src="images/goodlifelogo.png" alt="Good Life logo" style="height:85px;" />
    </div>

    <nav class="menu">
      <a href="#pocetna" class="nav-link">Poƒçetna</a>
      <a href="#onama" class="nav-link">O nama</a>
      <a href="#paketi" class="nav-link">Paketi</a>
      <a href="#clanarine" class="nav-link">ƒålanarine</a>
      <a href="#kontakt" class="nav-link">Kontakt</a>
    </nav>

    <button class="burger" aria-label="Izbornik" aria-controls="drawer" aria-expanded="false">
      <span></span>
    </button>
  </div>
</header>

<!-- Mobilni drawer + overlay -->
<div class="drawer-overlay" id="drawerOverlay"></div>
<aside class="mobile-drawer" id="drawer" aria-hidden="true">
  <div class="top">
    <strong>Izbornik</strong>
    <button id="drawerClose" class="btn" style="padding:8px 12px;background:var(--brand);border:0;border-radius:10px">Zatvori</button>
  </div>
  <nav>
    <a href="#pocetna" class="nav-link mlink">Poƒçetna</a>
    <a href="#onama" class="nav-link mlink">O nama</a>
    <a href="#paketi" class="nav-link mlink">Paketi</a>
    <a href="#clanarine" class="nav-link mlink">ƒålanarine</a>
    <a href="#kontakt" class="nav-link mlink">Kontakt</a>
  </nav>
</aside>

<section class="hero show" id="pocetna">
  <div class="inner wrap">
    <h1 style="margin-top:20px;">Ostvari svoj potencijal, ≈æivi Good Life!</h1>
    <p class="lead">Postigni svoje fitness ciljeve uz vrhunske trenere i moderan program treninga.</p>
    <div class="actions">
      <a class="btn primary nav-link" href="#paketi">Pogledaj pakete</a>
      <a class="btn nav-link" href="#kontakt">Kontaktiraj nas</a>
    </div>
  </div>
</section>

<section id="onama">
  <div class="wrap">
    <h2>O nama</h2>
    <p class="muted">GoodLife Fitness centar u Posu≈°ju nije samo obiƒçna teretana ‚Äî to je mjesto gdje zajednica ljudi s istim ciljem radi zajedno na zdravlju i napretku. Na≈°i treneri kreiraju individualne programe prilagoƒëene tvom cilju: gubitku kilograma, poveƒáanju mi≈°iƒáne mase, jaƒçanju kondicije ili rehabilitaciji nakon ozljeda. Nudimo struƒçne savjete o prehrani, redovito praƒáenje napretka te prijateljsku atmosferu u kojoj ƒáe≈° pronaƒái dodatnu motivaciju.</p>
  </div>
</section>

<section id="benefiti">
  <div class="wrap">
    <div class="k-grid">
      <div class="card"><h3>üéØ 1-na-1 coaching</h3><p class="muted">Individualni pristup, jasni ciljevi i mjerljivi rezultati.</p></div>
      <div class="card"><h3>üèãÔ∏è‚Äç‚ôÄÔ∏è Funkcionalni treninzi</h3><p class="muted">Snaga, mobilnost i kardio za maksimalan uƒçinak.</p></div>
      <div class="card"><h3>üìà Praƒáenje napretka</h3><p class="muted">Mjerenja, fotke napretka i plan prilagoƒëen rezultatima.</p></div>
    </div>
  </div>
</section>

<section id="programi">
  <div class="wrap program">
    <div>
      <h2>Programi treninga</h2>
      <p class="muted">Svaki plan ukljuƒçuje procjenu, edukaciju o tehnici i prehranu.</p>
      <div class="k-grid" style="margin-top:12px">
        <div class="card"><h3>Mr≈°avljenje</h3><p class="muted">HIIT + snaga, 3‚Äì5x tjedno.</p></div>
        <div class="card"><h3>Snaga & hipertrofija</h3><p class="muted">Periodizacija, slo≈æene vje≈æbe, progresija.</p></div>
        <div class="card"><h3>Kondicija & mobilnost</h3><p class="muted">Kru≈æni treninzi, core, mobilnost.</p></div>
      </div>
    </div>
    <div class="img"><img src="images/programs.jpg" alt="Trening u teretani" /></div>
  </div>
</section>

<section id="paketi">
  <div class="wrap">
    <h2>Paketi</h2>
    <p class="muted">Odaberi svoj plan ‚Äî bez skrivenih tro≈°kova.</p>
    <div class="pricing" style="margin-top:16px">
      <div class="card price"><h3>Basic</h3><div class="tag">29‚Ç¨ / mj</div><p class="muted">2x tjedno, grupni treninzi</p><a class="btn primary nav-link" href="#kontakt">Kreni</a></div>
      <div class="card price" style="border:2px solid var(--brand)"><h3>Standard</h3><div class="tag">49‚Ç¨ / mj</div><p class="muted">3x tjedno + plan</p><a class="btn primary nav-link" href="#kontakt">Kreni</a></div>
      <div class="card price"><h3>Premium</h3><div class="tag">79‚Ç¨ / mj</div><p class="muted">Neograniƒçeno + 1-na-1 mjeseƒçno</p><a class="btn primary nav-link" href="#kontakt">Kreni</a></div>
    </div>
  </div>
</section>

<!-- NOVO: ƒåLANARINE -->
<section id="clanarine">
  <div class="wrap">
    <h2>ƒålanarine</h2>
    <div class="pricing" style="margin-top:16px">
      <div class="card">
        <h3>Osnovni paket</h3>
        <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
          <li>2x tjedno ‚Äî <strong>40 KM</strong></li>
          <li>3x tjedno ‚Äî <strong>50 KM</strong></li>
          <li>Neograniƒçeno ‚Äî <strong>60 KM</strong></li>
          <li>VIP (neograniƒçeno + sauna) ‚Äî <strong>100 KM</strong></li>
          <li>Jednodnevni ‚Äî <strong>7 KM</strong></li>
          <li>Polumjeseƒçni (15 dana) ‚Äî <strong>35 KM</strong></li>
        </ul>
      </div>
      <div class="card">
        <h3>Srednjo≈°kolci</h3>
        <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
          <li>2x tjedno ‚Äî <strong>25 KM</strong></li>
          <li>3x tjedno ‚Äî <strong>35 KM</strong></li>
          <li>Neograniƒçeno ‚Äî <strong>45 KM</strong></li>
          <li>Grupni treninzi ‚Äî <strong>45 KM</strong></li>
          <li>Jednodnevni ‚Äî <strong>6 KM</strong></li>
        </ul>
      </div>
      <div class="card">
        <h3>Popusti</h3>
        <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
          <li>3 mjeseca ‚Äî <strong>-10%</strong></li>
          <li>6 mjeseci ‚Äî <strong>-20%</strong></li>
          <li>12 mjeseci ‚Äî <strong>-30%</strong></li>
          <li>Trajni nalog (1 godina) ‚Äî <strong>-20%</strong></li>
        </ul>
      </div>
    </div>

    <div class="card" style="margin-top:16px">
      <h3>Posebne pogodnosti</h3>
      <p class="muted" style="margin:0">Pogodnosti za firme ‚Ä¢ Obiteljski popusti ‚Ä¢ Popusti za klubove</p>
    </div>
  </div>
</section>
<!-- KRAJ ƒåLANARINA -->

<section id="treneri">
  <div class="wrap">
    <h2>Upoznaj trenere</h2>
    <div class="coaches" style="margin-top:12px">
      <article class="card coach"><img src="images/coach1.jpg" alt="Trener 1" /><div class="info"><h3>Ivan</h3><p class="muted">Snaga</p></div></article>
      <article class="card coach"><img src="images/coach2.jpg" alt="Trener 2" /><div class="info"><h3>Tina</h3><p class="muted">Mr≈°avljenje</p></div></article>
      <article class="card coach"><img src="images/coach3.jpg" alt="Trener 3" /><div class="info"><h3>Toni</h3><p class="muted">Kondicija</p></div></article>
      <article class="card coach"><img src="images/coach4.jpg" alt="Trener 4" /><div class="info"><h3>Davor</h3><p class="muted">Rehabilitacija</p></div></article>
    </div>
  </div>
</section>

<section id="raspored">
  <div class="wrap">
    <h2>Raspored grupnih treninga</h2>
    <div class="card" style="margin-top:12px">
      <div class="table-scroll">
        <table>
          <thead><tr><th>Dan</th><th>07:00</th><th>12:00</th><th>18:00</th><th>20:00</th></tr></thead>
          <tbody>
            <tr><td>Pon</td><td>HIIT</td><td>Mobilnost</td><td>Snaga</td><td>Full body</td></tr>
            <tr><td>Uto</td><td>Snaga</td><td>Core</td><td>HIIT</td><td>Kondicija</td></tr>
            <tr><td>Sri</td><td>Full body</td><td>Mobilnost</td><td>Snaga</td><td>HIIT</td></tr>
            <tr><td>ƒået</td><td>Snaga</td><td>Core</td><td>Kondicija</td><td>Full body</td></tr>
            <tr><td>Pet</td><td>HIIT</td><td>Mobilnost</td><td>Snaga</td><td>Opustanje</td></tr>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</section>

<section id="cjenik">
  <div class="wrap">
    <h2>Cjenik</h2>
    <div class="pricing" style="margin-top:12px">
      <div class="card price"><h3>Grupni treninzi</h3><div class="tag">39‚Ç¨ / mj</div><p class="muted">3x tjedno</p><a class="btn primary nav-link" href="#kontakt">Upi≈°i se</a></div>
      <div class="card price" style="border:2px solid var(--brand)"><h3>Osobni trening</h3><div class="tag">25‚Ç¨ / sat</div><p class="muted">1-na-1</p><a class="btn primary nav-link" href="#kontakt">Rezerviraj</a></div>
      <div class="card price"><h3>Online plan</h3><div class="tag">59‚Ç¨ / mj</div><p class="muted">Plan + check-in</p><a class="btn primary nav-link" href="#kontakt">Zatra≈æi plan</a></div>
    </div>
  </div>
</section>

<section id="iskustva">
  <div class="wrap">
    <h2>Iskustva ƒçlanova</h2>
    <div class="k-grid" style="margin-top:12px">
      <div class="card quote"><p>"Za 3 mjeseca -10 kg i osjeƒáam se bolje nego ikad."</p><span class="muted">‚Äî Ana</span></div>
      <div class="card quote"><p>"Podigao sam bench za 20 kg."</p><span class="muted">‚Äî Luka</span></div>
      <div class="card quote"><p>"Najbolja atmosfera i oprema."</p><span class="muted">‚Äî Petra</span></div>
    </div>
  </div>
</section>

<section id="kontakt">
  <div class="wrap contact">
    <div>
      <h2>Rezerviraj termin ili po≈°alji upit</h2>
      <form id="rez-form" action="https://formspree.io/f/your-id" method="POST" class="card">
        <div class="field">
          <label>Ime i prezime *</label>
          <input name="ime" required class="input" placeholder="Npr. Marko Mariƒá" />
        </div>

        <div class="field" style="margin-top:10px">
          <label>E-mail *</label>
          <input name="email" type="email" required class="input" placeholder="tvoj@email.com" />
        </div>

        <div class="field" style="margin-top:10px">
          <label>Program / upit</label>
          <select name="program" id="programSelect" class="input">
            <option value="Mr≈°avljenje">Mr≈°avljenje</option>
            <option value="Snaga">Snaga</option>
            <option value="Kondicija">Kondicija</option>
            <option value="Online plan">Online plan</option>
            <option value="Osobni trening">Osobni trening</option>
            <option value="Grupni treninzi">Grupni treninzi</option>
            <option value="Rehabilitacija">Rehabilitacija</option>
            <option value="Opƒái upit/pitanje">Opƒái upit/pitanje</option>
          </select>
        </div>

        <!-- NOVO: ovisni izbor trenera -->
        <div class="field hidden" id="trenerField" style="margin-top:10px">
          <label>Odaberi trenera</label>
          <select name="trener" id="trenerSelect" class="input">
            <option value="Ivan">Ivan ‚Äî Snaga</option>
            <option value="Tina">Tina ‚Äî Mr≈°avljenje</option>
            <option value="Toni">Toni ‚Äî Kondicija</option>
            <option value="Davor">Davor ‚Äî Rehabilitacija</option>
          </select>
        </div>

        <div class="field" style="margin-top:10px">
          <label>Poruka</label>
          <textarea name="poruka" placeholder="Napi≈°i svoj cilj ili pitanje‚Ä¶"></textarea>
        </div>

        <button class="btn primary" style="margin-top:14px" type="submit">Po≈°alji</button>
        <div id="status" class="status"></div>
      </form>
    </div>

    <div>
      <div class="card">
        <h3>Lokacija & kontakti</h3>
        <p class="muted">Antuna Branka ≈†imiƒáa, 88240 Posu≈°je</p>
        <p style="line-height:1.9">
          üìû <a href="tel:+38763119888">+387 63 119 888</a><br>
          üìß <a href="mailto:goodlifefitnesscentarposusje@gmail.com">goodlifefitnesscentarposusje@gmail.com</a><br>
          üì∏ <a href="https://instagram.com/goodlife" target="_blank" rel="noopener">instagram.com/goodlife</a>
        </p>
        <iframe 
          src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2895.435999621775!2d17.323715475329625!3d43.472370664108865!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x134b271078fb3337%3A0xe6a905b3f512513!2sGoodLife%20Fitness%20Centar!5e0!3m2!1sen!2hr!4v1757019991119!5m2!1sen!2hr" 
          width="100%" height="300" 
          style="border:0; border-radius:12px; margin-top:10px;" 
          allowfullscreen="" loading="lazy" 
          referrerpolicy="no-referrer-when-downgrade">
        </iframe>
      </div>
    </div>
  </div>
</section>

<footer>
  <div class="wrap row">
    <div>¬© <span id="y"></span> GOODLIFE. Sva prava pridr≈æana.</div>
    <div class="muted">Pon‚ÄìPet 07‚Äì22 ‚Ä¢ Sub 07‚Äì22 ‚Ä¢ Ned NE RADIMO!</div>
  </div>
</footer>

<script>
  // godina u footeru
  document.getElementById('y').textContent = new Date().getFullYear();

  const headerEl = document.getElementById('siteHeader');
  const headerCssH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--headerH')) || 70;
  const menuLinks = document.querySelectorAll('.menu a');
  const allLinks  = document.querySelectorAll('a.nav-link, .menu a, .mlink');

  // Klik na logo = oznaƒçi da nakon refresh-a ide na poƒçetnu
  const logoBtn = document.getElementById('logoBtn');
  if (logoBtn){
    logoBtn.addEventListener('click', (e)=>{
      e.preventDefault();
      localStorage.setItem("goHome", "1");
      window.location.reload();
    });
  }
  // nakon refresha prebaci na #pocetna
  window.addEventListener("load", ()=>{
    if (localStorage.getItem("goHome") === "1") {
      localStorage.removeItem("goHome");
      window.location.href = window.location.origin + window.location.pathname + "#pocetna";
    }
  });

  function setActive(href){
    menuLinks.forEach(a=> a.classList.toggle('active', a.getAttribute('href') === href));
  }

  // fade-in sekcija na load
  const sections = document.querySelectorAll('section');
  window.addEventListener('load', ()=> sections.forEach(s=>s.classList.add('show')));

  // glatki scroll s offsetom headera
  function smoothScrollTo(hash){
    const target = document.querySelector(hash);
    if(!target) return;
    const offset = (headerEl?.offsetHeight || headerCssH) + 10;
    const y = target.getBoundingClientRect().top + window.pageYOffset - offset;
    window.scrollTo({ top:y, behavior:'smooth' });
  }

  // scrollspy
  const watchIds = ['#pocetna','#onama','#benefiti','#programi','#paketi','#clanarine','#treneri','#raspored','#cjenik','#iskustva','#kontakt'];
  const watchTargets = watchIds.map(sel=>document.querySelector(sel)).filter(Boolean);
  const ratios = {};

  const io = new IntersectionObserver((entries)=>{
    entries.forEach(en => { ratios[en.target.id] = en.intersectionRatio; });
    let bestId = null, bestRatio = -1;
    Object.keys(ratios).forEach(id=>{
      if(ratios[id] > bestRatio){ bestRatio = ratios[id]; bestId = id; }
    });
    if(!bestId) return;
    const href = '#'+bestId;
    setActive(href);
    const cleanUrl = (href === '#pocetna') ? (location.pathname + location.search) : href;
    history.replaceState(null, '', cleanUrl);
  }, {
    root: null,
    rootMargin: `-${(headerEl?.offsetHeight || headerCssH)}px 0px -50% 0px`,
    threshold: Array.from({length: 21}, (_,i)=> i/20)
  });

  watchTargets.forEach(t=> io.observe(t));

  // linkovi (desktop + mob)
  function closeDrawer(){ /* placeholder */ }
  allLinks.forEach(a=>{
    a.addEventListener('click', (e)=>{
      const href = a.getAttribute('href');
      if(href && href.startsWith('#')){
        e.preventDefault();
        smoothScrollTo(href);
        setActive(href);
        const cleanUrl = (href === '#pocetna') ? (location.pathname + location.search) : href;
        history.pushState(null, '', cleanUrl);
        if (typeof realCloseDrawer === 'function') realCloseDrawer();
      }
    });
  });

  // ===== Mobilni drawer =====
  const burger = document.querySelector('.burger');
  const drawer = document.getElementById('drawer');
  const overlay = document.getElementById('drawerOverlay');
  const drawerClose = document.getElementById('drawerClose');

  function openDrawer(){
    drawer.classList.add('open');
    overlay.classList.add('show');
    drawer.setAttribute('aria-hidden','false');
    burger.setAttribute('aria-expanded','true');
    document.body.style.overflow='hidden';
  }
  function realCloseDrawer(){
    drawer.classList.remove('open');
    overlay.classList.remove('show');
    drawer.setAttribute('aria-hidden','true');
    burger.setAttribute('aria-expanded','false');
    document.body.style.overflow='';
  }

  if(burger){ burger.addEventListener('click', openDrawer); }
  if(drawerClose){ drawerClose.addEventListener('click', realCloseDrawer); }
  if(overlay){ overlay.addEventListener('click', realCloseDrawer); }

  // ESC zatvara
  window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') realCloseDrawer(); });

  // ===== Auto-hide header dok se skrola; poka≈æi kad stane≈° ili si na vrhu =====
  let hideTimer = null;
  function onScroll(){
    if (drawer && drawer.classList.contains('open')) return; // ne sakrivaj kad je meni otvoren
    const y = window.scrollY;
    if (y > 10){
      headerEl.classList.add('hide'); // tijekom skrola: sakrij
    } else {
      headerEl.classList.remove('hide'); // na vrhu ‚Äì poka≈æi
    }
    if (hideTimer) clearTimeout(hideTimer);
    hideTimer = setTimeout(()=>{ headerEl.classList.remove('hide'); }, 160);
  }
  window.addEventListener('scroll', onScroll, {passive:true});

  // ===== Ovisni select trenera =====
  const programSelect = document.getElementById('programSelect');
  const trenerField   = document.getElementById('trenerField');

  const showTrainerFor = new Set([
    'Mr≈°avljenje','Snaga','Kondicija','Rehabilitacija','Osobni trening','Grupni treninzi'
  ]);

  function updateTrainerVisibility(){
    const val = programSelect?.value || '';
    if (showTrainerFor.has(val)){
      trenerField.classList.remove('hidden');
      document.getElementById('trenerSelect').setAttribute('required','required');
    } else {
      trenerField.classList.add('hidden');
      document.getElementById('trenerSelect').removeAttribute('required');
    }
  }

  if (programSelect){
    updateTrainerVisibility();
    programSelect.addEventListener('change', updateTrainerVisibility);
  }
</script>
</body>
</html>
