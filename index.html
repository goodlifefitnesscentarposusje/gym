<!DOCTYPE html>
<html lang="hr">
<head>

<!-- Open Graph (WhatsApp / Facebook) -->
<meta property="og:title" content="GOODLIFE ‚Äî POSU≈†JE" />
<meta property="og:description" content="GoodLife i osobni treninzi. Programi snage, mr≈°avljenja i kondicije. Rezerviraj svoj termin!" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://goodlifefitnesscentarposusje.github.io/gym/" />
<meta property="og:site_name" content="GOODLIFE" />
<meta property="og:locale" content="hr_HR" />

<!-- Slika za preview (1200x630, JPG; preporuka < 500 KB) -->
<meta property="og:image" content="https://goodlifefitnesscentarposusje.github.io/gym/images/goodlifelogo1.jpg?v=3" />
<meta property="og:image:secure_url" content="https://goodlifefitnesscentarposusje.github.io/gym/images/goodlifelogo1.jpg?v=3" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="GoodLife Fitness Centar Posu≈°je ‚Äî logo" />

<!-- Twitter (koristi se ƒçesto i za WA) -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="GOODLIFE ‚Äî POSU≈†JE" />
<meta name="twitter:description" content="GoodLife i osobni treninzi. Programi snage, mr≈°avljenja i kondicije. Rezerviraj svoj termin!" />
<meta name="twitter:image" content="https://goodlifefitnesscentarposusje.github.io/gym/images/goodlifelogo1.jpg?v=3" />





  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>GOODLIFE ‚Äî POSU≈†JE</title>
  <meta name="description" content="GoodLife i osobni treninzi. Programi snage, mr≈°avljenja i kondicije. Rezerviraj svoj termin danas!" />
  <style>
    :root{
      --bg:#0f0f12; --card:#16161a; --muted:#9aa0a6; --text:#f4f5f6;
      --brand:#ff7a00; --brand-2:#ffab66; --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --maxw:1200px; --headerH:70px;
      --fade:.65s;
    }

  .icon {
  width: 20px;
  height: 20px;
  margin-right: 8px;
  vertical-align: middle;
}

.contact-item {
  display: flex;
  align-items: center;
  margin: 10px 0;   /* isti razmak izmeƒëu redova */
}

.contact-item img.icon {
  width: 22px;      /* sve ikone iste veliƒçine */
  height: 22px;
  margin-right: 10px;
}

.contact-item a:hover {
  color: #ff7a00;           /* naranƒçasta kad preƒëe≈° mi≈°em */
}




    /* Global fade */
    body{ opacity:0; transition: opacity var(--fade) ease; }
    body.fade-in{ opacity:1; }
    body.leaving{ opacity:0; transition: opacity var(--fade) ease; }

    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6}
    html{scroll-behavior:smooth}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:0 20px}
    .muted{color:var(--muted)}
    .hidden{display:none}

    /* Kad je modal otvoren: zakljuƒça body (nema skrola / ‚Äúshake‚Äù na mobu) */
    .modal-open{ position:fixed; left:0; right:0; overflow:hidden; width:100%; }

    /* Header */
    header{
      position:sticky;top:0;z-index:200;
      background:rgba(15,15,18,.75);backdrop-filter:blur(8px);
      border-bottom:1px solid rgba(255,255,255,.06);
      transition: transform .55s ease-in-out, background .2s ease;
    }
    header.hide{ transform: translateY(-100%); }

    .nav{position:relative;display:flex;align-items:center;justify-content:space-between;padding:14px 0;}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.6px;cursor:pointer}
    .menu{position:absolute;left:50%;transform:translateX(-50%);display:flex;gap:18px;}
    .menu a{opacity:.9;position:relative;transition:color .5s ease}
    .menu a:hover{color:var(--brand)}
    .menu a.active{color:var(--brand)}
    .menu a.active::after{content:"";position:absolute;left:0;right:0;bottom:-6px;height:2px;background:var(--brand);}

    /* Lang switch (flags) */
    .lang-switch{display:flex;align-items:center;gap:8px;}
    .flag-mini{
      width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;
      border:1px solid rgba(255,255,255,.18); border-radius:8px; padding:6px; background:#121216;
      transition:transform .12s ease, border-color .2s ease; user-select:none; cursor:pointer;
    }
    .flag-mini:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.28)}
    .flag-mini.active{border-color:var(--brand)}
    .flag-mini img{height:25px;width:25px;object-fit:cover;border-radius:4px}

    /* Burger */
    .burger{display:none;align-items:center;justify-content:center;width:44px;height:44px;border:1px solid rgba(255,255,255,.12);border-radius:10px;cursor:pointer;background:#121216;margin-left:8px;}
    .burger span, .burger span::before, .burger span::after{content:"";display:block;height:2px;background:#fff;border-radius:1px;width:20px;position:relative}
    .burger span::before{position:absolute;top:-6px;width:20px}
    .burger span::after{position:absolute;top:6px;width:20px}

    /* Drawer */
    .mobile-drawer{position:fixed;inset:0 0 0 auto;width:min(86vw,360px);background:rgba(15,15,18,.98);transform:translateX(100%);transition:transform .4s ease, opacity .4s ease;z-index:300;display:flex;flex-direction:column;border-left:1px solid rgba(255,255,255,.08); opacity:0}
    .mobile-drawer.open{transform:none; opacity:1}
    .mobile-drawer .top{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
    .mobile-drawer nav{display:flex;flex-direction:column;padding:10px}
    .mobile-drawer a{padding:14px 12px;border-radius:10px;transition:background .5s ease;}
    .mobile-drawer a:hover{background:#1a1a1f}
    .drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:250}
    .drawer-overlay.show{opacity:1;pointer-events:auto}

    /* Hero */
    .hero{position:relative;min-height:82vh;display:grid;place-items:center;overflow:hidden}
    .hero::before{content:"";position:absolute;inset:0;background:url('images/goodlife1.jpeg') center/cover no-repeat;filter:brightness(.45);}
    .hero .inner{position:relative;z-index:1;display:grid;gap:18px;text-align:center;padding:40px 0}
    h1{font-size:clamp(28px,6vw,64px);line-height:1.1;margin:6px 0 0}
    .lead{color:var(--muted);max-width:760px;margin:0 auto}
    .actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:10px}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;gap:10px;font-weight:700;border-radius:12px;padding:14px 18px;border:1px solid rgba(255,255,255,.12);transition:background .7s ease, color .7s ease, transform .7s ease;cursor:pointer;-webkit-appearance:none;appearance:none;}
    .btn.primary{background:var(--brand) !important;border-color:transparent !important;color:#fff !important}
    .btn.primary:hover{background:var(--brand-2) !important;color:#fff !important}
    .btn.primary:focus{color:#fff !important}
    .btn.primary:active{color:#fff !important}
    .btn.primary:visited{color:#fff !important}
    
    /* Specific button element styles for mobile */
    button.btn.primary{color:#fff !important;background:var(--brand) !important}
    button.btn.primary:hover{color:#fff !important;background:var(--brand-2) !important}
    button.btn.primary:focus{color:#fff !important}
    button.btn.primary:active{color:#fff !important}
    
    .btn:active{transform:scale(.98)}

    /* Sections fade-in */
    section{padding:72px 0;border-top:1px solid rgba(255,255,255,.06);opacity:0;transform:translateY(8px);transition:opacity 1.2s ease, transform 1.2s ease;}
    section.show{opacity:1;transform:none;}

    .k-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;align-items:start}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow)}
    .program{display:grid;grid-template-columns:1fr 1.2fr;gap:28px;align-items:center}
    .program .img{border-radius:var(--radius);overflow:hidden;border:1px solid rgba(255,255,255,.08)}
    .coaches{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
    .coach{overflow:hidden;padding:0}
    .coach img{aspect-ratio:4/5;object-fit:cover}
    .coach .info{padding:16px}
    table{width:100%;border-collapse:collapse;border:1px solid rgba(255,255,255,.08);overflow:hidden;border-radius:var(--radius)}
    th,td{padding:14px;border-bottom:1px solid rgba(255,255,255,.06);text-align:left}
    th{background:#19191e}
    .pricing{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .price{padding:28px}
    .price .tag{font-size:38px;font-weight:900}
    .quote{display:block}
    .quote p{word-wrap:break-word;white-space:pre-wrap;line-height:1.5;transition:max-height 0.3s ease;overflow-wrap:break-word;hyphens:auto;word-break:break-word;margin:0 0 8px 0}
    .quote p.long-text{position:relative}
    .quote p.long-text.expanded::after{opacity:0}
    .quote p.long-text::after{content:"";position:absolute;bottom:0;left:0;right:0;height:20px;background:linear-gradient(transparent, var(--card));pointer-events:none;transition:opacity 0.3s ease}
    .testimonial-card{min-height:auto;height:auto;padding:20px;padding-bottom:40px;display:block}
    .testimonial-author{text-align:right;font-size:13px;color:var(--muted);margin-top:8px;opacity:0.8;position:absolute;bottom:8px;right:20px}
    .read-more-btn{background:none;border:none;color:var(--brand);cursor:pointer;font-size:14px;padding:4px 0;text-decoration:underline;margin-top:8px}
    .read-more-btn:hover{color:var(--brand-2)}
    .contact{display:grid;grid-template-columns:1.1fr 1fr;gap:28px}
    .field{display:grid;gap:6px}
    .input, select, textarea{background:#121216;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:12px;color:var(--text);font-size:16px;}
    textarea{min-height:120px}
    .small{font-size:12px;color:var(--muted)}
    .status{margin-top:8px;font-size:14px}
    footer{padding:28px 0;color:var(--muted)}
    footer .row{display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap}

    .table-scroll{overflow:auto;-webkit-overflow-scrolling:touch}
    .contact-line{display:inline-flex;align-items:center;gap:6px;white-space:nowrap}

    /* Language modal */
    .lang-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);z-index:1000;opacity:0;pointer-events:none;transition:opacity .25s ease;}
    .lang-overlay.show{opacity:1;pointer-events:auto;}
    .lang-card{width:min(92vw,520px);background:#141418;border:1px solid rgba(255,255,255,.08);border-radius:20px;padding:24px;box-shadow:var(--shadow);text-align:center;transform:translateY(10px);transition:transform .25s ease;}
    .lang-overlay.show .lang-card{transform:none;}
    .flag-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
    .flag-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:18px;cursor:pointer;background:#191a1f;transition:transform .15s ease, border-color .2s ease;user-select:none;}
    .flag-btn:hover{transform:translateY(-2px);border-color:rgba(255,255,255,.22)}
    .flag-btn img{width:48px;height:48px;border-radius:50%;object-fit:cover}
    .flag-btn div:last-child{font-size:14px;color:var(--muted);font-weight:500}
    .lang-note{color:var(--muted);font-size:13px;margin-top:8px}

    @media (max-width:1024px){
      .k-grid{grid-template-columns:1fr 1fr}
      .program{grid-template-columns:1fr}
      .coaches{grid-template-columns:1fr 1fr}
      .pricing{grid-template-columns:1fr}
      .contact{grid-template-columns:1fr}
    }
    @media (max-width:720px){
      .menu{display:none;position:static;transform:none;}
      .burger{display:inline-flex}
      .k-grid{grid-template-columns:1fr}
    }

    /* ====== CAROUSEL (jedan prozor) ====== */
    #transformacije .grid-top{display:flex;align-items:baseline;justify-content:space-between;gap:12px;margin-bottom:14px}
    #transformacije h2{margin:0}

    .x-viewport{
      position:relative; overflow:hidden;
      border-radius:var(--radius);
      border:1px solid rgba(255,255,255,.06);
      box-shadow:var(--shadow);
      background:var(--card);
      aspect-ratio: 16/9;
      /* sprijeƒçi skrolanje stranice dok swipe-a≈° */
      touch-action: none;
      -webkit-user-select:none; user-select:none;
    }
    .x-track{ display:flex; width:100%; height:100%; transform:translateX(0%); transition: transform .45s ease; will-change: transform; }
    .x-item{ min-width:100%; height:100%; }
    .x-item img{ width:100%; height:100%; object-fit:cover; display:block; }

    .x-nav{display:none}
    @media(min-width:1024px){ .x-nav{display:flex; gap:10px; align-items:center} }

    .x-btn{
      display:inline-flex;align-items:center;justify-content:center;
      width:42px;height:42px;border-radius:999px;border:1px solid rgba(255,255,255,.12);
      background:#121216;cursor:pointer;transition:background .2s ease, border-color .2s ease, opacity .2s ease;
    }
    /* hover bez "skakanja" */
    .x-btn:hover{border-color:rgba(255,255,255,.22);background:#17171c;opacity:.95}
    .x-btn:active{opacity:.9}
    .x-btn svg{width:18px;height:18px}

    .x-abs{position:absolute;top:50%;transform:translateY(-50%);z-index:5;opacity:.92}
    .x-left{left:10px}
    .x-right{right:10px}

    /* HINT ‚Äî samo na mobitelu */
    /* HINT ‚Äî samo na mobitelu */
.swipe-hint{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  display:none;                /* desktop: skriven */
  align-items:center; gap:8px; padding:8px 12px;
  font-size:14px; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.6);
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.12); border-radius:999px;
  user-select:none; pointer-events:none;
  animation:pulse 1.2s ease-in-out infinite, floaty 2.6s ease-in-out infinite;
  opacity:1; transition:opacity .35s ease;      /* za fade-out */
  z-index: 6;                                    /* iznad strelica (koje su z-index:5) */
}
@media (max-width: 720px){
  .swipe-hint{ display:flex; }                   /* mobitel: prika≈æi */
  .quote p{max-height:100px}                     /* mobitel: kraƒáa visina */
}
/* blagi fade-out kad se gasi */
.swipe-hint.fade-out{ opacity:0; }

@keyframes pulse{ 0%{opacity:.55} 50%{opacity:1} 100%{opacity:.55} }
@keyframes floaty{ 0%{transform:translate(-50%,-50%) translateY(0)}
                   50%{transform:translate(-50%,-50%) translateY(-3px)}
                   100%{transform:translate(-50%,-50%) translateY(0)} }
  
.hint-fadeout {
  animation: hintFadeOut 2s ease forwards;
}

@keyframes hintFadeOut {
  from { opacity:1; }
  to { opacity:0; visibility:hidden; }
}

/* Toast notification */
.toast {
  position: fixed; top: 50%; left: 50%; z-index: 2000;
  background: #4CAF50; color: white; padding: 16px 24px;
  border-radius: 12px; box-shadow: 0 8px 24px rgba(0,0,0,.4);
  transform: translate(-50%, -50%) scale(0.8); opacity: 0;
  transition: transform .3s ease, opacity .3s ease;
  font-weight: 500; font-size: 15px; text-align: center;
  min-width: 200px; backdrop-filter: blur(8px);
}
.toast.show { transform: translate(-50%, -50%) scale(1); opacity: 1; }
.toast.error { background: #f44336; }

/* Testimonial animation */
.testimonial-card {
  opacity: 0; transform: translateY(20px);
  animation: testimonialFadeIn .6s ease forwards;
}
@keyframes testimonialFadeIn {
  to { opacity: 1; transform: translateY(0); }
}

/* Character counter */
.char-counter {
  font-size: 12px; color: var(--muted); margin-top: 4px;
  text-align: right;
}
.char-counter.warning { color: #ff9800; }
.char-counter.error { color: #f44336; }

/* Trainer field fade animation */
#trenerField {
  transition: opacity 0.8s ease, transform 0.8s ease, max-height 0.8s ease;
  overflow: hidden;
  max-height: 0; /* Poƒçetno stanje - sakriveno */
  opacity: 0;
  transform: translateY(-10px);
  margin-top: 0 !important;
  padding-top: 0;
  padding-bottom: 0;
}

#trenerField:not(.hidden) {
  opacity: 1;
  transform: translateY(0);
  max-height: 200px;
  margin-top: 10px !important;
  padding-top: 0;
  padding-bottom: 0;
  transition: opacity 0.8s ease, transform 0.8s ease, max-height 0.8s ease;
}

#trenerField.hidden {
  opacity: 0;
  transform: translateY(-10px);
  max-height: 0;
  margin-top: 0 !important;
  padding-top: 0;
  padding-bottom: 0;
}

  </style>
</head>
<body>
  <!-- MODAL: language picker -->
  <div id="langModal" class="lang-overlay" aria-hidden="true">
    <div class="lang-card">
      <h3>Odaberi jezik / Choose language</h3>
      <div class="flag-grid">
        <button class="flag-btn" data-lang="hr" aria-label="Hrvatski">
          <img src="images/hrv.png" alt="Hrvatski"><div>Hrvatski</div>
        </button>
        <button class="flag-btn" data-lang="en" aria-label="English">
          <img src="images/uk.png" alt="English"><div>English</div>
        </button>
      </div>
      <div class="lang-note">
        Kasnije mo≈æe≈° promijeniti preko zastavica u zaglavlju.<br>
        You can change it later via the flags in the header.
      </div>
    </div>
  </div>

  <!-- MODAL: dodaj iskustvo -->
  <div id="testimonialModal" class="lang-overlay" aria-hidden="true">
    <div class="lang-card">
      <h3 data-i18n="testimonials.modal.title">Podijeli svoje iskustvo</h3>
      <form id="testimonialForm">
        <div class="field" style="margin-top:16px">
          <label data-i18n="testimonials.modal.name">Ime i prezime *</label>
          <input type="text" id="testimonialName" class="input" placeholder="Npr. Marko Mariƒá" data-i18n-placeholder="form.name.ph" autocapitalize="words" />
        </div>
        <div class="field" style="margin-top:12px">
          <label data-i18n="testimonials.modal.experience">Tvoje iskustvo *</label>
                    <textarea id="testimonialText" class="input" placeholder="Podijeli svoje iskustvo s GoodLife..." data-i18n-placeholder="testimonials.modal.experience.ph" style="min-height:100px" maxlength="150" autocapitalize="sentences"></textarea>
                    <div class="char-counter" id="charCounter">0/150</div>
        </div>
        <div style="display:flex;gap:10px;margin-top:16px">
          <button type="submit" class="btn primary" data-i18n="testimonials.modal.submit">Po≈°alji</button>
          <button type="button" class="btn" id="closeTestimonialModal" data-i18n="testimonials.modal.cancel">Odustani</button>
        </div>
      </form>
    </div>
  </div>

  <header id="siteHeader">
    <div class="wrap nav">
      <div class="brand" id="logoBtn" title="Poƒçetna">
        <img src="images/goodlifelogo.png" alt="Good Life logo" style="height:85px;" />
      </div>

      <nav class="menu">
        <a href="#pocetna" class="nav-link" data-i18n="nav.home">Poƒçetna</a>
        <a href="#onama" class="nav-link" data-i18n="nav.about">O nama</a>
        <a href="#paketi" class="nav-link" data-i18n="nav.packages">Paketi</a>
        <a href="#clanarine" class="nav-link" data-i18n="nav.memberships">ƒålanarine</a>
        <a href="#kontakt" class="nav-link" data-i18n="nav.contact">Kontakt</a>
      </nav>

      <div style="display:flex;align-items:center;gap:8px">
        <div class="lang-switch">
          <button class="flag-mini" id="langHR" title="Hrvatski"><img src="images/hrv.png" alt="Hrvatski"></button>
          <button class="flag-mini" id="langEN" title="English"><img src="images/uk.png" alt="English"></button>
        </div>
        <button class="burger" aria-label="Izbornik" aria-expanded="false"><span></span></button>
      </div>
    </div>
  </header>

  <!-- Drawer + overlay -->
  <div class="drawer-overlay" id="drawerOverlay"></div>
  <aside class="mobile-drawer" id="drawer" aria-hidden="true">
    <div class="top">
      <strong data-i18n="menu.title">Izbornik</strong>
      <button id="drawerClose" class="btn" style="padding:8px 12px;background:var(--brand);border:0;border-radius:10px" data-i18n="menu.close">Zatvori</button>
    </div>
    <nav>
      <a href="#pocetna" class="nav-link mlink" data-i18n="nav.home">Poƒçetna</a>
      <a href="#onama" class="nav-link mlink" data-i18n="nav.about">O nama</a>
      <a href="#paketi" class="nav-link mlink" data-i18n="nav.packages">Paketi</a>
      <a href="#clanarine" class="nav-link mlink" data-i18n="nav.memberships">ƒålanarine</a>
      <a href="#kontakt" class="nav-link mlink" data-i18n="nav.contact">Kontakt</a>
    </nav>
  </aside>

  <section class="hero show" id="pocetna">
    <div class="inner wrap">
      <h1 style="margin-top:20px;" data-i18n="hero.title">Ostvari svoj potencijal ‚Äî ≈æivi Good Life!</h1>
      <p class="lead" data-i18n="hero.lead">Postigni svoje fitness ciljeve uz vrhunske trenere i moderan program treninga.</p>
      <div class="actions">
        <a class="btn primary nav-link" href="#paketi" data-i18n="hero.btn.packages">Pogledaj pakete</a>
        <a class="btn nav-link" href="#kontakt" data-i18n="hero.btn.contact">Kontaktiraj nas</a>
      </div>
    </div>
  </section>

  <section id="onama">
    <div class="wrap">
      <h2 data-i18n="about.title">O nama</h2>
      <p class="muted" data-i18n="about.text">GoodLife Fitness centar u Posu≈°ju nije samo obiƒçna teretana ‚Äî to je mjesto gdje zajednica ljudi s istim ciljem radi zajedno na zdravlju i napretku. Na≈°i treneri kreiraju individualne programe prilagoƒëene tvom cilju: gubitku kilograma, poveƒáanju mi≈°iƒáne mase, jaƒçanju kondicije ili rehabilitaciji nakon ozljeda. Nudimo struƒçne savjete o prehrani, redovito praƒáenje napretka te prijateljsku atmosferu u kojoj ƒáe≈° pronaƒái dodatnu motivaciju.</p>
    </div>
  </section>

  <section id="benefiti">
    <div class="wrap">
      <div class="k-grid">
        <div class="card"><h3 data-i18n="benefit.1.title">üéØ 1-na-1 coaching</h3><p class="muted" data-i18n="benefit.1.text">Individualni pristup, jasni ciljevi i mjerljivi rezultati.</p></div>
        <div class="card"><h3 data-i18n="benefit.2.title">üèãÔ∏è‚Äç‚ôÄÔ∏è Funkcionalni treninzi</h3><p class="muted" data-i18n="benefit.2.text">Snaga, mobilnost i kardio za maksimalan uƒçinak.</p></div>
        <div class="card"><h3 data-i18n="benefit.3.title">üìà Praƒáenje napretka</h3><p class="muted" data-i18n="benefit.3.text">Mjerenja, fotke napretka i plan prilagoƒëen rezultatima.</p></div>
      </div>
    </div>
  </section>

  <section id="programi">
    <div class="wrap program">
      <div>
        <h2 data-i18n="programs.title">Programi treninga</h2>
        <p class="muted" data-i18n="programs.lead">Svaki plan ukljuƒçuje procjenu, edukaciju o tehnici i prehranu.</p>
        <div class="k-grid" style="margin-top:12px">
          <div class="card"><h3 data-i18n="programs.weightloss">Mr≈°avljenje</h3><p class="muted" data-i18n="programs.weightloss.desc">HIIT + snaga, 3‚Äì5x tjedno.</p></div>
          <div class="card"><h3 data-i18n="programs.strength">Snaga & hipertrofija</h3><p class="muted" data-i18n="programs.strength.desc">Periodizacija, slo≈æene vje≈æbe, progresija.</p></div>
          <div class="card"><h3 data-i18n="programs.condition">Kondicija & mobilnost</h3><p class="muted" data-i18n="programs.condition.desc">Kru≈æni treninzi, core, mobilnost.</p></div>
        </div>
      </div>
      <div class="img"><img src="images/programs.jpg" alt="Trening u teretani" /></div>
    </div>
  </section>

  <!-- ===== TRANSFORMACIJE: JEDAN PROZOR (CAROUSEL) ===== -->
  <section id="transformacije">
    <div class="wrap">
      <div class="grid-top">
        <div>
          <h2 data-i18n="transforms.title">Rezultati transformacija</h2>
          <p class="muted" data-i18n="transforms.subtitle">Pravi ljudi, pravi rezultati ‚Äî pomiƒçemo granice zajedno.</p>
        </div>
        <div class="x-nav">
          
        </div>
      </div>

      <div class="x-viewport" id="xViewport" tabindex="0" aria-roledescription="carousel">
        <div class="x-track" id="xSlider">
          <figure class="x-item"><img src="images/slika1.jpeg" alt="Transformacija 1"></figure>
          <figure class="x-item"><img src="images/slika2.jpeg" alt="Transformacija 2"></figure>
          <figure class="x-item"><img src="images/slika3.jpeg" alt="Transformacija 3"></figure>
        </div>

        <!-- apsolutne strelice u viewportu -->
        <button class="x-btn x-abs x-left" id="xPrevAbs" aria-label="Prev">
          <svg viewBox="0 0 24 24" fill="none"><path d="M15 6L9 12L15 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <button class="x-btn x-abs x-right" id="xNextAbs" aria-label="Next">
          <svg viewBox="0 0 24 24" fill="none"><path d="M9 6L15 12L9 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>

        <!-- HINT: samo mobitel, centriran, pulsira dok ne krene listanje (bez palca) -->
        <div class="swipe-hint x-hint-in" id="swipeHint">
          <span data-i18n="transforms.hint">Povuci udesno za vi≈°e</span>
        </div>
      </div>
    </div>
  </section>
  <!-- ===== /TRANSFORMACIJE ===== -->

  <section id="paketi">
    <div class="wrap">
      <h2 data-i18n="packages.title">Paketi</h2>
      <p class="muted" data-i18n="packages.lead">Odaberi svoj plan ‚Äî bez skrivenih tro≈°kova.</p>
      <div class="pricing" style="margin-top:16px">
        <div class="card price"><h3>Basic</h3><div class="tag">29‚Ç¨ <span data-i18n="pricing.monthly">mjeseƒçno</span></div><p class="muted" data-i18n="packages.basic.desc">2x tjedno, grupni treninzi</p><a class="btn primary nav-link package-btn" href="#kontakt" data-package="Basic" data-i18n="common.start">Kreni</a></div>
        <div class="card price" style="border:2px solid var(--brand)"><h3>Standard</h3><div class="tag">49‚Ç¨ <span data-i18n="pricing.monthly">mjeseƒçno</span></div><p class="muted" data-i18n="packages.standard.desc">3x tjedno + plan</p><a class="btn primary nav-link package-btn" href="#kontakt" data-package="Standard" data-i18n="common.start">Kreni</a></div>
        <div class="card price"><h3>Premium</h3><div class="tag">79‚Ç¨ <span data-i18n="pricing.monthly">mjeseƒçno</span></div><p class="muted" data-i18n="packages.premium.desc">Neograniƒçeno + 1-na-1 mjeseƒçno</p><a class="btn primary nav-link package-btn" href="#kontakt" data-package="Premium" data-i18n="common.start">Kreni</a></div>
      </div>
    </div>
  </section>

  <!-- ƒåLANARINE -->
  <section id="clanarine">
    <div class="wrap">
      <h2 data-i18n="memberships.title">ƒålanarine</h2>
      <div class="pricing" style="margin-top:16px">
        <div class="card">
          <h3 data-i18n="memberships.basic">Osnovni paket</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.basic.2x">2x tjedno ‚Äî <strong>40 KM</strong></li>
            <li data-i18n="m.basic.3x">3x tjedno ‚Äî <strong>50 KM</strong></li>
            <li data-i18n="m.basic.unl">Neograniƒçeno ‚Äî <strong>60 KM</strong></li>
            <li data-i18n="m.basic.vip">VIP (neograniƒçeno + sauna) ‚Äî <strong>100 KM</strong></li>
            <li data-i18n="m.basic.day">Jednodnevni ‚Äî <strong>7 KM</strong></li>
            <li data-i18n="m.basic.half">Polumjeseƒçni (15 dana) ‚Äî <strong>35 KM</strong></li>
          </ul>
        </div>
        <div class="card">
          <h3 data-i18n="memberships.students">Srednjo≈°kolci</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.stu.2x">2x tjedno ‚Äî <strong>25 KM</strong></li>
            <li data-i18n="m.stu.3x">3x tjedno ‚Äî <strong>35 KM</strong></li>
            <li data-i18n="m.stu.unl">Neograniƒçeno ‚Äî <strong>45 KM</strong></li>
            <li data-i18n="m.stu.group">Grupni treninzi ‚Äî <strong>45 KM</strong></li>
            <li data-i18n="m.stu.day">Jednodnevni ‚Äî <strong>6 KM</strong></li>
          </ul>
        </div>
        <div class="card">
          <h3 data-i18n="memberships.discounts">Popusti</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.disc.3m">3 mjeseca ‚Äî <strong>-10%</strong></li>
            <li data-i18n="m.disc.6m">6 mjeseci ‚Äî <strong>-20%</strong></li>
            <li data-i18n="m.disc.12m">12 mjeseci ‚Äî <strong>-30%</strong></li>
            <li data-i18n="m.disc.sto">Trajni nalog (1 godina) ‚Äî <strong>-20%</strong></li>
          </ul>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <h3 data-i18n="memberships.benefits">Posebne pogodnosti</h3>
        <p class="muted" style="margin:0" data-i18n="memberships.benefits.text">Pogodnosti za firme ‚Ä¢ Obiteljski popusti ‚Ä¢ Popusti za klubove</p>
      </div>
    </div>
  </section>

  <section id="treneri">
    <div class="wrap">
      <h2 data-i18n="coaches.title">Upoznaj trenere</h2>
      <div class="coaches" style="margin-top:12px">
        <article class="card coach"><img src="images/coach1.jpg" alt="Trener 1" /><div class="info"><h3 style="text-align:center">Ivan</h3></div></article>
        <article class="card coach"><img src="images/coach2.jpg" alt="Trener 2" /><div class="info"><h3 style="text-align:center">Tina</h3></div></article>
        <article class="card coach"><img src="images/coach3.jpg" alt="Trener 3" /><div class="info"><h3 style="text-align:center">Toni</h3></div></article>
        <article class="card coach"><img src="images/coach4.jpg" alt="Trener 4" /><div class="info"><h3 style="text-align:center">Davor</h3></div></article>
      </div>
    </div>
  </section>

  <section id="raspored">
    <div class="wrap">
      <h2 data-i18n="schedule.title">Raspored grupnih treninga</h2>
      <div class="card" style="margin-top:12px">
        <div class="table-scroll">
          <table>
            <thead>
              <tr>
                <th data-i18n="schedule.day">Dan</th>
                <th>07:00</th><th>12:00</th><th>18:00</th><th>20:00</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-i18n="day.mon">Pon</td>
                <td>HIIT</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td data-i18n="w.full">Full body</td>
              </tr>
              <tr>
                <td data-i18n="day.tue">Uto</td>
                <td data-i18n="w.str">Snaga</td>
                <td>Core</td>
                <td>HIIT</td>
                <td data-i18n="w.cond">Kondicija</td>
              </tr>
              <tr>
                <td data-i18n="day.wed">Sri</td>
                <td data-i18n="w.full">Full body</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td>HIIT</td>
              </tr>
              <tr>
                <td data-i18n="day.thu">ƒået</td>
                <td data-i18n="w.str">Snaga</td>
                <td>Core</td>
                <td data-i18n="w.cond">Kondicija</td>
                <td data-i18n="w.full">Full body</td>
              </tr>
              <tr>
                <td data-i18n="day.fri">Pet</td>
                <td>HIIT</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td data-i18n="w.relax">Opustanje</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <section id="cjenik">
    <div class="wrap">
      <h2 data-i18n="pricing.title">Cjenik</h2>
      <div class="pricing" style="margin-top:12px">
        <div class="card price"><h3 data-i18n="pricing.group">Grupni treninzi</h3><div class="tag">39‚Ç¨ <span data-i18n="pricing.monthly">mjeseƒçno</span></div><p class="muted" data-i18n="pricing.group.desc">3x tjedno</p><a class="btn primary nav-link pricing-btn" href="#kontakt" data-program="Grupni treninzi" data-i18n="pricing.join">Upi≈°i se</a></div>
        <div class="card price" style="border:2px solid var(--brand)"><h3 data-i18n="pricing.pt">Osobni trening</h3><div class="tag">25‚Ç¨ <span data-i18n="pricing.hourly">po satu</span></div><p class="muted" data-i18n="pricing.pt.desc">1-na-1</p><a class="btn primary nav-link pricing-btn" href="#kontakt" data-program="Osobni trening" data-i18n="pricing.book">Rezerviraj</a></div>
        <div class="card price"><h3 data-i18n="pricing.online">Online plan</h3><div class="tag">59‚Ç¨ <span data-i18n="pricing.monthly">mjeseƒçno</span></div><p class="muted" data-i18n="pricing.online.desc">Plan + check-in</p><a class="btn primary nav-link pricing-btn" href="#kontakt" data-program="Online plan" data-i18n="pricing.request">Zatra≈æi plan</a></div>
      </div>
    </div>
  </section>

  <section id="iskustva">
    <div class="wrap">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px">
        <h2 data-i18n="testimonials.title">Iskustva ƒçlanova</h2>
        <button class="btn primary" id="addTestimonialBtn" data-i18n="testimonials.add">Dodaj iskustvo</button>
      </div>
      <div class="k-grid" id="testimonialsGrid" style="margin-top:12px">
        <div class="card quote"><p data-i18n="testimonials.1">"Za 3 mjeseca -10 kg i osjeƒáam se bolje nego ikad."</p><span class="muted">‚Äî Ana</span></div>
        <div class="card quote"><p data-i18n="testimonials.2">"Podigao sam bench za 20 kg."</p><span class="muted">‚Äî Luka</span></div>
        <div class="card quote"><p data-i18n="testimonials.3">"Najbolja atmosfera i oprema."</p><span class="muted">‚Äî Petra</span></div>
      </div>
    </div>
  </section>

  <section id="kontakt">
    <div class="wrap contact">
      <div>
        <h2 data-i18n="contact.title">Rezerviraj termin ili po≈°alji upit</h2>
        <form id="rez-form" action="https://formspree.io/f/xqadnqjp" method="POST" class="card">
          <div class="field">
            <label data-i18n="form.name.label">Ime i prezime *</label>
           <input name="ime" id="imeInput" required class="input" placeholder="Npr. Marko Mariƒá" data-i18n-placeholder="form.name.ph" autocomplete="name" autocapitalize="words" />
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.email.label">E-mail *</label>
            <input name="email" type="email" required class="input" placeholder="tvoj@email.com" data-i18n-placeholder="form.email.ph" autocomplete="email" id="emailInput" autocapitalize="none" />
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.program.label">Program / upit</label>
            <select name="program" id="programSelect" class="input">
              <option value="Mr≈°avljenje" data-i18n="form.program.opt.weightloss">Mr≈°avljenje</option>
              <option value="Snaga" data-i18n="form.program.opt.strength">Snaga</option>
              <option value="Kondicija" data-i18n="form.program.opt.condition">Kondicija</option>
              <option value="Rehabilitacija" data-i18n="form.program.opt.rehab">Rehabilitacija</option>
              <option value="Opƒái upit/pitanje" data-i18n="form.program.opt.general">Opƒái upit/pitanje</option>
            </select>
          </div>

          <div class="field hidden" id="trenerField" style="margin-top:10px">
            <label data-i18n="form.trainer.label">Odaberi trenera</label>
            <select name="trener" id="trenerSelect" class="input"></select>
            <input type="hidden" name="selected_trainer" id="selectedTrainer" />
            <input type="hidden" name="trainer_email" id="trainerEmail" />
            <input type="hidden" name="message_type" id="messageType" />
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.message.label">Poruka</label>
            <textarea name="poruka" id="porukaTextarea" placeholder="Napi≈°i svoj cilj ili pitanje‚Ä¶" data-i18n-placeholder="form.message.ph" autocapitalize="sentences"></textarea>
          </div>

          <button class="btn primary" style="margin-top:14px" type="submit" data-i18n="form.submit">Po≈°alji</button>
          <div id="status" class="status"></div>
        </form>
      </div>

      <div>
        <div class="card">
  <h3 data-i18n="contact.loc.title">Location & contacts</h3>
  <p class="muted">Fra Grge Martiƒáa 10, 88240 Posu≈°je</p>

  <div class="contact-item">
    <img src="images/phone.png" alt="Phone" class="icon">
    <a href="tel:+38763119888">+387 63 119 888</a>
  </div>

  <div class="contact-item">
    <img src="images/gmail.png" alt="Email" class="icon">
    <a href="mailto:goodlifefitnesscentarposusje@gmail.com">
      Email
    </a>
  </div>

  <div class="contact-item">
    <img src="images/instagram.png" alt="Instagram" class="icon">
    <a href="https://instagram.com/goodlife_fitnesscentar" target="_blank">
      Instagram
    </a>
  </div>

  <div class="contact-item">
    <img src="images/facebook.png" alt="Facebook" class="icon">
    <a href="https://facebook.com/goodlife_fitnesscentar" target="_blank">
      Facebook
    </a>
  </div>
</div>



          </p>
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2895.435999621775!2d17.323715475329625!3d43.472370664108865!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x134b271078fb3337%3A0xe6a905b3f512513!2sGoodLife%20Fitness%20Centar!5e0!3m2!1sen!2hr!4v1757019991119!5m2!1sen!2hr" 
            width="100%" height="300" 
            style="border:0; border-radius:12px; margin-top:10px;" 
            allowfullscreen="" loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap row">
      <div>¬© <span id="y"></span> GOODLIFE. <span data-i18n="footer.rights">Sva prava pridr≈æana.</span></div>
      <div class="muted" data-i18n="footer.hours">Pon‚ÄìPet 07‚Äì22 ‚Ä¢ Sub 07‚Äì22 ‚Ä¢ Ned NE RADIMO!</div>
    </div>
  </footer>

<script>
/* ===== I18N ===== */
const I18N = {
  hr: {
    "nav.home":"Poƒçetna","nav.about":"O nama","nav.packages":"Paketi","nav.memberships":"ƒålanarine","nav.contact":"Kontakt",
    "menu.title":"Izbornik","menu.close":"Zatvori",
    "hero.title":"Ostvari svoj potencijal ‚Äî ≈æivi Good Life!",
    "hero.lead":"Postigni svoje fitness ciljeve uz vrhunske trenere i moderan program treninga.",
    "hero.btn.packages":"Pogledaj pakete","hero.btn.contact":"Kontaktiraj nas",
    "about.title":"O nama",
    "about.text":"GoodLife Fitness centar u Posu≈°ju nije samo obiƒçna teretana ‚Äî to je mjesto gdje zajednica ljudi s istim ciljem radi zajedno na zdravlju i napretku. Na≈°i treneri kreiraju individualne programe prilagoƒëene tvom cilju: gubitku kilograma, poveƒáanju mi≈°iƒáne mase, jaƒçanju kondicije ili rehabilitaciji nakon ozljeda. Nudimo struƒçne savjete o prehrani, redovito praƒáenje napretka te prijateljsku atmosferu u kojoj ƒáe≈° pronaƒái dodatnu motivaciju.",
    "benefit.1.title":"üéØ 1-na-1 coaching","benefit.1.text":"Individualni pristup, jasni ciljevi i mjerljivi rezultati.",
    "benefit.2.title":"üèãÔ∏è‚Äç‚ôÄÔ∏è Funkcionalni treninzi","benefit.2.text":"Snaga, mobilnost i kardio za maksimalan uƒçinak.",
    "benefit.3.title":"üìà Praƒáenje napretka","benefit.3.text":"Mjerenja, fotke napretka i plan prilagoƒëen rezultatima.",
    "programs.title":"Programi treninga","programs.lead":"Svaki plan ukljuƒçuje procjenu, edukaciju o tehnici i prehranu.",
    "programs.weightloss":"Mr≈°avljenje","programs.weightloss.desc":"HIIT + snaga, 3‚Äì5x/tjedno",
    "programs.strength":"Snaga & hipertrofija","programs.strength.desc":"Periodizacija, slo≈æene vje≈æbe, progresija.",
    "programs.condition":"Kondicija & mobilnost","programs.condition.desc":"Kru≈æni treninzi, core, mobilnost.",
    "transforms.title":"Rezultati transformacija",
    "transforms.subtitle":"Pravi ljudi, pravi rezultati ‚Äî pomiƒçemo granice zajedno.",
    "transforms.hint":"Povuci udesno za vi≈°e",
    "packages.title":"Paketi","packages.lead":"Odaberi svoj plan ‚Äî bez skrivenih tro≈°kova.",
    "packages.basic.desc":"2x tjedno, grupni treninzi","packages.standard.desc":"3x tjedno + plan","packages.premium.desc":"Neograniƒçeno + 1-na-1 mjeseƒçno",
    "common.start":"Kreni",
    "memberships.title":"ƒålanarine","memberships.basic":"Osnovni paket","memberships.students":"Srednjo≈°kolci","memberships.discounts":"Popusti",
    "memberships.benefits":"Posebne pogodnosti","memberships.benefits.text":"Pogodnosti za firme ‚Ä¢ Obiteljski popusti ‚Ä¢ Popusti za klubove",
    "coaches.title":"Upoznaj trenere",
    "schedule.title":"Raspored grupnih treninga","schedule.day":"Dan",
    "day.mon":"Pon","day.tue":"Uto","day.wed":"Sri","day.thu":"ƒået","day.fri":"Pet",
    "w.mob":"Mobilnost","w.str":"Snaga","w.full":"Full body","w.cond":"Kondicija","w.relax":"Opustanje",
    "pricing.title":"Cjenik","pricing.group":"Grupni treninzi","pricing.group.desc":"3x tjedno","pricing.join":"Upi≈°i se",
    "pricing.pt":"Osobni trening","pricing.pt.desc":"1-na-1","pricing.book":"Rezerviraj",
    "pricing.online":"Online plan","pricing.online.desc":"Plan + check-in","pricing.request":"Zatra≈æi plan",
    "testimonials.title":"Iskustva ƒçlanova","testimonials.add":"Dodaj iskustvo","testimonials.1":"\"Za 3 mjeseca -10 kg i osjeƒáam se bolje nego ikad.\"","testimonials.2":"\"Podigao sam bench za 20 kg.\"","testimonials.3":"\"Najbolja atmosfera i oprema.\"",
    "testimonials.modal.title":"Podijeli svoje iskustvo","testimonials.modal.name":"Ime i prezime *","testimonials.modal.experience":"Tvoje iskustvo *","testimonials.modal.experience.ph":"Podijeli svoje iskustvo s GoodLife...","testimonials.modal.submit":"Po≈°alji","testimonials.modal.cancel":"Odustani",
    "testimonials.toast.success":"Iskustvo uspje≈°no dodano!","testimonials.toast.error":"Gre≈°ka pri slanju iskustva","testimonials.toast.short":"Iskustvo je prekratko (min. 10 znakova)","testimonials.toast.long":"Iskustvo je predugaƒçko (max. 200 znakova)",
    "testimonials.readMore":"Uƒçitaj vi≈°e","testimonials.readLess":"Prika≈æi manje",
    "packages.basic.name":"Basic paket","packages.standard.name":"Standard paket","packages.premium.name":"Premium paket",
    "contact.title":"Rezerviraj termin ili po≈°alji upit",
    "form.name.label":"Ime i prezime *","form.name.ph":"Npr. Marko Mariƒá",
    "form.email.label":"E-mail *","form.email.ph":"tvoj@email.com",
    "form.program.label":"Program / upit",
    "form.program.opt.weightloss":"Mr≈°avljenje","form.program.opt.strength":"Snaga","form.program.opt.condition":"Kondicija","form.program.opt.online":"Online plan","form.program.opt.pt":"Osobni trening","form.program.opt.group":"Grupni treninzi","form.program.opt.rehab":"Rehabilitacija","form.program.opt.general":"Opƒái upit/pitanje",
    "form.trainer.label":"Odaberi trenera",
    "form.message.label":"Poruka","form.message.ph":"Napi≈°i svoj cilj ili pitanje‚Ä¶",
    "form.submit":"Po≈°alji",
    "contact.loc.title":"Lokacija & kontakti",
    "coach.ivan.role":"Snaga","coach.tina.role":"Mr≈°avljenje","coach.toni.role":"Kondicija","coach.davor.role":"Rehabilitacija",
    "footer.rights":"Sva prava pridr≈æana.","footer.hours":"Pon‚ÄìPet 07‚Äì22 ‚Ä¢ Sub 07‚Äì22 ‚Ä¢ Ned NE RADIMO!",
    "m.basic.2x":"2x tjedno ‚Äî <strong>40 KM</strong>",
    "m.basic.3x":"3x tjedno ‚Äî <strong>50 KM</strong>",
    "m.basic.unl":"Neograniƒçeno ‚Äî <strong>60 KM</strong>",
    "m.basic.vip":"VIP (neograniƒçeno + sauna) ‚Äî <strong>100 KM</strong>",
    "m.basic.day":"Jednodnevni ‚Äî <strong>7 KM</strong>",
    "m.basic.half":"Polumjeseƒçni (15 dana) ‚Äî <strong>35 KM</strong>",
    "m.stu.2x":"2x tjedno ‚Äî <strong>25 KM</strong>",
    "m.stu.3x":"3x tjedno ‚Äî <strong>35 KM</strong>",
    "m.stu.unl":"Neograniƒçeno ‚Äî <strong>45 KM</strong>",
    "m.stu.group":"Grupni treninzi ‚Äî <strong>45 KM</strong>",
    "m.stu.day":"Jednodnevni ‚Äî <strong>6 KM</strong>",
    "m.disc.3m":"3 mjeseca ‚Äî <strong>-10%</strong>",
    "m.disc.6m":"6 mjeseci ‚Äî <strong>-20%</strong>",
    "m.disc.12m":"12 mjeseci ‚Äî <strong>-30%</strong>",
    "m.disc.sto":"Trajni nalog (1 godina) ‚Äî <strong>-20%</strong>",
    "pricing.monthly":"/mj",
    "pricing.hourly":"/sat"
  },
  en: {
    "nav.home":"Home","nav.about":"About","nav.packages":"Packages","nav.memberships":"Memberships","nav.contact":"Contact",
    "menu.title":"Menu","menu.close":"Close",
    "hero.title":"Unlock your potential ‚Äî live the Good Life!",
    "hero.lead":"Reach your fitness goals with expert coaches and modern training programs.",
    "hero.btn.packages":"See packages","hero.btn.contact":"Contact us",
    "about.title":"About us",
    "about.text":"GoodLife Fitness Center in Posu≈°je is more than a gym ‚Äî it‚Äôs a community working together on health and progress. Our coaches tailor programs for fat loss, muscle gain, conditioning, or post-injury rehab. We provide nutrition guidance, regular progress tracking, and a motivating atmosphere.",
    "benefit.1.title":"üéØ 1-on-1 coaching","benefit.1.text":"Personal approach, clear goals, measurable results.",
    "benefit.2.title":"üèãÔ∏è‚Äç‚ôÄÔ∏è Functional training","benefit.2.text":"Strength, mobility and cardio for maximum impact.",
    "benefit.3.title":"üìà Progress tracking","benefit.3.text":"Measurements, progress photos and adaptive planning.",
    "programs.title":"Training programs","programs.lead":"Every plan includes an assessment, technique coaching and nutrition tips.",
    "programs.weightloss":"Weight loss","programs.weightloss.desc":"HIIT + strength, 3‚Äì5√ó/week",
    "programs.strength":"Strength & hypertrophy","programs.strength.desc":"Periodization, compound lifts, progression.",
    "programs.condition":"Conditioning & mobility","programs.condition.desc":"Circuits, core, mobility.",
    "transforms.title":"Transformation results",
    "transforms.subtitle":"Real people, real results ‚Äî pushing limits together.",
    "transforms.hint":"Swipe right for more",
    "packages.title":"Packages","packages.lead":"Pick your plan ‚Äî no hidden fees.",
    "packages.basic.desc":"2√ó/week, group sessions","packages.standard.desc":"3√ó/week + plan","packages.premium.desc":"Unlimited + monthly 1-on-1",
    "common.start":"Start",
    "memberships.title":"Memberships","memberships.basic":"Basic plan","memberships.students":"High-school students","memberships.discounts":"Discounts",
    "memberships.benefits":"Special benefits","memberships.benefits.text":"Corporate benefits ‚Ä¢ Family discounts ‚Ä¢ Club discounts",
    "coaches.title":"Meet the coaches",
    "schedule.title":"Group class schedule","schedule.day":"Day",
    "day.mon":"Mon","day.tue":"Tue","day.wed":"Wed","day.thu":"Thu","day.fri":"Fri",
    "w.mob":"Mobility","w.str":"Strength","w.full":"Full body","w.cond":"Conditioning","w.relax":"Relax",
    "pricing.title":"Pricing","pricing.group":"Group training","pricing.group.desc":"3√ó per week","pricing.join":"Join now",
    "pricing.pt":"Personal training","pricing.pt.desc":"1-on-1","pricing.book":"Book",
    "pricing.online":"Online plan","pricing.online.desc":"Plan + check-in","pricing.request":"Request plan",
    "testimonials.title":"Member stories","testimonials.add":"Add testimonial","testimonials.1":"\"Lost 10 kg in 3 months ‚Äî feel better than ever.\"","testimonials.2":"\"Added 20 kg to my bench.\"","testimonials.3":"\"Best atmosphere and equipment.\"",
    "testimonials.modal.title":"Share your experience","testimonials.modal.name":"Full name *","testimonials.modal.experience":"Your experience *","testimonials.modal.experience.ph":"Share your experience with GoodLife...","testimonials.modal.submit":"Submit","testimonials.modal.cancel":"Cancel",
    "testimonials.toast.success":"Testimonial added successfully!","testimonials.toast.error":"Error sending testimonial","testimonials.toast.short":"Testimonial too short (min. 10 characters)","testimonials.toast.long":"Testimonial too long (max. 200 characters)",
    "testimonials.readMore":"Read more","testimonials.readLess":"Show less",
    "packages.basic.name":"Basic package","packages.standard.name":"Standard package","packages.premium.name":"Premium package",
    "contact.title":"Book a session or send an inquiry",
    "form.name.label":"Full name *","form.name.ph":"e.g. Marko Mariƒá",
    "form.email.label":"E-mail *","form.email.ph":"your@email.com",
    "form.program.label":"Program / inquiry",
    "form.program.opt.weightloss":"Weight loss","form.program.opt.strength":"Strength","form.program.opt.condition":"Conditioning","form.program.opt.online":"Online plan","form.program.opt.pt":"Personal training","form.program.opt.group":"Group training","form.program.opt.rehab":"Rehabilitation","form.program.opt.general":"General question",
    "form.trainer.label":"Choose a trainer",
    "form.message.label":"Message","form.message.ph":"Tell us your goal or question‚Ä¶",
    "form.submit":"Send",
    "contact.loc.title":"Location & contacts",
    "coach.ivan.role":"Strength","coach.tina.role":"Weight loss","coach.toni.role":"Conditioning","coach.davor.role":"Rehabilitation",
    "footer.rights":"All rights reserved.","footer.hours":"Mon‚ÄìFri 07‚Äì22 ‚Ä¢ Sat 07‚Äì22 ‚Ä¢ Sun CLOSED",
    "m.basic.2x":"2√ó per week ‚Äî <strong>40 KM</strong>",
    "m.basic.3x":"3√ó per week ‚Äî <strong>50 KM</strong>",
    "m.basic.unl":"Unlimited ‚Äî <strong>60 KM</strong>",
    "m.basic.vip":"VIP (unlimited + sauna) ‚Äî <strong>100 KM</strong>",
    "m.basic.day":"Day pass ‚Äî <strong>7 KM</strong>",
    "m.basic.half":"Half-month (15 days) ‚Äî <strong>35 KM</strong>",
    "m.stu.2x":"2√ó per week ‚Äî <strong>25 KM</strong>",
    "m.stu.3x":"3√ó per week ‚Äî <strong>35 KM</strong>",
    "m.stu.unl":"Unlimited ‚Äî <strong>45 KM</strong>",
    "m.stu.group":"Group training ‚Äî <strong>45 KM</strong>",
    "m.stu.day":"Day pass ‚Äî <strong>6 KM</strong>",
    "m.disc.3m":"3 months ‚Äî <strong>-10%</strong>",
    "m.disc.6m":"6 months ‚Äî <strong>-20%</strong>",
    "m.disc.12m":"12 months ‚Äî <strong>-30%</strong>",
    "m.disc.sto":"Standing order (1 year) ‚Äî <strong>-20%</strong>",
    "pricing.monthly":"/month",
    "pricing.hourly":"/hour"
  }
};

/* ===== Helpers ===== */
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

/* Year */
$('#y').textContent = new Date().getFullYear();

/* Fade-in on load */
window.addEventListener('load', () => { document.body.classList.add('fade-in'); });

/* ===== I18N apply ===== */
function applyI18n(lang){
  const dict = I18N[lang] || I18N.hr;
  document.documentElement.lang = lang;

  $$('[data-i18n]').forEach(el=>{
    const k = el.dataset.i18n;
    if (dict[k]) el.innerHTML = dict[k];
  });
  $$('[data-i18n-placeholder]').forEach(el=>{
    const k = el.dataset.i18nPlaceholder;
    if (dict[k]) el.placeholder = dict[k];
  });

  $('#langHR')?.classList.toggle('active', lang==='hr');
  $('#langEN')?.classList.toggle('active', lang==='en');
  
  // Re-render testimonials with updated timestamps
  setTimeout(() => {
    if (typeof loadTestimonials === 'function') {
      loadTestimonials();
    }
  }, 100);
}

/* ===== Modal helpers (lock body scroll) ===== */
const langModal = $('#langModal');
function openLangModal(){
  langModal?.classList.add('show');
  langModal?.setAttribute('aria-hidden','false');
  document.body.style.top = `-${window.scrollY}px`;
  document.body.classList.add('modal-open');
}
function closeLangModal(){
  langModal?.classList.remove('show');
  langModal?.setAttribute('aria-hidden','true');
  const y = parseInt((document.body.style.top || '0').replace('-',''),10) || 0;
  document.body.classList.remove('modal-open');
  document.body.style.top = '';
  window.scrollTo(0, y || 0);
}

/* ===== First-visit logic: modal samo kad NIJE reload ===== */
const savedLang = localStorage.getItem('gl_lang');
const navEntry = performance.getEntriesByType?.('navigation')?.[0];
const isReload = navEntry ? navEntry.type === 'reload'
                          : (performance.navigation && performance.navigation.type === 1);

if (!isReload) {
  // prika≈æi modal i ZAKLJUƒåAJ pozadinu
  langModal?.classList.add('show');
  langModal?.setAttribute('aria-hidden','false');
  document.body.style.top = `-${window.scrollY}px`;
  document.body.classList.add('modal-open');
  if (savedLang) applyI18n(savedLang);
} else {
  applyI18n(savedLang || 'hr');
  langModal?.classList.remove('show');
  langModal?.setAttribute('aria-hidden','true');
}

/* Odabir jezika iz modala: fade & jump home */
function chooseLangFirst(lang){
  localStorage.setItem('gl_lang', lang);
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');

  setTimeout(()=> {
    closeLangModal();
    applyI18n(lang);
    history.replaceState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo({ top:0, behavior:'instant' });
    document.body.classList.remove('leaving');
    void document.body.offsetWidth;
    document.body.classList.add('fade-in');
  }, 650);
}

/* Promjena jezika preko zastavica u headeru: fade & home */
function switchLangFromHeader(lang){
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');

  setTimeout(()=> {
    localStorage.setItem('gl_lang', lang);
    applyI18n(lang);
    history.pushState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo({ top:0, behavior:'instant' });
    document.body.classList.remove('leaving');
    void document.body.offsetWidth;
    document.body.classList.add('fade-in');
  }, 650);
}

/* Bindovi jezika */
$$('.flag-btn').forEach(b=> b.addEventListener('click', ()=> chooseLangFirst(b.dataset.lang)));
$('#langHR')?.addEventListener('click', ()=> switchLangFromHeader('hr'));
$('#langEN')?.addEventListener('click', ()=> switchLangFromHeader('en'));

/* ===== Refresh (normal + logo) ‚Üí fade i povratak na poƒçetnu ===== */
if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
window.addEventListener('beforeunload', () => {
  sessionStorage.setItem('forceHome','1');
  document.body.classList.add('leaving');
});
// Fallback za mobile/Safari gdje beforeunload ponekad ne okida
window.addEventListener('pagehide', () => {
  sessionStorage.setItem('forceHome','1');
});
window.addEventListener('pageshow', () => {
  if (sessionStorage.getItem('forceHome') === '1'){
    sessionStorage.removeItem('forceHome');
    history.replaceState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo(0,0);
  }
});
$('#logoBtn')?.addEventListener('click', (e)=>{
  e.preventDefault();
  sessionStorage.setItem('forceHome','1');
  document.body.classList.add('leaving');
  setTimeout(()=> location.reload(), 50);
});

/* ===== Nav / drawer / spy ===== */
const headerEl = document.getElementById('siteHeader');
const headerCssH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--headerH')) || 70;
const menuLinks = document.querySelectorAll('.menu a');
const allLinks  = document.querySelectorAll('a.nav-link, .menu a, .mlink');

function setActive(href){ menuLinks.forEach(a=> a.classList.toggle('active', a.getAttribute('href') === href)); }

const sections = document.querySelectorAll('section');
window.addEventListener('load', ()=>{
  sections.forEach(s=>s.classList.add('show'));
  initTransformSlider(); // INIT CAROUSEL
});

function smoothScrollTo(hash){
  const target = document.querySelector(hash); if(!target) return;
  const offset = (headerEl?.offsetHeight || headerCssH) + 10;
  const y = target.getBoundingClientRect().top + window.pageYOffset - offset;
  window.scrollTo({ top:y, behavior:'smooth' });
}

const watchIds = ['#pocetna','#onama','#benefiti','#programi','#transformacije','#paketi','#clanarine','#treneri','#raspored','#cjenik','#iskustva','#kontakt'];
const watchTargets = watchIds.map(sel=>document.querySelector(sel)).filter(Boolean);
const ratios = {};
const io = new IntersectionObserver((entries)=>{
  entries.forEach(en => { ratios[en.target.id] = en.intersectionRatio; });
  let bestId = null, bestRatio = -1;
  Object.keys(ratios).forEach(id=>{ if(ratios[id] > bestRatio){ bestRatio = ratios[id]; bestId = id; } });
  if(!bestId) return;
  const href = '#'+bestId;
  setActive(href);
  const cleanUrl = (href === '#pocetna') ? (location.pathname + location.search) : href;
  history.replaceState(null, '', cleanUrl);
}, {
  root: null,
  rootMargin: `-${(headerEl?.offsetHeight || headerCssH)}px 0px -50% 0px`,
  threshold: Array.from({length: 21}, (_,i)=> i/20)
});
watchTargets.forEach(t=> io.observe(t));

let realCloseDrawer = ()=>{};
allLinks.forEach(a=>{
  a.addEventListener('click', (e)=>{
    const href = a.getAttribute('href');
    if(href && href.startsWith('#')){
      e.preventDefault();
      smoothScrollTo(href);
      setActive(href);
      const cleanUrl = (href === '#pocetna') ? (location.pathname + location.search) : href;
      history.pushState(null, '', cleanUrl);
      realCloseDrawer();
    }
  });
});

/* Drawer */
const burger = document.querySelector('.burger');
const drawer = document.getElementById('drawer');
const overlay = document.getElementById('drawerOverlay');
const drawerClose = document.getElementById('drawerClose');

function openDrawer(){
  drawer.classList.add('open');
  overlay.classList.add('show');
  drawer.setAttribute('aria-hidden','false');
  burger.setAttribute('aria-expanded','true');
  document.body.style.overflow='hidden';
}
realCloseDrawer = function(){
  drawer.classList.remove('open');
  overlay.classList.remove('show');
  drawer.setAttribute('aria-hidden','true');
  burger.setAttribute('aria-expanded','false');
  document.body.style.overflow='';
};
burger?.addEventListener('click', openDrawer);
drawerClose?.addEventListener('click', realCloseDrawer);
overlay?.addEventListener('click', realCloseDrawer);
window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') realCloseDrawer(); });

/* Auto-hide header (slower show) */
let hideTimer = null;
function onScroll(){
  if (drawer && drawer.classList.contains('open')) return;
  const y = window.scrollY;
  if (y > 10){ headerEl.classList.add('hide'); }
  else { headerEl.classList.remove('hide'); }
  if (hideTimer) clearTimeout(hideTimer);
  hideTimer = setTimeout(()=>{ headerEl.classList.remove('hide'); }, 380);
}
window.addEventListener('scroll', onScroll, {passive:true});

const programSelect = document.getElementById('programSelect');
const trenerField   = document.getElementById('trenerField');
const trenerSelect  = document.getElementById('trenerSelect');
const selectedTrainer = document.getElementById('selectedTrainer');
const trainerEmail = document.getElementById('trainerEmail');
const messageType = document.getElementById('messageType');
const hideTrainerFor = new Set([
  'Opƒái upit/pitanje','General question'
]);

// Email aliases for trainers
const trainerEmails = {
  'Ivan': 'kivan92@gmail.com',
  'Tina': 'tinna.maras@gmail.com',
  'Toni': 'info+toni@goodlife.hr', // Dodajte Toni email kada ga imate
  'Davor': 'davorcolic60@gmail.com'
};

function ensureTrainersFilled(){
  if (!trenerSelect) return;
  if (trenerSelect.options.length === 0){
    ['Ivan','Tina','Toni','Davor'].forEach(name=>{
      const opt=document.createElement('option'); opt.value=name; opt.textContent=name; trenerSelect.appendChild(opt);
    });
  }
}

function updateTrainerVisibility(){
  const val = programSelect?.value || '';
  
  // Sakrij SAMO za opƒáe upite
  if (hideTrainerFor.has(val)) {
    trenerField.classList.add('hidden');
    trenerSelect.removeAttribute('required');
    selectedTrainer.value = '';
    trainerEmail.value = '';
    messageType.value = 'general_inquiry'; // Oznaƒçava da je opƒái upit
    
    // ƒåekaj da se animacija zavr≈°i prije ƒçi≈°ƒáenja
    setTimeout(() => {
      if (trenerField.classList.contains('hidden')) {
        trenerSelect.innerHTML = '';
      }
    }, 800);
    return;
  }
  
  // Prika≈æi za SVE ostale programe s identiƒçnom fade animacijom
  trenerField.classList.remove('hidden');
  ensureTrainersFilled();
  trenerSelect.setAttribute('required','required');
  messageType.value = 'trainer_booking'; // Oznaƒçava da je rezervacija trenera
}

// Form submission logic with trainer-specific emails
const rezForm = document.getElementById('rez-form');
const defaultEndpoint = 'https://formspree.io/f/xqadnqjp'; // Glavni endpoint za opƒáe upite
const trainerEndpoint = 'https://formspree.io/f/xqadnqjp'; // Trenutno isti, mo≈æete kreirati odvojeni za trenere

function updateFormAction() {
  const selectedTrainerName = selectedTrainer.value;
  const programValue = programSelect?.value || '';
  
  // Za opƒáe upite - ≈°alji na glavni slu≈æbeni email
  if (hideTrainerFor.has(programValue)) {
    rezForm.action = defaultEndpoint;
    return;
  }
  
  // Za programe s trenerom - ≈°alji na trenerov email
  if (selectedTrainerName && trainerEmails[selectedTrainerName]) {
    rezForm.action = trainerEndpoint; // Mo≈æete kreirati odvojeni endpoint za trenere
  } else {
    rezForm.action = defaultEndpoint;
  }
}

// Update hidden fields when trainer is selected
trenerSelect?.addEventListener('change', (e) => {
  const trainerName = e.target.value;
  selectedTrainer.value = trainerName;
  
  // Set trainer email
  if (trainerName && trainerEmails[trainerName]) {
    trainerEmail.value = trainerEmails[trainerName];
  } else {
    trainerEmail.value = '';
  }
  
  updateFormAction();
});

// Update form action when program changes
programSelect?.addEventListener('change', () => {
  updateFormAction();
});

if (programSelect){
  updateTrainerVisibility();
  programSelect.addEventListener('change', updateTrainerVisibility);
  updateFormAction(); // Initialize form action
}

/* ===== CAROUSEL LOGIC (jedan viewport) ===== */
function initTransformSlider(){
  const track = document.getElementById('xSlider');
  const viewport = document.getElementById('xViewport');
  const btnPrev = document.getElementById('xPrev');
  const btnNext = document.getElementById('xNext');
  const btnPrevAbs = document.getElementById('xPrevAbs');
  const btnNextAbs = document.getElementById('xNextAbs');
  const hint = document.getElementById('swipeHint');
  if(!track || !viewport) return;

  const total = track.children.length;
  let index = 0;

  const hideHint = ()=> hint?.classList.add('hidden');
  // auto-hide nakon 4.5s ako nema interakcije
  setTimeout(hideHint, 4500);

  function goTo(i){
  index = (i + total) % total;
  track.style.transform = `translateX(${-index*100}%)`;

  // Hint logika
  if (index === 0) {
    hint?.classList.remove('hidden','hint-fadeout');
  } else {
    if (!hint.classList.contains('hint-fadeout')) {
      hint.classList.add('hint-fadeout');
      setTimeout(()=> hint.classList.add('hidden'), 600); // sakrij nakon fade-a
    }
  }
}




  const next = ()=> goTo(index+1);
  const prev = ()=> goTo(index-1);

  // Gumbi
  [btnNext,btnPrev,btnNextAbs,btnPrevAbs].forEach(b=>{
    b?.addEventListener('click', ()=>{ hideHint(); });
  });
  btnNext?.addEventListener('click', next);
  btnPrev?.addEventListener('click', prev);
  btnNextAbs?.addEventListener('click', next);
  btnPrevAbs?.addEventListener('click', prev);

  // Touch swipe (bez vertikalnog skrola dok swipe-a≈°)
  let tStartX=0, tDelta=0, touching=false, moved=false;
  viewport.addEventListener('touchstart', (e)=>{
    if(!e.touches[0]) return;
    touching=true; moved=false; tDelta=0;
    tStartX = e.touches[0].clientX;
    track.style.transition='none';
  }, {passive:true});
  viewport.addEventListener('touchmove', (e)=>{
    if(!touching || !e.touches[0]) return;
    tDelta = e.touches[0].clientX - tStartX;
    if (Math.abs(tDelta)>5 && !moved){ moved=true; hideHint(); }
    // sprijeƒçi scroll stranice dok vuƒçe≈°
    e.preventDefault();
    const pct = (-index*100) + (tDelta / viewport.clientWidth)*100;
    track.style.transform = `translateX(${pct}%)`;
  }, {passive:false});
  viewport.addEventListener('touchend', ()=>{
    track.style.transition='';
    if (moved && Math.abs(tDelta) > viewport.clientWidth*0.15){
      (tDelta<0) ? next() : prev();
    } else {
      goTo(index);
    }
    touching=false; moved=false; tDelta=0;
  });

  // Mouse drag (sprijeƒçi selekciju/slike)
  let drag=false, mStart=0, mDelta=0;
  viewport.addEventListener('mousedown', (e)=>{
    drag=true; mStart=e.clientX; mDelta=0; track.style.transition='none'; hideHint(); e.preventDefault();
  });
  window.addEventListener('mousemove', (e)=>{
    if(!drag) return;
    mDelta = e.clientX - mStart;
    const pct = (-index*100) + (mDelta / viewport.clientWidth)*100;
    track.style.transform = `translateX(${pct}%)`;
  });
  window.addEventListener('mouseup', ()=>{
    if(!drag) return;
    track.style.transition='';
    if (Math.abs(mDelta) > viewport.clientWidth*0.15){
      (mDelta<0) ? next() : prev();
    } else {
      goTo(index);
    }
    drag=false; mDelta=0;
  });

  // Keyboard
  viewport.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowRight') next();
    else if(e.key==='ArrowLeft') prev();
  });

  goTo(0);
}

/* ===== TESTIMONIALS FUNCTIONALITY ===== */
const testimonialsGrid = document.getElementById('testimonialsGrid');
const testimonialModal = document.getElementById('testimonialModal');
const addTestimonialBtn = document.getElementById('addTestimonialBtn');
const closeTestimonialModal = document.getElementById('closeTestimonialModal');
const testimonialForm = document.getElementById('testimonialForm');
const testimonialText = document.getElementById('testimonialText');
const charCounter = document.getElementById('charCounter');

// Default testimonials with timestamps
const defaultTestimonials = [
  { name: "Ana", text: "Za 3 mjeseca -10 kg i osjeƒáam se bolje nego ikad.", timestamp: Date.now() - 86400000 * 5 }, // 5 days ago
  { name: "Luka", text: "Podigao sam bench za 20 kg.", timestamp: Date.now() - 86400000 * 3 }, // 3 days ago
  { name: "Petra", text: "Najbolja atmosfera i oprema.", timestamp: Date.now() - 86400000 * 1 } // 1 day ago
];

// Load testimonials from localStorage or use defaults
function loadTestimonials() {
  const saved = localStorage.getItem('gl_testimonials');
  const testimonials = saved ? JSON.parse(saved) : defaultTestimonials;
  renderTestimonials(testimonials);
  return testimonials;
}

// Save testimonials to localStorage
function saveTestimonials(testimonials) {
  localStorage.setItem('gl_testimonials', JSON.stringify(testimonials));
}

// Format timestamp to relative time
function formatTimestamp(timestamp) {
  const now = Date.now();
  const diff = now - timestamp;
  const days = Math.floor(diff / 86400000);
  const hours = Math.floor(diff / 3600000);
  const minutes = Math.floor(diff / 60000);
  
  const currentLang = localStorage.getItem('gl_lang') || 'hr';
  
  if (currentLang === 'en') {
    // English translations
    if (days > 0) return `added ${days} ${days === 1 ? 'day' : 'days'} ago`;
    if (hours > 0) return `added ${hours} ${hours === 1 ? 'hour' : 'hours'} ago`;
    if (minutes > 0) return `added ${minutes} ${minutes === 1 ? 'minute' : 'minutes'} ago`;
    return 'just now';
  } else {
    // Croatian translations
    if (days > 0) return `prije ${days} ${days === 1 ? 'dan' : 'dana'}`;
    if (hours > 0) return `prije ${hours} ${hours === 1 ? 'sat' : 'sati'}`;
    if (minutes > 0) return `prije ${minutes} ${minutes === 1 ? 'minuta' : 'minuta'}`;
    return 'upravo sada';
  }
}

// Render testimonials in grid
function renderTestimonials(testimonials) {
  if (!testimonialsGrid) return;
  
  testimonialsGrid.innerHTML = '';
  testimonials.forEach((testimonial, index) => {
    const card = document.createElement('div');
    card.className = 'card quote testimonial-card';
    card.style.animationDelay = `${index * 0.1}s`; // Stagger animation
    
    // Check if text is long (more than 70 characters)
    const isLongText = testimonial.text.length > 70;
    const displayText = isLongText ? testimonial.text.substring(0, 70) + '...' : testimonial.text;
    
    const currentLang = localStorage.getItem('gl_lang') || 'hr';
    const readMoreText = currentLang === 'en' ? 'Read more' : 'Uƒçitaj vi≈°e';
    
    card.innerHTML = `
      <div class="quote">
        <p ${isLongText ? 'class="long-text" data-full-text="' + testimonial.text + '"' : ''}>"${displayText}"</p>
        ${isLongText ? '<button class="read-more-btn" onclick="toggleReadMore(this)" data-i18n="testimonials.readMore">' + readMoreText + '</button>' : ''}
      </div>
      <div class="testimonial-author">‚Äî ${testimonial.name} (${formatTimestamp(testimonial.timestamp)})</div>
    `;
    testimonialsGrid.appendChild(card);
  });
}

// Toggle read more functionality
function toggleReadMore(button) {
  const card = button.closest('.testimonial-card');
  const textElement = card.querySelector('p.long-text');
  const currentLang = localStorage.getItem('gl_lang') || 'hr';
  
  // Get the original testimonial text from the data attribute
  const originalText = textElement.dataset.fullText;
  
  if (textElement.classList.contains('expanded')) {
    // Collapse - show only first 70 characters
    const shortText = originalText.substring(0, 70) + '...';
    textElement.textContent = `"${shortText}"`;
    textElement.classList.remove('expanded');
    button.setAttribute('data-i18n', 'testimonials.readMore');
    button.textContent = currentLang === 'en' ? 'Read more' : 'Uƒçitaj vi≈°e';
  } else {
    // Expand - show full text
    textElement.textContent = `"${originalText}"`;
    textElement.classList.add('expanded');
    button.setAttribute('data-i18n', 'testimonials.readLess');
    button.textContent = currentLang === 'en' ? 'Show less' : 'Prika≈æi manje';
  }
}

// Show toast notification
function showToast(message, isError = false) {
  const toast = document.createElement('div');
  toast.className = `toast ${isError ? 'error' : ''}`;
  toast.textContent = message;
  document.body.appendChild(toast);
  
  // Show toast with fade-in
  setTimeout(() => toast.classList.add('show'), 50);
  
  // Hide toast after 3 seconds with fade-out
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => {
      if (document.body.contains(toast)) {
        document.body.removeChild(toast);
      }
    }, 400); // Longer fade-out for smoother effect
  }, 3000);
}

// Validate testimonial text
function validateTestimonial(text) {
  const trimmed = text.trim();
  if (trimmed.length < 10) {
    showToast(getI18nText('testimonials.toast.short'), true);
    return false;
  }
  if (trimmed.length > 150) {
    showToast(getI18nText('testimonials.toast.long'), true);
    return false;
  }
  return true;
}

// Get i18n text
function getI18nText(key) {
  const lang = localStorage.getItem('gl_lang') || 'hr';
  const dict = I18N[lang] || I18N.hr;
  return dict[key] || key;
}

// Add new testimonial
function addTestimonial(name, text) {
  if (!validateTestimonial(text)) return false;
  
  const testimonials = loadTestimonials();
  const newTestimonial = { 
    name: name.trim(), 
    text: text.trim(),
    timestamp: Date.now()
  };
  
  // Add to beginning of array (newest first)
  testimonials.unshift(newTestimonial);
  
  // Keep only 3 testimonials (remove the oldest)
  if (testimonials.length > 3) {
    testimonials.splice(3);
  }
  
  saveTestimonials(testimonials);
  renderTestimonials(testimonials);
  showToast(getI18nText('testimonials.toast.success'));
  return true;
}

// Modal functions
function openTestimonialModal() {
  // Store current scroll position
  const currentScrollY = window.scrollY;
  
  testimonialModal?.classList.add('show');
  testimonialModal?.setAttribute('aria-hidden','false');
  document.body.style.top = `-${currentScrollY}px`;
  document.body.classList.add('modal-open');
}

function closeTestimonialModalFunc() {
  testimonialModal?.classList.remove('show');
  testimonialModal?.setAttribute('aria-hidden','true');
  
  // Get the scroll position before opening modal
  const scrollY = parseInt((document.body.style.top || '0').replace('-',''),10) || 0;
  
  document.body.classList.remove('modal-open');
  document.body.style.top = '';
  
  // Restore scroll position
  window.scrollTo(0, scrollY);
  
  // Reset form
  testimonialForm?.reset();
}

// Event listeners
addTestimonialBtn?.addEventListener('click', openTestimonialModal);
closeTestimonialModal?.addEventListener('click', closeTestimonialModalFunc);

// Close modal on overlay click
testimonialModal?.addEventListener('click', (e) => {
  if (e.target === testimonialModal) {
    closeTestimonialModalFunc();
  }
});

// Close modal on Escape key
window.addEventListener('keydown', (e) => {
  if (e.key === 'Escape' && testimonialModal?.classList.contains('show')) {
    closeTestimonialModalFunc();
  }
});

// Character counter functionality
testimonialText?.addEventListener('input', (e) => {
  const length = e.target.value.length;
  charCounter.textContent = `${length}/150`;
  
  // Change color based on length
  charCounter.className = 'char-counter';
  if (length > 130) charCounter.classList.add('warning');
  if (length >= 150) charCounter.classList.add('error');
});

// Handle form submission
testimonialForm?.addEventListener('submit', (e) => {
  e.preventDefault();
  
  const name = document.getElementById('testimonialName')?.value?.trim();
  const text = document.getElementById('testimonialText')?.value?.trim();
  
  // Custom validation with translated messages
  if (!name) {
    const currentLang = localStorage.getItem('gl_lang') || 'hr';
    const message = currentLang === 'en' ? 'Please fill out the name field.' : 'Molimo popunite polje za ime i prezime.';
    showToast(message, true);
    return;
  }
  
  if (!text) {
    const currentLang = localStorage.getItem('gl_lang') || 'hr';
    const message = currentLang === 'en' ? 'Please fill out the experience field.' : 'Molimo popunite polje za iskustvo.';
    showToast(message, true);
    return;
  }
  
  const success = addTestimonial(name, text);
  if (success) {
    closeTestimonialModalFunc();
  }
});

// Initialize testimonials on page load
window.addEventListener('load', () => {
  loadTestimonials();
});

// Package selection functionality
const packageBtns = document.querySelectorAll('.package-btn');

// Pricing selection functionality
const pricingBtns = document.querySelectorAll('.pricing-btn');

// Package to program mapping
const packageToProgram = {
  'Basic': 'packages.basic.name',
  'Standard': 'packages.standard.name', 
  'Premium': 'packages.premium.name'
};

// Handle package button clicks
packageBtns.forEach(btn => {
  btn.addEventListener('click', (e) => {
    e.preventDefault();
    
    const packageName = btn.dataset.package;
    const programKey = packageToProgram[packageName];
    
    // Set the program in dropdown
    if (programSelect && programKey) {
      // Remove all existing package and pricing options first
      const packageKeys = Object.values(packageToProgram);
      const pricingValues = ['Grupni treninzi', 'Osobni trening', 'Online plan'];
      const allDynamicValues = [...packageKeys, ...pricingValues];
      
      for (let i = programSelect.options.length - 1; i >= 0; i--) {
        const option = programSelect.options[i];
        if (allDynamicValues.includes(option.value)) {
          programSelect.removeChild(option);
        }
      }
      
      // Get translated text
      const currentLang = localStorage.getItem('gl_lang') || 'hr';
      const translatedText = I18N[currentLang][programKey] || I18N.hr[programKey];
      
      // Add the new package option
      const newOption = document.createElement('option');
      newOption.value = programKey;
      newOption.textContent = translatedText;
      programSelect.appendChild(newOption);
      
      // Set the value
      programSelect.value = programKey;
      
      // Trigger change event to update trainer visibility
      const changeEvent = new Event('change', { bubbles: true });
      programSelect.dispatchEvent(changeEvent);
    }
    
    // Scroll to contact form
    smoothScrollTo('#kontakt');
  });
});

// Handle pricing button clicks
pricingBtns.forEach(btn => {
  btn.addEventListener('click', (e) => {
    e.preventDefault();
    
    const programValue = btn.dataset.program;
    
    // Set the program in dropdown
    if (programSelect && programValue) {
      // Remove all existing package and pricing options first
      const packageValues = Object.values(packageToProgram);
      const pricingValues = ['Grupni treninzi', 'Osobni trening', 'Online plan'];
      const allDynamicValues = [...packageValues, ...pricingValues];
      
      for (let i = programSelect.options.length - 1; i >= 0; i--) {
        const option = programSelect.options[i];
        if (allDynamicValues.includes(option.value)) {
          programSelect.removeChild(option);
        }
      }
      
      // Map pricing values to i18n keys
      const pricingToI18n = {
        'Grupni treninzi': 'form.program.opt.group',
        'Osobni trening': 'form.program.opt.pt',
        'Online plan': 'form.program.opt.online'
      };
      
      // Get translated text based on current language
      const currentLang = localStorage.getItem('gl_lang') || 'hr';
      const i18nKey = pricingToI18n[programValue];
      const translatedText = i18nKey ? (I18N[currentLang][i18nKey] || I18N.hr[i18nKey]) : programValue;
      
      // Add the new pricing option
      const newOption = document.createElement('option');
      newOption.value = programValue;
      newOption.textContent = translatedText;
      programSelect.appendChild(newOption);
      
      // Set the value
      programSelect.value = programValue;
      
      // Trigger change event to update trainer visibility
      const changeEvent = new Event('change', { bubbles: true });
      programSelect.dispatchEvent(changeEvent);
    }
    
    // Scroll to contact form
    smoothScrollTo('#kontakt');
  });
});

/* ===== AUTO CAPITALIZE INPUTS ===== */
const imeInput = document.getElementById('imeInput');
const testimonialNameInput = document.getElementById('testimonialName');
const porukaTextarea = document.getElementById('porukaTextarea');

function capitalizeWords(text) {
  return text.replace(/\b\w/g, function(char) {
    return char.toUpperCase();
  });
}

function capitalizeFirstLetter(text) {
  if (!text) return text;
  return text.charAt(0).toUpperCase() + text.slice(1);
}

function handleTextInput(input, useFirstLetterOnly = false) {
  if (!input) return;
  
  function capitalizeText(e) {
    const cursorPosition = e.target.selectionStart;
    const originalValue = e.target.value;
    const capitalizedValue = useFirstLetterOnly ? 
      capitalizeFirstLetter(originalValue) : 
      capitalizeWords(originalValue);
    
    // Only update if the value actually changed (to avoid cursor jumping)
    if (originalValue !== capitalizedValue) {
      e.target.value = capitalizedValue;
      
      // Restore cursor position
      const lengthDiff = capitalizedValue.length - originalValue.length;
      setTimeout(() => {
        e.target.setSelectionRange(cursorPosition + lengthDiff, cursorPosition + lengthDiff);
      }, 0);
    }
  }
  
  // Multiple event listeners for better mobile support
  input.addEventListener('input', capitalizeText);
  input.addEventListener('keyup', capitalizeText);
  input.addEventListener('blur', capitalizeText);
  input.addEventListener('change', capitalizeText);
}

// Apply to all text inputs and textareas
handleTextInput(imeInput); // Ime i prezime - svaka rijeƒç velika
handleTextInput(testimonialNameInput); // Ime i prezime - svaka rijeƒç velika
handleTextInput(porukaTextarea, true); // Poruka - samo prvo slovo veliko
handleTextInput(testimonialText, true); // Iskustvo - samo prvo slovo veliko

/* ===== EMAIL VALIDATION MESSAGES ===== */
const emailInput = document.getElementById('emailInput');

function updateEmailValidationMessage() {
  if (!emailInput) return;
  
  const currentLang = localStorage.getItem('gl_lang') || 'hr';
  
  if (currentLang === 'en') {
    emailInput.title = 'Please enter a valid email address';
    emailInput.setCustomValidity('');
    emailInput.oninvalid = function() {
      this.setCustomValidity('Please include an @ in the email address');
    };
  } else {
    emailInput.title = 'Molimo unesite valjanu email adresu';
    emailInput.setCustomValidity('');
    emailInput.oninvalid = function() {
      this.setCustomValidity('Molimo unesite valjanu email adresu s @ znakom');
    };
  }
  
  emailInput.oninput = function() {
    this.setCustomValidity('');
  };
}

// Initialize email validation message
updateEmailValidationMessage();

// Update email validation message when language changes
const originalApplyI18n = applyI18n;
applyI18n = function(lang) {
  originalApplyI18n(lang);
  updateEmailValidationMessage();
};

/* Final safety */
applyI18n(localStorage.getItem('gl_lang') || 'hr');
</script>
</body>
</html>
