<!DOCTYPE html>
<html lang="hr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>GOODLIFE â€” POSUÅ JE</title>
  <meta name="description" content="GoodLife i osobni treninzi. Programi snage, mrÅ¡avljenja i kondicije. Rezerviraj svoj termin danas!" />
  <style>
    :root{
      --bg:#0f0f12; --card:#16161a; --muted:#9aa0a6; --text:#f4f5f6;
      --brand:#ff7a00; --brand-2:#ffab66; --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --maxw:1200px; --headerH:70px;
      --fade:.65s;
    }

    /* Global fade */
    body{ opacity:0; transition: opacity var(--fade) ease; }
    body.fade-in{ opacity:1; }
    body.leaving{ opacity:0; transition: opacity var(--fade) ease; }

    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6}
    html{scroll-behavior:smooth}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:0 20px}
    .muted{color:var(--muted)}
    .hidden{display:none}

    /* Kad je modal otvoren: zakljuÄa body (nema skrola / â€œshakeâ€ na mobu) */
    .modal-open{ position:fixed; left:0; right:0; overflow:hidden; width:100%; }

    /* Header */
    header{
      position:sticky;top:0;z-index:200;
      background:rgba(15,15,18,.75);backdrop-filter:blur(8px);
      border-bottom:1px solid rgba(255,255,255,.06);
      transition: transform .55s ease-in-out, background .2s ease;
    }
    header.hide{ transform: translateY(-100%); }

    .nav{position:relative;display:flex;align-items:center;justify-content:space-between;padding:14px 0;}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.6px;cursor:pointer}
    .menu{position:absolute;left:50%;transform:translateX(-50%);display:flex;gap:18px;}
    .menu a{opacity:.9;position:relative;transition:color .5s ease}
    .menu a:hover{color:var(--brand)}
    .menu a.active{color:var(--brand)}
    .menu a.active::after{content:"";position:absolute;left:0;right:0;bottom:-6px;height:2px;background:var(--brand);}

    /* Lang switch (flags) */
    .lang-switch{display:flex;align-items:center;gap:8px;}
    .flag-mini{
      width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;
      border:1px solid rgba(255,255,255,.18); border-radius:8px; padding:6px; background:#121216;
      transition:transform .12s ease, border-color .2s ease; user-select:none; cursor:pointer;
    }
    .flag-mini:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.28)}
    .flag-mini.active{border-color:var(--brand)}
    .flag-mini img{height:25px;width:25px;object-fit:cover;border-radius:4px}

    /* Burger */
    .burger{display:none;align-items:center;justify-content:center;width:44px;height:44px;border:1px solid rgba(255,255,255,.12);border-radius:10px;cursor:pointer;background:#121216;margin-left:8px;}
    .burger span, .burger span::before, .burger span::after{content:"";display:block;height:2px;background:#fff;border-radius:1px;width:20px;position:relative}
    .burger span::before{position:absolute;top:-6px;width:20px}
    .burger span::after{position:absolute;top:6px;width:20px}

    /* Drawer */
    .mobile-drawer{position:fixed;inset:0 0 0 auto;width:min(86vw,360px);background:rgba(15,15,18,.98);transform:translateX(100%);transition:transform .4s ease, opacity .4s ease;z-index:300;display:flex;flex-direction:column;border-left:1px solid rgba(255,255,255,.08); opacity:0}
    .mobile-drawer.open{transform:none; opacity:1}
    .mobile-drawer .top{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
    .mobile-drawer nav{display:flex;flex-direction:column;padding:10px}
    .mobile-drawer a{padding:14px 12px;border-radius:10px;transition:background .5s ease;}
    .mobile-drawer a:hover{background:#1a1a1f}
    .drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:250}
    .drawer-overlay.show{opacity:1;pointer-events:auto}

    /* Hero */
    .hero{position:relative;min-height:82vh;display:grid;place-items:center;overflow:hidden}
    .hero::before{content:"";position:absolute;inset:0;background:url('images/goodlife1.jpeg') center/cover no-repeat;filter:brightness(.45);}
    .hero .inner{position:relative;z-index:1;display:grid;gap:18px;text-align:center;padding:40px 0}
    h1{font-size:clamp(28px,6vw,64px);line-height:1.1;margin:6px 0 0}
    .lead{color:var(--muted);max-width:760px;margin:0 auto}
    .actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:10px}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;gap:10px;font-weight:700;border-radius:12px;padding:14px 18px;border:1px solid rgba(255,255,255,.12);transition:background .7s ease, color .7s ease, transform .7s ease;}
    .btn.primary{background:var(--brand);border-color:transparent}
    .btn.primary:hover{background:var(--brand-2)}
    .btn:active{transform:scale(.98)}

    /* Sections fade-in */
    section{padding:72px 0;border-top:1px solid rgba(255,255,255,.06);opacity:0;transform:translateY(8px);transition:opacity 1.2s ease, transform 1.2s ease;}
    section.show{opacity:1;transform:none;}

    .k-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow)}
    .program{display:grid;grid-template-columns:1fr 1.2fr;gap:28px;align-items:center}
    .program .img{border-radius:var(--radius);overflow:hidden;border:1px solid rgba(255,255,255,.08)}
    .coaches{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
    .coach{overflow:hidden;padding:0}
    .coach img{aspect-ratio:4/5;object-fit:cover}
    .coach .info{padding:16px}
    table{width:100%;border-collapse:collapse;border:1px solid rgba(255,255,255,.08);overflow:hidden;border-radius:var(--radius)}
    th,td{padding:14px;border-bottom:1px solid rgba(255,255,255,.06);text-align:left}
    th{background:#19191e}
    .pricing{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .price{padding:28px}
    .price .tag{font-size:38px;font-weight:900}
    .quote{display:grid;gap:10px}
    .contact{display:grid;grid-template-columns:1.1fr 1fr;gap:28px}
    .field{display:grid;gap:6px}
    .input, select, textarea{background:#121216;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:12px;color:var(--text);font-size:16px;}
    textarea{min-height:120px}
    .small{font-size:12px;color:var(--muted)}
    .status{margin-top:8px;font-size:14px}
    footer{padding:28px 0;color:var(--muted)}
    footer .row{display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap}

    .table-scroll{overflow:auto;-webkit-overflow-scrolling:touch}
    .contact-line{display:inline-flex;align-items:center;gap:6px;white-space:nowrap}

    /* Language modal */
    .lang-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;background:rgba(0,0,0,.6);backdrop-filter:blur(4px);z-index:1000;opacity:0;pointer-events:none;transition:opacity .25s ease;}
    .lang-overlay.show{opacity:1;pointer-events:auto;}
    .lang-card{width:min(92vw,520px);background:#141418;border:1px solid rgba(255,255,255,.08);border-radius:20px;padding:24px;box-shadow:var(--shadow);text-align:center;transform:translateY(10px);transition:transform .25s ease;}
    .lang-overlay.show .lang-card{transform:none;}
    .flag-grid{display:grid;grid-template-columns:1fr 1fr;gap:12px;margin-top:14px}
    .flag-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:8px;border:1px solid rgba(255,255,255,.12);border-radius:14px;padding:18px;cursor:pointer;background:#191a1f;transition:transform .15s ease, border-color .2s ease;user-select:none;}
    .flag-btn:hover{transform:translateY(-2px);border-color:rgba(255,255,255,.22)}
    .flag-btn img{width:48px;height:48px;border-radius:50%;object-fit:cover}
    .flag-btn div:last-child{font-size:14px;color:var(--muted);font-weight:500}
    .lang-note{color:var(--muted);font-size:13px;margin-top:8px}

    @media (max-width:1024px){
      .k-grid{grid-template-columns:1fr 1fr}
      .program{grid-template-columns:1fr}
      .coaches{grid-template-columns:1fr 1fr}
      .pricing{grid-template-columns:1fr}
      .contact{grid-template-columns:1fr}
    }
    @media (max-width:720px){
      .menu{display:none;position:static;transform:none;}
      .burger{display:inline-flex}
      .k-grid{grid-template-columns:1fr}
    }

    /* ====== CAROUSEL (jedan prozor) ====== */
    #transformacije .grid-top{display:flex;align-items:baseline;justify-content:space-between;gap:12px;margin-bottom:14px}
    #transformacije h2{margin:0}

    .x-viewport{
      position:relative; overflow:hidden;
      border-radius:var(--radius);
      border:1px solid rgba(255,255,255,.06);
      box-shadow:var(--shadow);
      background:var(--card);
      aspect-ratio: 16/9;
      /* sprijeÄi skrolanje stranice dok swipe-aÅ¡ */
      touch-action: none;
      -webkit-user-select:none; user-select:none;
    }
    .x-track{ display:flex; width:100%; height:100%; transform:translateX(0%); transition: transform .45s ease; will-change: transform; }
    .x-item{ min-width:100%; height:100%; }
    .x-item img{ width:100%; height:100%; object-fit:cover; display:block; }

    .x-nav{display:none}
    @media(min-width:1024px){ .x-nav{display:flex; gap:10px; align-items:center} }

    .x-btn{
      display:inline-flex;align-items:center;justify-content:center;
      width:42px;height:42px;border-radius:999px;border:1px solid rgba(255,255,255,.12);
      background:#121216;cursor:pointer;transition:background .2s ease, border-color .2s ease, opacity .2s ease;
    }
    /* hover bez "skakanja" */
    .x-btn:hover{border-color:rgba(255,255,255,.22);background:#17171c;opacity:.95}
    .x-btn:active{opacity:.9}
    .x-btn svg{width:18px;height:18px}

    .x-abs{position:absolute;top:50%;transform:translateY(-50%);z-index:5;opacity:.92}
    .x-left{left:10px}
    .x-right{right:10px}

    /* HINT â€” samo na mobitelu */
    /* HINT â€” samo na mobitelu */
.swipe-hint{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  display:none;                /* desktop: skriven */
  align-items:center; gap:8px; padding:8px 12px;
  font-size:14px; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.6);
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.12); border-radius:999px;
  user-select:none; pointer-events:none;
  animation:pulse 1.2s ease-in-out infinite, floaty 2.6s ease-in-out infinite;
  opacity:1; transition:opacity .35s ease;      /* za fade-out */
  z-index: 6;                                    /* iznad strelica (koje su z-index:5) */
}
@media (max-width: 720px){
  .swipe-hint{ display:flex; }                   /* mobitel: prikaÅ¾i */
}
/* blagi fade-out kad se gasi */
.swipe-hint.fade-out{ opacity:0; }

@keyframes pulse{ 0%{opacity:.55} 50%{opacity:1} 100%{opacity:.55} }
@keyframes floaty{ 0%{transform:translate(-50%,-50%) translateY(0)}
                   50%{transform:translate(-50%,-50%) translateY(-3px)}
                   100%{transform:translate(-50%,-50%) translateY(0)} }
  
.hint-fadeout {
  animation: hintFadeOut 2s ease forwards;
}

@keyframes hintFadeOut {
  from { opacity:1; }
  to { opacity:0; visibility:hidden; }
}


  </style>
</head>
<body>
  <!-- MODAL: language picker -->
  <div id="langModal" class="lang-overlay" aria-hidden="true">
    <div class="lang-card">
      <h3>Odaberi jezik / Choose language</h3>
      <div class="flag-grid">
        <button class="flag-btn" data-lang="hr" aria-label="Hrvatski">
          <img src="images/hrv.png" alt="Hrvatski"><div>Hrvatski</div>
        </button>
        <button class="flag-btn" data-lang="en" aria-label="English">
          <img src="images/uk.png" alt="English"><div>English</div>
        </button>
      </div>
      <div class="lang-note">
        Kasnije moÅ¾eÅ¡ promijeniti preko zastavica u zaglavlju.<br>
        You can change it later via the flags in the header.
      </div>
    </div>
  </div>

  <header id="siteHeader">
    <div class="wrap nav">
      <div class="brand" id="logoBtn" title="PoÄetna">
        <img src="images/goodlifelogo.png" alt="Good Life logo" style="height:85px;" />
      </div>

      <nav class="menu">
        <a href="#pocetna" class="nav-link" data-i18n="nav.home">PoÄetna</a>
        <a href="#onama" class="nav-link" data-i18n="nav.about">O nama</a>
        <a href="#paketi" class="nav-link" data-i18n="nav.packages">Paketi</a>
        <a href="#clanarine" class="nav-link" data-i18n="nav.memberships">ÄŒlanarine</a>
        <a href="#kontakt" class="nav-link" data-i18n="nav.contact">Kontakt</a>
      </nav>

      <div style="display:flex;align-items:center;gap:8px">
        <div class="lang-switch">
          <button class="flag-mini" id="langHR" title="Hrvatski"><img src="images/hrv.png" alt="Hrvatski"></button>
          <button class="flag-mini" id="langEN" title="English"><img src="images/uk.png" alt="English"></button>
        </div>
        <button class="burger" aria-label="Izbornik" aria-expanded="false"><span></span></button>
      </div>
    </div>
  </header>

  <!-- Drawer + overlay -->
  <div class="drawer-overlay" id="drawerOverlay"></div>
  <aside class="mobile-drawer" id="drawer" aria-hidden="true">
    <div class="top">
      <strong data-i18n="menu.title">Izbornik</strong>
      <button id="drawerClose" class="btn" style="padding:8px 12px;background:var(--brand);border:0;border-radius:10px" data-i18n="menu.close">Zatvori</button>
    </div>
    <nav>
      <a href="#pocetna" class="nav-link mlink" data-i18n="nav.home">PoÄetna</a>
      <a href="#onama" class="nav-link mlink" data-i18n="nav.about">O nama</a>
      <a href="#paketi" class="nav-link mlink" data-i18n="nav.packages">Paketi</a>
      <a href="#clanarine" class="nav-link mlink" data-i18n="nav.memberships">ÄŒlanarine</a>
      <a href="#kontakt" class="nav-link mlink" data-i18n="nav.contact">Kontakt</a>
    </nav>
  </aside>

  <section class="hero show" id="pocetna">
    <div class="inner wrap">
      <h1 style="margin-top:20px;" data-i18n="hero.title">Ostvari svoj potencijal, Å¾ivi Good Life!</h1>
      <p class="lead" data-i18n="hero.lead">Postigni svoje fitness ciljeve uz vrhunske trenere i moderan program treninga.</p>
      <div class="actions">
        <a class="btn primary nav-link" href="#paketi" data-i18n="hero.btn.packages">Pogledaj pakete</a>
        <a class="btn nav-link" href="#kontakt" data-i18n="hero.btn.contact">Kontaktiraj nas</a>
      </div>
    </div>
  </section>

  <section id="onama">
    <div class="wrap">
      <h2 data-i18n="about.title">O nama</h2>
      <p class="muted" data-i18n="about.text">GoodLife Fitness centar u PosuÅ¡ju nije samo obiÄna teretana â€” to je mjesto gdje zajednica ljudi s istim ciljem radi zajedno na zdravlju i napretku. NaÅ¡i treneri kreiraju individualne programe prilagoÄ‘ene tvom cilju: gubitku kilograma, poveÄ‡anju miÅ¡iÄ‡ne mase, jaÄanju kondicije ili rehabilitaciji nakon ozljeda. Nudimo struÄne savjete o prehrani, redovito praÄ‡enje napretka te prijateljsku atmosferu u kojoj Ä‡eÅ¡ pronaÄ‡i dodatnu motivaciju.</p>
    </div>
  </section>

  <section id="benefiti">
    <div class="wrap">
      <div class="k-grid">
        <div class="card"><h3 data-i18n="benefit.1.title">ğŸ¯ 1-na-1 coaching</h3><p class="muted" data-i18n="benefit.1.text">Individualni pristup, jasni ciljevi i mjerljivi rezultati.</p></div>
        <div class="card"><h3 data-i18n="benefit.2.title">ğŸ‹ï¸â€â™€ï¸ Funkcionalni treninzi</h3><p class="muted" data-i18n="benefit.2.text">Snaga, mobilnost i kardio za maksimalan uÄinak.</p></div>
        <div class="card"><h3 data-i18n="benefit.3.title">ğŸ“ˆ PraÄ‡enje napretka</h3><p class="muted" data-i18n="benefit.3.text">Mjerenja, fotke napretka i plan prilagoÄ‘en rezultatima.</p></div>
      </div>
    </div>
  </section>

  <section id="programi">
    <div class="wrap program">
      <div>
        <h2 data-i18n="programs.title">Programi treninga</h2>
        <p class="muted" data-i18n="programs.lead">Svaki plan ukljuÄuje procjenu, edukaciju o tehnici i prehranu.</p>
        <div class="k-grid" style="margin-top:12px">
          <div class="card"><h3 data-i18n="programs.weightloss">MrÅ¡avljenje</h3><p class="muted" data-i18n="programs.weightloss.desc">HIIT + snaga, 3â€“5x tjedno.</p></div>
          <div class="card"><h3 data-i18n="programs.strength">Snaga & hipertrofija</h3><p class="muted" data-i18n="programs.strength.desc">Periodizacija, sloÅ¾ene vjeÅ¾be, progresija.</p></div>
          <div class="card"><h3 data-i18n="programs.condition">Kondicija & mobilnost</h3><p class="muted" data-i18n="programs.condition.desc">KruÅ¾ni treninzi, core, mobilnost.</p></div>
        </div>
      </div>
      <div class="img"><img src="images/programs.jpg" alt="Trening u teretani" /></div>
    </div>
  </section>

  <!-- ===== TRANSFORMACIJE: JEDAN PROZOR (CAROUSEL) ===== -->
  <section id="transformacije">
    <div class="wrap">
      <div class="grid-top">
        <div>
          <h2 data-i18n="transforms.title">Rezultati transformacija</h2>
          <p class="muted" data-i18n="transforms.subtitle">Pravi ljudi, pravi rezultati â€” pomiÄemo granice zajedno.</p>
        </div>
        <div class="x-nav">
          
        </div>
      </div>

      <div class="x-viewport" id="xViewport" tabindex="0" aria-roledescription="carousel">
        <div class="x-track" id="xSlider">
          <figure class="x-item"><img src="images/slika1.jpeg" alt="Transformacija 1"></figure>
          <figure class="x-item"><img src="images/slika2.jpeg" alt="Transformacija 2"></figure>
          <figure class="x-item"><img src="images/slika3.jpeg" alt="Transformacija 3"></figure>
        </div>

        <!-- apsolutne strelice u viewportu -->
        <button class="x-btn x-abs x-left" id="xPrevAbs" aria-label="Prev">
          <svg viewBox="0 0 24 24" fill="none"><path d="M15 6L9 12L15 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <button class="x-btn x-abs x-right" id="xNextAbs" aria-label="Next">
          <svg viewBox="0 0 24 24" fill="none"><path d="M9 6L15 12L9 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>

        <!-- HINT: samo mobitel, centriran, pulsira dok ne krene listanje (bez palca) -->
        <div class="swipe-hint x-hint-in" id="swipeHint">
          <span data-i18n="transforms.hint">Povuci udesno za viÅ¡e</span>
        </div>
      </div>
    </div>
  </section>
  <!-- ===== /TRANSFORMACIJE ===== -->

  <section id="paketi">
    <div class="wrap">
      <h2 data-i18n="packages.title">Paketi</h2>
      <p class="muted" data-i18n="packages.lead">Odaberi svoj plan â€” bez skrivenih troÅ¡kova.</p>
      <div class="pricing" style="margin-top:16px">
        <div class="card price"><h3>Basic</h3><div class="tag">29â‚¬ / mj</div><p class="muted" data-i18n="packages.basic.desc">2x tjedno, grupni treninzi</p><a class="btn primary nav-link" href="#kontakt" data-i18n="common.start">Kreni</a></div>
        <div class="card price" style="border:2px solid var(--brand)"><h3>Standard</h3><div class="tag">49â‚¬ / mj</div><p class="muted" data-i18n="packages.standard.desc">3x tjedno + plan</p><a class="btn primary nav-link" href="#kontakt" data-i18n="common.start">Kreni</a></div>
        <div class="card price"><h3>Premium</h3><div class="tag">79â‚¬ / mj</div><p class="muted" data-i18n="packages.premium.desc">NeograniÄeno + 1-na-1 mjeseÄno</p><a class="btn primary nav-link" href="#kontakt" data-i18n="common.start">Kreni</a></div>
      </div>
    </div>
  </section>

  <!-- ÄŒLANARINE -->
  <section id="clanarine">
    <div class="wrap">
      <h2 data-i18n="memberships.title">ÄŒlanarine</h2>
      <div class="pricing" style="margin-top:16px">
        <div class="card">
          <h3 data-i18n="memberships.basic">Osnovni paket</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.basic.2x">2x tjedno â€” <strong>40 KM</strong></li>
            <li data-i18n="m.basic.3x">3x tjedno â€” <strong>50 KM</strong></li>
            <li data-i18n="m.basic.unl">NeograniÄeno â€” <strong>60 KM</strong></li>
            <li data-i18n="m.basic.vip">VIP (neograniÄeno + sauna) â€” <strong>100 KM</strong></li>
            <li data-i18n="m.basic.day">Jednodnevni â€” <strong>7 KM</strong></li>
            <li data-i18n="m.basic.half">PolumjeseÄni (15 dana) â€” <strong>35 KM</strong></li>
          </ul>
        </div>
        <div class="card">
          <h3 data-i18n="memberships.students">SrednjoÅ¡kolci</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.stu.2x">2x tjedno â€” <strong>25 KM</strong></li>
            <li data-i18n="m.stu.3x">3x tjedno â€” <strong>35 KM</strong></li>
            <li data-i18n="m.stu.unl">NeograniÄeno â€” <strong>45 KM</strong></li>
            <li data-i18n="m.stu.group">Grupni treninzi â€” <strong>45 KM</strong></li>
            <li data-i18n="m.stu.day">Jednodnevni â€” <strong>6 KM</strong></li>
          </ul>
        </div>
        <div class="card">
          <h3 data-i18n="memberships.discounts">Popusti</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.disc.3m">3 mjeseca â€” <strong>-10%</strong></li>
            <li data-i18n="m.disc.6m">6 mjeseci â€” <strong>-20%</strong></li>
            <li data-i18n="m.disc.12m">12 mjeseci â€” <strong>-30%</strong></li>
            <li data-i18n="m.disc.sto">Trajni nalog (1 godina) â€” <strong>-20%</strong></li>
          </ul>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <h3 data-i18n="memberships.benefits">Posebne pogodnosti</h3>
        <p class="muted" style="margin:0" data-i18n="memberships.benefits.text">Pogodnosti za firme â€¢ Obiteljski popusti â€¢ Popusti za klubove</p>
      </div>
    </div>
  </section>

  <section id="treneri">
    <div class="wrap">
      <h2 data-i18n="coaches.title">Upoznaj trenere</h2>
      <div class="coaches" style="margin-top:12px">
        <article class="card coach"><img src="images/coach1.jpg" alt="Trener 1" /><div class="info"><h3>Ivan</h3><p class="muted" data-i18n="coach.ivan.role">Snaga</p></div></article>
        <article class="card coach"><img src="images/coach2.jpg" alt="Trener 2" /><div class="info"><h3>Tina</h3><p class="muted" data-i18n="coach.tina.role">MrÅ¡avljenje</p></div></article>
        <article class="card coach"><img src="images/coach3.jpg" alt="Trener 3" /><div class="info"><h3>Toni</h3><p class="muted" data-i18n="coach.toni.role">Kondicija</p></div></article>
        <article class="card coach"><img src="images/coach4.jpg" alt="Trener 4" /><div class="info"><h3>Davor</h3><p class="muted" data-i18n="coach.davor.role">Rehabilitacija</p></div></article>
      </div>
    </div>
  </section>

  <section id="raspored">
    <div class="wrap">
      <h2 data-i18n="schedule.title">Raspored grupnih treninga</h2>
      <div class="card" style="margin-top:12px">
        <div class="table-scroll">
          <table>
            <thead>
              <tr>
                <th data-i18n="schedule.day">Dan</th>
                <th>07:00</th><th>12:00</th><th>18:00</th><th>20:00</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-i18n="day.mon">Pon</td>
                <td>HIIT</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td data-i18n="w.full">Full body</td>
              </tr>
              <tr>
                <td data-i18n="day.tue">Uto</td>
                <td data-i18n="w.str">Snaga</td>
                <td>Core</td>
                <td>HIIT</td>
                <td data-i18n="w.cond">Kondicija</td>
              </tr>
              <tr>
                <td data-i18n="day.wed">Sri</td>
                <td data-i18n="w.full">Full body</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td>HIIT</td>
              </tr>
              <tr>
                <td data-i18n="day.thu">ÄŒet</td>
                <td data-i18n="w.str">Snaga</td>
                <td>Core</td>
                <td data-i18n="w.cond">Kondicija</td>
                <td data-i18n="w.full">Full body</td>
              </tr>
              <tr>
                <td data-i18n="day.fri">Pet</td>
                <td>HIIT</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td data-i18n="w.relax">Opustanje</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <section id="cjenik">
    <div class="wrap">
      <h2 data-i18n="pricing.title">Cjenik</h2>
      <div class="pricing" style="margin-top:12px">
        <div class="card price"><h3 data-i18n="pricing.group">Grupni treninzi</h3><div class="tag">39â‚¬ / mj</div><p class="muted" data-i18n="pricing.group.desc">3x tjedno</p><a class="btn primary nav-link" href="#kontakt" data-i18n="pricing.join">UpiÅ¡i se</a></div>
        <div class="card price" style="border:2px solid var(--brand)"><h3 data-i18n="pricing.pt">Osobni trening</h3><div class="tag">25â‚¬ / sat</div><p class="muted" data-i18n="pricing.pt.desc">1-na-1</p><a class="btn primary nav-link" href="#kontakt" data-i18n="pricing.book">Rezerviraj</a></div>
        <div class="card price"><h3 data-i18n="pricing.online">Online plan</h3><div class="tag">59â‚¬ / mj</div><p class="muted" data-i18n="pricing.online.desc">Plan + check-in</p><a class="btn primary nav-link" href="#kontakt" data-i18n="pricing.request">ZatraÅ¾i plan</a></div>
      </div>
    </div>
  </section>

  <section id="iskustva">
    <div class="wrap">
      <h2 data-i18n="testimonials.title">Iskustva Älanova</h2>
      <div class="k-grid" style="margin-top:12px">
        <div class="card quote"><p data-i18n="testimonials.1">"Za 3 mjeseca -10 kg i osjeÄ‡am se bolje nego ikad."</p><span class="muted">â€” Ana</span></div>
        <div class="card quote"><p data-i18n="testimonials.2">"Podigao sam bench za 20 kg."</p><span class="muted">â€” Luka</span></div>
        <div class="card quote"><p data-i18n="testimonials.3">"Najbolja atmosfera i oprema."</p><span class="muted">â€” Petra</span></div>
      </div>
    </div>
  </section>

  <section id="kontakt">
    <div class="wrap contact">
      <div>
        <h2 data-i18n="contact.title">Rezerviraj termin ili poÅ¡alji upit</h2>
        <form id="rez-form" action="https://formspree.io/f/your-id" method="POST" class="card">
          <div class="field">
            <label data-i18n="form.name.label">Ime i prezime *</label>
           <input name="ime" required class="input" placeholder="Npr. Marko MariÄ‡" data-i18n-placeholder="form.name.ph" autocomplete="name" />
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.email.label">E-mail *</label>
            <input name="email" type="email" required class="input" placeholder="tvoj@email.com" data-i18n-placeholder="form.email.ph" autocomplete="email" />
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.program.label">Program / upit</label>
            <select name="program" id="programSelect" class="input">
              <option value="MrÅ¡avljenje" data-i18n="form.program.opt.weightloss">MrÅ¡avljenje</option>
              <option value="Snaga" data-i18n="form.program.opt.strength">Snaga</option>
              <option value="Kondicija" data-i18n="form.program.opt.condition">Kondicija</option>
              <option value="Online plan" data-i18n="form.program.opt.online">Online plan</option>
              <option value="Osobni trening" data-i18n="form.program.opt.pt">Osobni trening</option>
              <option value="Grupni treninzi" data-i18n="form.program.opt.group">Grupni treninzi</option>
              <option value="Rehabilitacija" data-i18n="form.program.opt.rehab">Rehabilitacija</option>
              <option value="OpÄ‡i upit/pitanje" data-i18n="form.program.opt.general">OpÄ‡i upit/pitanje</option>
            </select>
          </div>

          <div class="field hidden" id="trenerField" style="margin-top:10px">
            <label data-i18n="form.trainer.label">Odaberi trenera</label>
            <select name="trener" id="trenerSelect" class="input"></select>
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.message.label">Poruka</label>
            <textarea name="poruka" placeholder="NapiÅ¡i svoj cilj ili pitanjeâ€¦" data-i18n-placeholder="form.message.ph"></textarea>
          </div>

          <button class="btn primary" style="margin-top:14px" type="submit" data-i18n="form.submit">PoÅ¡alji</button>
          <div id="status" class="status"></div>
        </form>
      </div>

      <div>
        <div class="card">
          <h3 data-i18n="contact.loc.title">Lokacija & kontakti</h3>
          <p class="muted">Antuna Branka Å imiÄ‡a, 88240 PosuÅ¡je</p>
          <p style="line-height:1.9">
            <span class="contact-line">ğŸ“ <a href="tel:+38763119888">+387 63 119 888</a></span><br>
            <span class="contact-line">ğŸ“§ <a href="mailto:goodlifefitnesscentarposusje@gmail.com">goodlifefitnesscentarposusje@gmail.com</a></span><br>
            <span class="contact-line">ğŸ“¸ <a href="https://instagram.com/goodlife_fitnesscentar" target="_blank" rel="noopener">instagram.com/goodlife_fitnesscentar</a></span>
          </p>
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2895.435999621775!2d17.323715475329625!3d43.472370664108865!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x134b271078fb3337%3A0xe6a905b3f512513!2sGoodLife%20Fitness%20Centar!5e0!3m2!1sen!2hr!4v1757019991119!5m2!1sen!2hr" 
            width="100%" height="300" 
            style="border:0; border-radius:12px; margin-top:10px;" 
            allowfullscreen="" loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap row">
      <div>Â© <span id="y"></span> GOODLIFE. <span data-i18n="footer.rights">Sva prava pridrÅ¾ana.</span></div>
      <div class="muted" data-i18n="footer.hours">Ponâ€“Pet 07â€“22 â€¢ Sub 07â€“22 â€¢ Ned NE RADIMO!</div>
    </div>
  </footer>

<script>
/* ===== I18N ===== */
const I18N = {
  hr: {
    "nav.home":"PoÄetna","nav.about":"O nama","nav.packages":"Paketi","nav.memberships":"ÄŒlanarine","nav.contact":"Kontakt",
    "menu.title":"Izbornik","menu.close":"Zatvori",
    "hero.title":"Ostvari svoj potencijal, Å¾ivi Good Life!",
    "hero.lead":"Postigni svoje fitness ciljeve uz vrhunske trenere i moderan program treninga.",
    "hero.btn.packages":"Pogledaj pakete","hero.btn.contact":"Kontaktiraj nas",
    "about.title":"O nama",
    "about.text":"GoodLife Fitness centar u PosuÅ¡ju nije samo obiÄna teretana â€” to je mjesto gdje zajednica ljudi s istim ciljem radi zajedno na zdravlju i napretku. NaÅ¡i treneri kreiraju individualne programe prilagoÄ‘ene tvom cilju: gubitku kilograma, poveÄ‡anju miÅ¡iÄ‡ne mase, jaÄanju kondicije ili rehabilitaciji nakon ozljeda. Nudimo struÄne savjete o prehrani, redovito praÄ‡enje napretka te prijateljsku atmosferu u kojoj Ä‡eÅ¡ pronaÄ‡i dodatnu motivaciju.",
    "benefit.1.title":"ğŸ¯ 1-na-1 coaching","benefit.1.text":"Individualni pristup, jasni ciljevi i mjerljivi rezultati.",
    "benefit.2.title":"ğŸ‹ï¸â€â™€ï¸ Funkcionalni treninzi","benefit.2.text":"Snaga, mobilnost i kardio za maksimalan uÄinak.",
    "benefit.3.title":"ğŸ“ˆ PraÄ‡enje napretka","benefit.3.text":"Mjerenja, fotke napretka i plan prilagoÄ‘en rezultatima.",
    "programs.title":"Programi treninga","programs.lead":"Svaki plan ukljuÄuje procjenu, edukaciju o tehnici i prehranu.",
    "programs.weightloss":"MrÅ¡avljenje","programs.weightloss.desc":"HIIT + snaga, 3â€“5x tjedno.",
    "programs.strength":"Snaga & hipertrofija","programs.strength.desc":"Periodizacija, sloÅ¾ene vjeÅ¾be, progresija.",
    "programs.condition":"Kondicija & mobilnost","programs.condition.desc":"KruÅ¾ni treninzi, core, mobilnost.",
    "transforms.title":"Rezultati transformacija",
    "transforms.subtitle":"Pravi ljudi, pravi rezultati â€” pomiÄemo granice zajedno.",
    "transforms.hint":"Povuci udesno za viÅ¡e",
    "packages.title":"Paketi","packages.lead":"Odaberi svoj plan â€” bez skrivenih troÅ¡kova.",
    "packages.basic.desc":"2x tjedno, grupni treninzi","packages.standard.desc":"3x tjedno + plan","packages.premium.desc":"NeograniÄeno + 1-na-1 mjeseÄno",
    "common.start":"Kreni",
    "memberships.title":"ÄŒlanarine","memberships.basic":"Osnovni paket","memberships.students":"SrednjoÅ¡kolci","memberships.discounts":"Popusti",
    "memberships.benefits":"Posebne pogodnosti","memberships.benefits.text":"Pogodnosti za firme â€¢ Obiteljski popusti â€¢ Popusti za klubove",
    "coaches.title":"Upoznaj trenere",
    "schedule.title":"Raspored grupnih treninga","schedule.day":"Dan",
    "day.mon":"Pon","day.tue":"Uto","day.wed":"Sri","day.thu":"ÄŒet","day.fri":"Pet",
    "w.mob":"Mobilnost","w.str":"Snaga","w.full":"Full body","w.cond":"Kondicija","w.relax":"Opustanje",
    "pricing.title":"Cjenik","pricing.group":"Grupni treninzi","pricing.group.desc":"3x tjedno","pricing.join":"UpiÅ¡i se",
    "pricing.pt":"Osobni trening","pricing.pt.desc":"1-na-1","pricing.book":"Rezerviraj",
    "pricing.online":"Online plan","pricing.online.desc":"Plan + check-in","pricing.request":"ZatraÅ¾i plan",
    "testimonials.title":"Iskustva Älanova","testimonials.1":"\"Za 3 mjeseca -10 kg i osjeÄ‡am se bolje nego ikad.\"","testimonials.2":"\"Podigao sam bench za 20 kg.\"","testimonials.3":"\"Najbolja atmosfera i oprema.\"",
    "contact.title":"Rezerviraj termin ili poÅ¡alji upit",
    "form.name.label":"Ime i prezime *","form.name.ph":"Npr. Marko MariÄ‡",
    "form.email.label":"E-mail *","form.email.ph":"tvoj@email.com",
    "form.program.label":"Program / upit",
    "form.program.opt.weightloss":"MrÅ¡avljenje","form.program.opt.strength":"Snaga","form.program.opt.condition":"Kondicija","form.program.opt.online":"Online plan","form.program.opt.pt":"Osobni trening","form.program.opt.group":"Grupni treninzi","form.program.opt.rehab":"Rehabilitacija","form.program.opt.general":"OpÄ‡i upit/pitanje",
    "form.trainer.label":"Odaberi trenera",
    "form.message.label":"Poruka","form.message.ph":"NapiÅ¡i svoj cilj ili pitanjeâ€¦",
    "form.submit":"PoÅ¡alji",
    "contact.loc.title":"Lokacija & kontakti",
    "coach.ivan.role":"Snaga","coach.tina.role":"MrÅ¡avljenje","coach.toni.role":"Kondicija","coach.davor.role":"Rehabilitacija",
    "footer.rights":"Sva prava pridrÅ¾ana.","footer.hours":"Ponâ€“Pet 07â€“22 â€¢ Sub 07â€“22 â€¢ Ned NE RADIMO!",
    "m.basic.2x":"2x tjedno â€” <strong>40 KM</strong>",
    "m.basic.3x":"3x tjedno â€” <strong>50 KM</strong>",
    "m.basic.unl":"NeograniÄeno â€” <strong>60 KM</strong>",
    "m.basic.vip":"VIP (neograniÄeno + sauna) â€” <strong>100 KM</strong>",
    "m.basic.day":"Jednodnevni â€” <strong>7 KM</strong>",
    "m.basic.half":"PolumjeseÄni (15 dana) â€” <strong>35 KM</strong>",
    "m.stu.2x":"2x tjedno â€” <strong>25 KM</strong>",
    "m.stu.3x":"3x tjedno â€” <strong>35 KM</strong>",
    "m.stu.unl":"NeograniÄeno â€” <strong>45 KM</strong>",
    "m.stu.group":"Grupni treninzi â€” <strong>45 KM</strong>",
    "m.stu.day":"Jednodnevni â€” <strong>6 KM</strong>",
    "m.disc.3m":"3 mjeseca â€” <strong>-10%</strong>",
    "m.disc.6m":"6 mjeseci â€” <strong>-20%</strong>",
    "m.disc.12m":"12 mjeseci â€” <strong>-30%</strong>",
    "m.disc.sto":"Trajni nalog (1 godina) â€” <strong>-20%</strong>"
  },
  en: {
    "nav.home":"Home","nav.about":"About","nav.packages":"Packages","nav.memberships":"Memberships","nav.contact":"Contact",
    "menu.title":"Menu","menu.close":"Close",
    "hero.title":"Unlock your potential â€” live the Good Life!",
    "hero.lead":"Reach your fitness goals with expert coaches and modern training programs.",
    "hero.btn.packages":"See packages","hero.btn.contact":"Contact us",
    "about.title":"About us",
    "about.text":"GoodLife Fitness Center in PosuÅ¡je is more than a gym â€” itâ€™s a community working together on health and progress. Our coaches tailor programs for fat loss, muscle gain, conditioning, or post-injury rehab. We provide nutrition guidance, regular progress tracking, and a motivating atmosphere.",
    "benefit.1.title":"ğŸ¯ 1-on-1 coaching","benefit.1.text":"Personal approach, clear goals, measurable results.",
    "benefit.2.title":"ğŸ‹ï¸â€â™€ï¸ Functional training","benefit.2.text":"Strength, mobility and cardio for maximum impact.",
    "benefit.3.title":"ğŸ“ˆ Progress tracking","benefit.3.text":"Measurements, progress photos and adaptive planning.",
    "programs.title":"Training programs","programs.lead":"Every plan includes an assessment, technique coaching and nutrition tips.",
    "programs.weightloss":"Weight loss","programs.weightloss.desc":"HIIT + strength, 3â€“5Ã—/week.",
    "programs.strength":"Strength & hypertrophy","programs.strength.desc":"Periodization, compound lifts, progression.",
    "programs.condition":"Conditioning & mobility","programs.condition.desc":"Circuits, core, mobility.",
    "transforms.title":"Transformation results",
    "transforms.subtitle":"Real people, real results â€” pushing limits together.",
    "transforms.hint":"Swipe right for more",
    "packages.title":"Packages","packages.lead":"Pick your plan â€” no hidden fees.",
    "packages.basic.desc":"2Ã—/week, group sessions","packages.standard.desc":"3Ã—/week + plan","packages.premium.desc":"Unlimited + monthly 1-on-1",
    "common.start":"Start",
    "memberships.title":"Memberships","memberships.basic":"Basic plan","memberships.students":"High-school students","memberships.discounts":"Discounts",
    "memberships.benefits":"Special benefits","memberships.benefits.text":"Corporate benefits â€¢ Family discounts â€¢ Club discounts",
    "coaches.title":"Meet the coaches",
    "schedule.title":"Group class schedule","schedule.day":"Day",
    "day.mon":"Mon","day.tue":"Tue","day.wed":"Wed","day.thu":"Thu","day.fri":"Fri",
    "w.mob":"Mobility","w.str":"Strength","w.full":"Full body","w.cond":"Conditioning","w.relax":"Relax",
    "pricing.title":"Pricing","pricing.group":"Group training","pricing.group.desc":"3Ã— per week","pricing.join":"Join now",
    "pricing.pt":"Personal training","pricing.pt.desc":"1-on-1","pricing.book":"Book",
    "pricing.online":"Online plan","pricing.online.desc":"Plan + check-in","pricing.request":"Request plan",
    "testimonials.title":"Member stories","testimonials.1":"\"Lost 10 kg in 3 months â€” feel better than ever.\"","testimonials.2":"\"Added 20 kg to my bench.\"","testimonials.3":"\"Best atmosphere and equipment.\"",
    "contact.title":"Book a session or send an inquiry",
    "form.name.label":"Full name *","form.name.ph":"e.g. Marko MariÄ‡",
    "form.email.label":"E-mail *","form.email.ph":"your@email.com",
    "form.program.label":"Program / inquiry",
    "form.program.opt.weightloss":"Weight loss","form.program.opt.strength":"Strength","form.program.opt.condition":"Conditioning","form.program.opt.online":"Online plan","form.program.opt.pt":"Personal training","form.program.opt.group":"Group training","form.program.opt.rehab":"Rehabilitation","form.program.opt.general":"General question",
    "form.trainer.label":"Choose a trainer",
    "form.message.label":"Message","form.message.ph":"Tell us your goal or questionâ€¦",
    "form.submit":"Send",
    "contact.loc.title":"Location & contacts",
    "coach.ivan.role":"Strength","coach.tina.role":"Weight loss","coach.toni.role":"Conditioning","coach.davor.role":"Rehabilitation",
    "footer.rights":"All rights reserved.","footer.hours":"Monâ€“Fri 07â€“22 â€¢ Sat 07â€“22 â€¢ Sun CLOSED",
    "m.basic.2x":"2Ã— per week â€” <strong>40 KM</strong>",
    "m.basic.3x":"3Ã— per week â€” <strong>50 KM</strong>",
    "m.basic.unl":"Unlimited â€” <strong>60 KM</strong>",
    "m.basic.vip":"VIP (unlimited + sauna) â€” <strong>100 KM</strong>",
    "m.basic.day":"Day pass â€” <strong>7 KM</strong>",
    "m.basic.half":"Half-month (15 days) â€” <strong>35 KM</strong>",
    "m.stu.2x":"2Ã— per week â€” <strong>25 KM</strong>",
    "m.stu.3x":"3Ã— per week â€” <strong>35 KM</strong>",
    "m.stu.unl":"Unlimited â€” <strong>45 KM</strong>",
    "m.stu.group":"Group training â€” <strong>45 KM</strong>",
    "m.stu.day":"Day pass â€” <strong>6 KM</strong>",
    "m.disc.3m":"3 months â€” <strong>-10%</strong>",
    "m.disc.6m":"6 months â€” <strong>-20%</strong>",
    "m.disc.12m":"12 months â€” <strong>-30%</strong>",
    "m.disc.sto":"Standing order (1 year) â€” <strong>-20%</strong>"
  }
};

/* ===== Helpers ===== */
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

/* Year */
$('#y').textContent = new Date().getFullYear();

/* Fade-in on load */
window.addEventListener('load', () => { document.body.classList.add('fade-in'); });

/* ===== I18N apply ===== */
function applyI18n(lang){
  const dict = I18N[lang] || I18N.hr;
  document.documentElement.lang = lang;

  $$('[data-i18n]').forEach(el=>{
    const k = el.dataset.i18n;
    if (dict[k]) el.innerHTML = dict[k];
  });
  $$('[data-i18n-placeholder]').forEach(el=>{
    const k = el.dataset.i18nPlaceholder;
    if (dict[k]) el.placeholder = dict[k];
  });

  $('#langHR')?.classList.toggle('active', lang==='hr');
  $('#langEN')?.classList.toggle('active', lang==='en');
}

/* ===== Modal helpers (lock body scroll) ===== */
const langModal = $('#langModal');
function openLangModal(){
  langModal?.classList.add('show');
  langModal?.setAttribute('aria-hidden','false');
  document.body.style.top = `-${window.scrollY}px`;
  document.body.classList.add('modal-open');
}
function closeLangModal(){
  langModal?.classList.remove('show');
  langModal?.setAttribute('aria-hidden','true');
  const y = parseInt((document.body.style.top || '0').replace('-',''),10) || 0;
  document.body.classList.remove('modal-open');
  document.body.style.top = '';
  window.scrollTo(0, y || 0);
}

/* ===== First-visit logic: modal samo kad NIJE reload ===== */
const savedLang = localStorage.getItem('gl_lang');
const navEntry = performance.getEntriesByType?.('navigation')?.[0];
const isReload = navEntry ? navEntry.type === 'reload'
                          : (performance.navigation && performance.navigation.type === 1);

if (!isReload) {
  // prikaÅ¾i modal i ZAKLJUÄŒAJ pozadinu
  langModal?.classList.add('show');
  langModal?.setAttribute('aria-hidden','false');
  document.body.style.top = `-${window.scrollY}px`;
  document.body.classList.add('modal-open');
  if (savedLang) applyI18n(savedLang);
} else {
  applyI18n(savedLang || 'hr');
  langModal?.classList.remove('show');
  langModal?.setAttribute('aria-hidden','true');
}

/* Odabir jezika iz modala: fade & jump home */
function chooseLangFirst(lang){
  localStorage.setItem('gl_lang', lang);
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');

  setTimeout(()=> {
    closeLangModal();
    applyI18n(lang);
    history.replaceState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo({ top:0, behavior:'instant' });
    document.body.classList.remove('leaving');
    void document.body.offsetWidth;
    document.body.classList.add('fade-in');
  }, 650);
}

/* Promjena jezika preko zastavica u headeru: fade & home */
function switchLangFromHeader(lang){
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');

  setTimeout(()=> {
    localStorage.setItem('gl_lang', lang);
    applyI18n(lang);
    history.pushState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo({ top:0, behavior:'instant' });
    document.body.classList.remove('leaving');
    void document.body.offsetWidth;
    document.body.classList.add('fade-in');
  }, 650);
}

/* Bindovi jezika */
$$('.flag-btn').forEach(b=> b.addEventListener('click', ()=> chooseLangFirst(b.dataset.lang)));
$('#langHR')?.addEventListener('click', ()=> switchLangFromHeader('hr'));
$('#langEN')?.addEventListener('click', ()=> switchLangFromHeader('en'));

/* ===== Refresh (normal + logo) â†’ fade i povratak na poÄetnu ===== */
if ('scrollRestoration' in history) history.scrollRestoration = 'manual';
window.addEventListener('beforeunload', () => {
  sessionStorage.setItem('forceHome','1');
  document.body.classList.add('leaving');
});
// Fallback za mobile/Safari gdje beforeunload ponekad ne okida
window.addEventListener('pagehide', () => {
  sessionStorage.setItem('forceHome','1');
});
window.addEventListener('pageshow', () => {
  if (sessionStorage.getItem('forceHome') === '1'){
    sessionStorage.removeItem('forceHome');
    history.replaceState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo(0,0);
  }
});
$('#logoBtn')?.addEventListener('click', (e)=>{
  e.preventDefault();
  sessionStorage.setItem('forceHome','1');
  document.body.classList.add('leaving');
  setTimeout(()=> location.reload(), 50);
});

/* ===== Nav / drawer / spy ===== */
const headerEl = document.getElementById('siteHeader');
const headerCssH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--headerH')) || 70;
const menuLinks = document.querySelectorAll('.menu a');
const allLinks  = document.querySelectorAll('a.nav-link, .menu a, .mlink');

function setActive(href){ menuLinks.forEach(a=> a.classList.toggle('active', a.getAttribute('href') === href)); }

const sections = document.querySelectorAll('section');
window.addEventListener('load', ()=>{
  sections.forEach(s=>s.classList.add('show'));
  initTransformSlider(); // INIT CAROUSEL
});

function smoothScrollTo(hash){
  const target = document.querySelector(hash); if(!target) return;
  const offset = (headerEl?.offsetHeight || headerCssH) + 10;
  const y = target.getBoundingClientRect().top + window.pageYOffset - offset;
  window.scrollTo({ top:y, behavior:'smooth' });
}

const watchIds = ['#pocetna','#onama','#benefiti','#programi','#transformacije','#paketi','#clanarine','#treneri','#raspored','#cjenik','#iskustva','#kontakt'];
const watchTargets = watchIds.map(sel=>document.querySelector(sel)).filter(Boolean);
const ratios = {};
const io = new IntersectionObserver((entries)=>{
  entries.forEach(en => { ratios[en.target.id] = en.intersectionRatio; });
  let bestId = null, bestRatio = -1;
  Object.keys(ratios).forEach(id=>{ if(ratios[id] > bestRatio){ bestRatio = ratios[id]; bestId = id; } });
  if(!bestId) return;
  const href = '#'+bestId;
  setActive(href);
  const cleanUrl = (href === '#pocetna') ? (location.pathname + location.search) : href;
  history.replaceState(null, '', cleanUrl);
}, {
  root: null,
  rootMargin: `-${(headerEl?.offsetHeight || headerCssH)}px 0px -50% 0px`,
  threshold: Array.from({length: 21}, (_,i)=> i/20)
});
watchTargets.forEach(t=> io.observe(t));

let realCloseDrawer = ()=>{};
allLinks.forEach(a=>{
  a.addEventListener('click', (e)=>{
    const href = a.getAttribute('href');
    if(href && href.startsWith('#')){
      e.preventDefault();
      smoothScrollTo(href);
      setActive(href);
      const cleanUrl = (href === '#pocetna') ? (location.pathname + location.search) : href;
      history.pushState(null, '', cleanUrl);
      realCloseDrawer();
    }
  });
});

/* Drawer */
const burger = document.querySelector('.burger');
const drawer = document.getElementById('drawer');
const overlay = document.getElementById('drawerOverlay');
const drawerClose = document.getElementById('drawerClose');

function openDrawer(){
  drawer.classList.add('open');
  overlay.classList.add('show');
  drawer.setAttribute('aria-hidden','false');
  burger.setAttribute('aria-expanded','true');
  document.body.style.overflow='hidden';
}
realCloseDrawer = function(){
  drawer.classList.remove('open');
  overlay.classList.remove('show');
  drawer.setAttribute('aria-hidden','true');
  burger.setAttribute('aria-expanded','false');
  document.body.style.overflow='';
};
burger?.addEventListener('click', openDrawer);
drawerClose?.addEventListener('click', realCloseDrawer);
overlay?.addEventListener('click', realCloseDrawer);
window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') realCloseDrawer(); });

/* Auto-hide header (slower show) */
let hideTimer = null;
function onScroll(){
  if (drawer && drawer.classList.contains('open')) return;
  const y = window.scrollY;
  if (y > 10){ headerEl.classList.add('hide'); }
  else { headerEl.classList.remove('hide'); }
  if (hideTimer) clearTimeout(hideTimer);
  hideTimer = setTimeout(()=>{ headerEl.classList.remove('hide'); }, 380);
}
window.addEventListener('scroll', onScroll, {passive:true});

/* Dependent trainer field visibility */
const programSelect = document.getElementById('programSelect');
const trenerField   = document.getElementById('trenerField');
const trenerSelect  = document.getElementById('trenerSelect');
const showTrainerFor = new Set([
  'MrÅ¡avljenje','Snaga','Kondicija','Rehabilitacija','Osobni trening','Grupni treninzi',
  'Weight loss','Strength','Conditioning','Rehabilitation','Personal training','Group training'
]);
function ensureTrainersFilled(){
  if (!trenerSelect) return;
  if (trenerSelect.options.length === 0){
    ['Ivan','Tina','Toni','Davor'].forEach(name=>{
      const opt=document.createElement('option'); opt.value=name; opt.textContent=name; trenerSelect.appendChild(opt);
    });
  }
}
function updateTrainerVisibility(){
  const val = programSelect?.value || '';
  if (showTrainerFor.has(val)){
    trenerField.classList.remove('hidden');
    ensureTrainersFilled();
    trenerSelect.setAttribute('required','required');
  } else {
    trenerField.classList.add('hidden');
    trenerSelect.removeAttribute('required');
  }
}
if (programSelect){
  updateTrainerVisibility();
  programSelect.addEventListener('change', updateTrainerVisibility);
}

/* ===== CAROUSEL LOGIC (jedan viewport) ===== */
function initTransformSlider(){
  const track = document.getElementById('xSlider');
  const viewport = document.getElementById('xViewport');
  const btnPrev = document.getElementById('xPrev');
  const btnNext = document.getElementById('xNext');
  const btnPrevAbs = document.getElementById('xPrevAbs');
  const btnNextAbs = document.getElementById('xNextAbs');
  const hint = document.getElementById('swipeHint');
  if(!track || !viewport) return;

  const total = track.children.length;
  let index = 0;

  const hideHint = ()=> hint?.classList.add('hidden');
  // auto-hide nakon 4.5s ako nema interakcije
  setTimeout(hideHint, 4500);

  function goTo(i){
  index = (i + total) % total;
  track.style.transform = `translateX(${-index*100}%)`;

  // Hint logika
  if (index === 0) {
    hint?.classList.remove('hidden','hint-fadeout');
  } else {
    if (!hint.classList.contains('hint-fadeout')) {
      hint.classList.add('hint-fadeout');
      setTimeout(()=> hint.classList.add('hidden'), 600); // sakrij nakon fade-a
    }
  }
}




  const next = ()=> goTo(index+1);
  const prev = ()=> goTo(index-1);

  // Gumbi
  [btnNext,btnPrev,btnNextAbs,btnPrevAbs].forEach(b=>{
    b?.addEventListener('click', ()=>{ hideHint(); });
  });
  btnNext?.addEventListener('click', next);
  btnPrev?.addEventListener('click', prev);
  btnNextAbs?.addEventListener('click', next);
  btnPrevAbs?.addEventListener('click', prev);

  // Touch swipe (bez vertikalnog skrola dok swipe-aÅ¡)
  let tStartX=0, tDelta=0, touching=false, moved=false;
  viewport.addEventListener('touchstart', (e)=>{
    if(!e.touches[0]) return;
    touching=true; moved=false; tDelta=0;
    tStartX = e.touches[0].clientX;
    track.style.transition='none';
  }, {passive:true});
  viewport.addEventListener('touchmove', (e)=>{
    if(!touching || !e.touches[0]) return;
    tDelta = e.touches[0].clientX - tStartX;
    if (Math.abs(tDelta)>5 && !moved){ moved=true; hideHint(); }
    // sprijeÄi scroll stranice dok vuÄeÅ¡
    e.preventDefault();
    const pct = (-index*100) + (tDelta / viewport.clientWidth)*100;
    track.style.transform = `translateX(${pct}%)`;
  }, {passive:false});
  viewport.addEventListener('touchend', ()=>{
    track.style.transition='';
    if (moved && Math.abs(tDelta) > viewport.clientWidth*0.15){
      (tDelta<0) ? next() : prev();
    } else {
      goTo(index);
    }
    touching=false; moved=false; tDelta=0;
  });

  // Mouse drag (sprijeÄi selekciju/slike)
  let drag=false, mStart=0, mDelta=0;
  viewport.addEventListener('mousedown', (e)=>{
    drag=true; mStart=e.clientX; mDelta=0; track.style.transition='none'; hideHint(); e.preventDefault();
  });
  window.addEventListener('mousemove', (e)=>{
    if(!drag) return;
    mDelta = e.clientX - mStart;
    const pct = (-index*100) + (mDelta / viewport.clientWidth)*100;
    track.style.transform = `translateX(${pct}%)`;
  });
  window.addEventListener('mouseup', ()=>{
    if(!drag) return;
    track.style.transition='';
    if (Math.abs(mDelta) > viewport.clientWidth*0.15){
      (mDelta<0) ? next() : prev();
    } else {
      goTo(index);
    }
    drag=false; mDelta=0;
  });

  // Keyboard
  viewport.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowRight') next();
    else if(e.key==='ArrowLeft') prev();
  });

  goTo(0);
}

/* Final safety */
applyI18n(localStorage.getItem('gl_lang') || 'hr');
</script>
</body>
</html>
