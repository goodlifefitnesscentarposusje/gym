<!DOCTYPE html>
<html lang="hr">
<head>

<!-- Open Graph (WhatsApp / Facebook) -->
<meta property="og:title" content="GOODLIFE — POSUŠJE" />
<meta property="og:description" content="GoodLife i osobni treninzi. Programi snage, mršavljenja i kondicije. Rezerviraj svoj termin!" />
<meta property="og:type" content="website" />
<meta property="og:url" content="https://goodlifefitnesscentarposusje.github.io/gym/" />
<meta property="og:site_name" content="GOODLIFE" />
<meta property="og:locale" content="hr_HR" />

<!-- Slika za preview (1200x630, JPG; preporuka < 500 KB) -->
<meta property="og:image" content="https://goodlifefitnesscentarposusje.github.io/gym/images/goodlifelogo1.jpg?v=3" />
<meta property="og:image:secure_url" content="https://goodlifefitnesscentarposusje.github.io/gym/images/goodlifelogo1.jpg?v=3" />
<meta property="og:image:type" content="image/jpeg" />
<meta property="og:image:width" content="1200" />
<meta property="og:image:height" content="630" />
<meta property="og:image:alt" content="GoodLife Fitness Centar Posušje — logo" />

<!-- Twitter (koristi se često i za WA) -->
<meta name="twitter:card" content="summary_large_image" />
<meta name="twitter:title" content="GOODLIFE — POSUŠJE" />
<meta name="twitter:description" content="GoodLife i osobni treninzi. Programi snage, mršavljenja i kondicije. Rezerviraj svoj termin!" />
<meta name="twitter:image" content="https://goodlifefitnesscentarposusje.github.io/gym/images/goodlifelogo1.jpg?v=3" />





  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no, viewport-fit=cover" />
  <title>GOODLIFE — POSUŠJE</title>
  <meta name="description" content="GoodLife i osobni treninzi. Programi snage, mršavljenja i kondicije. Rezerviraj svoj termin danas!" />
<!-- Intl-tel-input plugin uklonjen -->
  <style>
    :root{
      --bg:#0f0f12; --card:#16161a; --muted:#9aa0a6; --text:#f4f5f6;
      --brand:#ff7a00; --brand-2:#ffab66; --radius:18px;
      --shadow:0 10px 30px rgba(0,0,0,.35);
      --maxw:1200px; --headerH:70px;
      --fade:.65s;
    }

  .icon {
  width: 20px;
  height: 20px;
  margin-right: 8px;
  vertical-align: middle;
}

.contact-item {
  display: flex;
  align-items: center;
  margin: 10px 0;   /* isti razmak između redova */
}

.contact-item img.icon {
  width: 22px;      /* sve ikone iste veličine */
  height: 22px;
  margin-right: 10px;
}

.contact-item a:hover {
  color: #ff7a00;           /* narančasta kad pređeš mišem */
}




    /* Global fade */
    body{ opacity:0; transition: opacity var(--fade) ease; }
    body.fade-in{ opacity:1; }
    body.leaving{ opacity:0; transition: opacity var(--fade) ease; }
    
/* Smooth scroll for navigation */
.nav-link, .menu a {
  transition: all 0.3s ease;
}

.nav-link:hover, .menu a:hover {
  transform: translateY(-2px);
  color: #007bff;
}

/* Enhanced section transitions */
section {
  opacity: 0;
  transform: translateY(30px);
  transition: all 0.6s ease;
}

section.show {
  opacity: 1;
  transform: translateY(0);
}

/* Enhanced testimonial track animation */
.testimonials-track {
  transition: transform 0.3s ease;
}

/* Enhanced package cards */
.package-card {
  transition: all 0.3s ease;
}

.package-card:hover {
  transform: translateY(-8px);
  box-shadow: 0 20px 40px rgba(0,0,0,0.1);
}

/* Enhanced burger button */
.burger {
  transition: all 0.3s ease;
}

.burger:hover {
  transform: scale(1.05);
  border-color: rgba(255,255,255,0.3);
}

/* Enhanced status messages */
.status {
  transition: all 0.3s ease;
  opacity: 0;
  transform: translateY(-10px);
}

.status.show {
  opacity: 1;
  transform: translateY(0);
}

/* Enhanced character counter */
.char-counter {
  transition: all 0.3s ease;
}

.char-counter.warning {
  animation: pulse 1s ease-in-out;
}

.char-counter.error {
  animation: shake 0.5s ease-in-out;
}

@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* Enhanced testimonials track container */
.testimonials-track-container {
  transition: all 0.3s ease;
}

.testimonials-track-container:hover {
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

/* Enhanced flag buttons */
.flag-btn {
  transition: all 0.3s ease;
}

.flag-btn:hover {
  transform: translateY(-3px) scale(1.02);
  box-shadow: 0 8px 20px rgba(0,0,0,0.2);
}

/* Enhanced flag mini buttons */
.flag-mini {
  transition: all 0.3s ease;
}

.flag-mini:hover {
  transform: translateY(-2px) scale(1.1);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

/* Enhanced read more buttons */
.read-more-btn {
  transition: all 0.3s ease;
}

.read-more-btn:hover {
  transform: translateY(-1px);
  text-shadow: 0 2px 4px rgba(0,123,255,0.3);
}

/* Enhanced coach cards */
.coach {
  transition: all 0.3s ease;
}

.coach:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

.coach img {
  transition: all 0.3s ease;
}

.coach:hover img {
  transform: scale(1.05);
}

/* Enhanced quote cards */
.quote {
  transition: all 0.3s ease;
}

.quote:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 25px rgba(0,0,0,0.1);
}

/* Enhanced price cards */
.price {
  transition: all 0.3s ease;
}

.price:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

/* Enhanced k-grid cards */
.k-grid .card {
  transition: all 0.3s ease;
}

.k-grid .card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

/* Enhanced table scroll */
.table-scroll {
  transition: all 0.3s ease;
}

.table-scroll:hover {
  box-shadow: 0 5px 15px rgba(0,0,0,0.1);
}

/* Enhanced lang card */
.lang-card {
  transition: all 0.3s ease;
}

.lang-card:hover {
  box-shadow: 0 15px 35px rgba(0,0,0,0.2);
}

/* Enhanced drawer close button */
#drawerClose {
  transition: all 0.3s ease;
}

#drawerClose:hover {
  transform: scale(1.05);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

/* Enhanced modal close buttons */
#closeTestimonialModal, #closeSaunaModal {
  transition: all 0.3s ease;
}

#closeTestimonialModal:hover, #closeSaunaModal:hover {
  transform: scale(1.05);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

/* Enhanced modal open buttons */
#addTestimonialBtn, #openSaunaModal {
  transition: all 0.3s ease;
}

#addTestimonialBtn:hover, #openSaunaModal:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

/* Enhanced package and pricing buttons */
.package-btn, .pricing-btn {
  transition: all 0.3s ease;
}

.package-btn:hover, .pricing-btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

/* Enhanced hero buttons */
.hero .btn {
  transition: all 0.3s ease;
}

.hero .btn:hover {
  transform: translateY(-3px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.2);
}

/* Enhanced form submit buttons */
form .btn.primary {
  transition: all 0.3s ease;
}

form .btn.primary:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

/* Enhanced testimonials grid */
#testimonialsGrid {
  transition: all 0.3s ease;
}

#testimonialsGrid:hover {
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

/* Enhanced testimonials track */
#testimonialsTrack {
  transition: all 0.3s ease;
}

#testimonialsTrack:hover {
  animation-play-state: paused;
}

/* Enhanced testimonials track container */
.testimonials-track-container {
  transition: all 0.3s ease;
}

.testimonials-track-container:hover {
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

/* Enhanced status div */
#status {
  transition: all 0.3s ease;
}

#status.show {
  opacity: 1;
  transform: translateY(0);
}

/* Enhanced char counter */
#charCounter {
  transition: all 0.3s ease;
}

#charCounter.warning {
  animation: pulse 1s ease-in-out;
}

#charCounter.error {
  animation: shake 0.5s ease-in-out;
}

/* Enhanced error messages */
.error-msg {
  animation: errorSlideIn 0.3s ease;
}

@keyframes errorSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Enhanced success animation */
.success-animation {
  animation: successPulse 0.6s ease;
}

@keyframes successPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Enhanced pulse animation */
@keyframes pulse {
  0%, 100% { transform: scale(1); }
  50% { transform: scale(1.05); }
}

/* Enhanced shake animation */
@keyframes shake {
  0%, 100% { transform: translateX(0); }
  25% { transform: translateX(-5px); }
  75% { transform: translateX(5px); }
}

/* Enhanced error slide in animation */
@keyframes errorSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Enhanced success pulse animation */
@keyframes successPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Enhanced button hover effects */
.btn {
  transition: all 0.3s ease;
  position: relative;
  overflow: hidden;
}

.btn::before {
  content: '';
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(90deg, transparent, rgba(255,255,255,0.2), transparent);
  transition: left 0.5s;
}

.btn:hover::before {
  left: 100%;
}

.btn:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 25px rgba(0,0,0,0.15);
}

.btn.primary:hover {
  background: linear-gradient(135deg, #007bff, #0056b3);
}

/* Enhanced input focus effects */
.input:focus {
  transform: scale(1.02);
  box-shadow: 0 0 0 3px rgba(0,123,255,0.25);
}

/* Card hover effects */
.card {
  transition: all 0.3s ease;
}

.card:hover {
  transform: translateY(-5px);
  box-shadow: 0 15px 35px rgba(0,0,0,0.1);
}

    *,*::before,*::after{box-sizing:border-box}
    html,body{margin:0;padding:0;background:var(--bg);color:var(--text);font-family:Inter,system-ui,Segoe UI,Roboto,Helvetica,Arial,sans-serif;line-height:1.6}
    html{scroll-behavior:smooth}
    img{max-width:100%;display:block}
    a{color:inherit;text-decoration:none}
    .wrap{max-width:var(--maxw);margin:0 auto;padding:0 20px}
    .muted{color:var(--muted)}
    .hidden{display:none}

    /* Kad je modal otvoren: zaključa body (nema skrola) */
    body.modal-open { 
      overflow: hidden !important; 
    }

    /* ===== BACKGROUND IMAGE ANIMATIONS ===== */
    @keyframes backgroundFadeIn {
      0% {
        opacity: 0;
        transform: scale(1.05);
      }
      100% {
        opacity: 1;
        transform: scale(1);
      }
    }

    @keyframes contentSlideUp {
      0% {
        opacity: 0;
        transform: translateY(30px);
      }
      100% {
        opacity: 1;
        transform: translateY(0);
      }
    }

    /* Mobile-optimized animations */
    @media (max-width: 768px) {
      @keyframes backgroundFadeIn {
        0% {
          opacity: 0;
          transform: scale(1.02);
        }
        100% {
          opacity: 1;
          transform: scale(1);
        }
      }

      @keyframes contentSlideUp {
        0% {
          opacity: 0;
          transform: translateY(20px);
        }
        100% {
          opacity: 1;
          transform: translateY(0);
        }
      }
    }

    /* Background image sections */
    #sauna, #clanarine, #raspored {
      background-attachment: fixed;
      background-position: center;
      background-repeat: no-repeat;
      background-size: cover;
      position: relative;
      overflow: hidden;
    }

    /* Mobile: disable background-attachment for better performance */
    @media (max-width: 768px) {
      #sauna, #clanarine, #raspored {
        background-attachment: scroll;
      }
    }

    /* Background animation layer */
    #sauna::before, #clanarine::before, #raspored::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background-image: inherit;
      background-size: inherit;
      background-position: inherit;
      background-repeat: inherit;
      opacity: 0;
      transform: scale(1.05);
      transition: all 1.5s ease-out;
      z-index: 0;
      /* GPU acceleration for smooth animations */
      will-change: transform, opacity;
      transform-style: preserve-3d;
    }

    /* Mobile: faster transitions */
    @media (max-width: 768px) {
      #sauna::before, #clanarine::before, #raspored::before {
        transform: scale(1.02);
        transition: all 0.8s ease-out;
      }
    }

    /* Background reveal animation */
    #sauna.animate-bg::before, 
    #clanarine.animate-bg::before, 
    #raspored.animate-bg::before {
      opacity: 1;
      transform: scale(1);
      animation: backgroundFadeIn 1.5s ease-out forwards;
    }

    /* Mobile: faster animation */
    @media (max-width: 768px) {
      #sauna.animate-bg::before, 
      #clanarine.animate-bg::before, 
      #raspored.animate-bg::before {
        animation: backgroundFadeIn 0.8s ease-out forwards;
      }
    }

    /* Content animation */
    #sauna .wrap, #clanarine .wrap, #raspored .wrap {
      opacity: 0;
      transform: translateY(30px);
      transition: all 1s ease-out;
      will-change: transform, opacity;
    }

    /* Mobile: faster content animation */
    @media (max-width: 768px) {
      #sauna .wrap, #clanarine .wrap, #raspored .wrap {
        transform: translateY(20px);
        transition: all 0.6s ease-out;
      }
    }

    #sauna.animate-bg .wrap, 
    #clanarine.animate-bg .wrap, 
    #raspored.animate-bg .wrap {
      opacity: 1;
      transform: translateY(0);
      animation: contentSlideUp 1s ease-out forwards;
    }

    /* Mobile: faster content animation */
    @media (max-width: 768px) {
      #sauna.animate-bg .wrap, 
      #clanarine.animate-bg .wrap, 
      #raspored.animate-bg .wrap {
        animation: contentSlideUp 0.6s ease-out forwards;
      }
    }

    /* ===== MODAL ANIMATIONS ===== */
    @keyframes modalBackdropFade {
      0% {
        opacity: 0;
        backdrop-filter: blur(0);
      }
      100% {
        opacity: 1;
        backdrop-filter: blur(8px);
      }
    }

    @keyframes modalSlideIn {
      0% {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
      100% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
    }

    @keyframes modalSlideOut {
      0% {
        opacity: 1;
        transform: translateY(0) scale(1);
      }
      100% {
        opacity: 0;
        transform: translateY(30px) scale(0.95);
      }
    }

    /* Mobile-optimized modal animations */
    @media (max-width: 768px) {
      @keyframes modalBackdropFade {
        0% {
          opacity: 0;
          backdrop-filter: blur(0);
        }
        100% {
          opacity: 1;
          backdrop-filter: blur(4px);
        }
      }

      @keyframes modalSlideIn {
        0% {
          opacity: 0;
          transform: translateY(20px) scale(0.98);
        }
        100% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
      }

      @keyframes modalSlideOut {
        0% {
          opacity: 1;
          transform: translateY(0) scale(1);
        }
        100% {
          opacity: 0;
          transform: translateY(20px) scale(0.98);
        }
      }
    }

    /* Modal overlay animations */
    .lang-overlay {
      opacity: 0;
      transition: all 0.3s ease-out;
      /* GPU acceleration */
      will-change: opacity, backdrop-filter;
    }

    .lang-overlay.show {
      opacity: 1;
      animation: modalBackdropFade 0.3s ease-out forwards;
    }

    /* Modal card animations */
    .lang-card {
      opacity: 0;
      transform: translateY(30px) scale(0.95);
      transition: all 0.4s ease-out;
      /* GPU acceleration */
      will-change: transform, opacity;
      transform-style: preserve-3d;
    }

    .lang-overlay.show .lang-card {
      opacity: 1;
      transform: translateY(0) scale(1);
      animation: modalSlideIn 0.4s ease-out forwards;
    }

    /* Mobile: faster modal animations */
    @media (max-width: 768px) {
      .lang-overlay {
        transition: all 0.2s ease-out;
      }

      .lang-overlay.show {
        animation: modalBackdropFade 0.2s ease-out forwards;
      }

      .lang-card {
        transform: translateY(20px) scale(0.98);
        transition: all 0.25s ease-out;
      }

      .lang-overlay.show .lang-card {
        animation: modalSlideIn 0.25s ease-out forwards;
      }
    }

    /* Modal close animation */
    .lang-overlay.closing .lang-card {
      animation: modalSlideOut 0.3s ease-in forwards;
    }

    .lang-overlay.closing {
      animation: modalBackdropFade 0.3s ease-in reverse forwards;
    }

    /* Mobile: faster close animations */
    @media (max-width: 768px) {
      .lang-overlay.closing .lang-card {
        animation: modalSlideOut 0.2s ease-in forwards;
      }

      .lang-overlay.closing {
        animation: modalBackdropFade 0.2s ease-in reverse forwards;
      }
    }

    /* Header */
    header{
      position:sticky;top:0;z-index:200;
      background:rgba(15,15,18,.75);backdrop-filter:blur(8px);
      border-bottom:1px solid rgba(255,255,255,.06);
      transition: transform .55s ease-in-out, background .2s ease;
    }
    header.hide{ transform: translateY(-100%); }

    .nav{position:relative;display:flex;align-items:center;justify-content:space-between;padding:14px 0;}
    .brand{display:flex;align-items:center;gap:12px;font-weight:800;letter-spacing:.6px;cursor:pointer}
    .menu{position:absolute;left:50%;transform:translateX(-50%);display:flex;gap:18px;}
    .menu a{opacity:.9;position:relative;transition:color .5s ease}
    .menu a:hover{color:var(--brand)}
    .menu a.active{color:var(--brand)}
    .menu a.active::after{content:"";position:absolute;left:0;right:0;bottom:-6px;height:2px;background:var(--brand);}

    /* Lang switch (flags) */
    .lang-switch{display:flex;align-items:center;gap:8px;}
    .flag-mini{
      width:40px;height:40px;display:inline-flex;align-items:center;justify-content:center;
      border:1px solid rgba(255,255,255,.18); border-radius:8px; padding:6px; background:#121216;
      transition:transform .12s ease, border-color .2s ease; user-select:none; cursor:pointer;
    }
    .flag-mini:hover{transform:translateY(-1px);border-color:rgba(255,255,255,.28)}
    .flag-mini.active{border-color:var(--brand)}
    .flag-mini img{height:25px;width:25px;object-fit:cover;border-radius:4px}

    /* Burger */
    .burger{display:none;align-items:center;justify-content:center;width:44px;height:44px;border:1px solid rgba(255,255,255,.12);border-radius:10px;cursor:pointer;background:#121216;margin-left:8px;}
    .burger span, .burger span::before, .burger span::after{content:"";display:block;height:2px;background:#fff;border-radius:1px;width:20px;position:relative}
    .burger span::before{position:absolute;top:-6px;width:20px}
    .burger span::after{position:absolute;top:6px;width:20px}

    /* Drawer */
    .mobile-drawer{position:fixed;inset:0 0 0 auto;width:min(86vw,360px);background:rgba(15,15,18,.98);transform:translateX(100%);transition:transform .4s ease, opacity .4s ease;z-index:300;display:flex;flex-direction:column;border-left:1px solid rgba(255,255,255,.08); opacity:0}
    .mobile-drawer.open{transform:none; opacity:1}
    .mobile-drawer .top{display:flex;align-items:center;justify-content:space-between;padding:14px 16px;border-bottom:1px solid rgba(255,255,255,.08)}
    .mobile-drawer nav{display:flex;flex-direction:column;padding:10px}
    .mobile-drawer a{padding:14px 12px;border-radius:10px;transition:background .5s ease;color:#f4f5f6 !important;text-decoration:none !important;}
    .mobile-drawer a:hover{background:#1a1a1f;color:#f4f5f6 !important;text-decoration:none !important;}
    .mobile-drawer a:visited{color:#f4f5f6 !important;text-decoration:none !important;}
    .mobile-drawer a:active{color:#f4f5f6 !important;text-decoration:none !important;}
    .mobile-drawer a:link{color:#f4f5f6 !important;text-decoration:none !important;}
    
    /* Dodatni specifični selektor za mobilni drawer linkove */
    aside.mobile-drawer nav a.nav-link.mlink{color:#f4f5f6 !important;text-decoration:none !important;}
    aside.mobile-drawer nav a.nav-link.mlink:hover{color:#f4f5f6 !important;text-decoration:none !important;}
    aside.mobile-drawer nav a.nav-link.mlink:visited{color:#f4f5f6 !important;text-decoration:none !important;}
    aside.mobile-drawer nav a.nav-link.mlink:active{color:#f4f5f6 !important;text-decoration:none !important;}
    aside.mobile-drawer nav a.nav-link.mlink:link{color:#f4f5f6 !important;text-decoration:none !important;}
    .drawer-overlay{position:fixed;inset:0;background:rgba(0,0,0,.35);backdrop-filter:blur(2px);opacity:0;pointer-events:none;transition:opacity .2s ease;z-index:250}
    .drawer-overlay.show{opacity:1;pointer-events:auto}

    /* Hero */
    .hero{position:relative;min-height:82vh;display:grid;place-items:center;overflow:hidden}
    .hero::before{content:"";position:absolute;inset:0;background:url('images/goodlife1.jpeg') center/cover no-repeat;filter:brightness(.45);}
    .hero .inner{position:relative;z-index:1;display:grid;gap:18px;text-align:center;padding:40px 0}
    h1{font-size:clamp(28px,6vw,64px);line-height:1.1;margin:6px 0 0}
    .lead{color:var(--muted);max-width:760px;margin:0 auto}
    .actions{display:flex;gap:12px;justify-content:center;flex-wrap:wrap;margin-top:10px}

    /* Buttons */
    .btn{display:inline-flex;align-items:center;gap:10px;font-weight:700;border-radius:12px;padding:14px 18px;border:1px solid rgba(255,255,255,.12);transition:background .7s ease, color .7s ease, transform .7s ease;cursor:pointer;-webkit-appearance:none;appearance:none;background:#121216;color:var(--text);}
    .btn:hover{background:#1a1a1f;color:var(--text);}
    .btn.primary{background:var(--brand) !important;border-color:transparent !important;color:#fff !important}
    .btn.primary:hover{background:var(--brand-2) !important;color:#fff !important}
    .btn.primary:focus{color:#fff !important}
    .btn.primary:active{color:#fff !important}
    .btn.primary:visited{color:#fff !important}
    
    /* Specific button element styles for mobile */
    button.btn.primary{color:#fff !important;background:var(--brand) !important}
    button.btn.primary:hover{color:#fff !important;background:var(--brand-2) !important}
    button.btn.primary:focus{color:#fff !important}
    button.btn.primary:active{color:#fff !important}
    
    .btn:active{transform:scale(.98)}

    /* Sections fade-in */
    section{padding:72px 0;border-top:1px solid rgba(255,255,255,.06);opacity:0;transform:translateY(8px);transition:opacity 1.2s ease, transform 1.2s ease;}
    section.show{opacity:1;transform:none;}

    .k-grid{display:grid;grid-template-columns:repeat(3,1fr);gap:18px;align-items:start}
    .card{background:var(--card);border:1px solid rgba(255,255,255,.06);border-radius:var(--radius);padding:24px;box-shadow:var(--shadow)}
    .program{display:grid;grid-template-columns:1fr 1.2fr;gap:28px;align-items:center}
    .program .img{border-radius:var(--radius);overflow:hidden;border:1px solid rgba(255,255,255,.08)}
    .coaches{display:grid;grid-template-columns:repeat(4,1fr);gap:18px}
    .coach{overflow:hidden;padding:0}
    .coach img{aspect-ratio:4/5;object-fit:cover}
    .coach .info{padding:16px}
    table{width:100%;border-collapse:collapse;border:1px solid rgba(255,255,255,.08);overflow:hidden;border-radius:var(--radius)}
    th,td{padding:14px;border-bottom:1px solid rgba(255,255,255,.06);text-align:left}
    th{background:#19191e}
    .pricing{display:grid;grid-template-columns:repeat(3,1fr);gap:18px}
    .price{padding:28px}
    .price .tag{font-size:38px;font-weight:900}
    .quote{display:block}
    .quote p{word-wrap:break-word;white-space:pre-wrap;line-height:1.5;transition:max-height 0.3s ease;overflow-wrap:break-word;hyphens:auto;word-break:break-word;margin:0 0 8px 0}
    .quote p.long-text{position:relative}
    .quote p.long-text.expanded::after{opacity:0}
    .quote p.long-text::after{content:"";position:absolute;bottom:0;left:0;right:0;height:20px;background:linear-gradient(transparent, var(--card));pointer-events:none;transition:opacity 0.3s ease}
    .testimonial-card{min-height:auto;height:auto;padding:20px;padding-bottom:40px;display:block}
    .testimonial-author{text-align:right;font-size:13px;color:var(--muted);margin-top:8px;opacity:0.8;position:absolute;bottom:8px;right:20px}
    .read-more-btn{background:none;border:none;color:var(--brand);cursor:pointer;font-size:14px;padding:4px 0;text-decoration:underline;margin-top:8px}
    .read-more-btn:hover{color:var(--brand-2)}
    .contact{display:grid;grid-template-columns:1.1fr 1fr;gap:28px}
    .field{display:grid;gap:6px}
    .input, select, textarea{background:#121216;border:1px solid rgba(255,255,255,.12);border-radius:10px;padding:12px;color:var(--text);font-size:16px;}
    textarea{min-height:120px}
    .small{font-size:12px;color:var(--muted)}
    .status{margin-top:8px;font-size:14px}
    footer{padding:28px 0;color:var(--muted)}
    footer .row{display:flex;justify-content:space-between;align-items:center;gap:16px;flex-wrap:wrap}

    .table-scroll{overflow:auto;-webkit-overflow-scrolling:touch}
    .contact-line{display:inline-flex;align-items:center;gap:6px;white-space:nowrap}

    /* Language modal */
    .lang-overlay{position:fixed;inset:0;display:flex;align-items:center;justify-content:center;z-index:1000;opacity:0;pointer-events:none;transition:opacity .4s ease;}
    .lang-overlay.show{opacity:1;pointer-events:auto;}
    .lang-overlay.fade-out{opacity:0;pointer-events:none;}
    
    /* Video Background */
    .lang-video-bg{position:absolute;inset:0;overflow:hidden;}
    .lang-video-bg video{width:100%;height:100%;object-fit:cover;filter:blur(3px) brightness(0.4);transform:scale(1.05);}
    
    /* Mobile video adjustments */
    @media (max-width: 768px) {
      .lang-video-bg video{
        object-fit: cover;
        object-position: 25% center;
        transform: scale(1.1);
        filter: blur(2px) brightness(0.5);
      }
    }
    
    /* Small mobile video adjustments */
    @media (max-width: 480px) {
      .lang-video-bg video{
        object-position: 20% 30%;
        transform: scale(1.2);
        filter: blur(1px) brightness(0.6);
      }
    }
    .lang-video-overlay{position:absolute;inset:0;background:linear-gradient(135deg,rgba(0,0,0,0.5) 0%,rgba(0,0,0,0.3) 50%,rgba(0,0,0,0.6) 100%);backdrop-filter:blur(1px);}
    
    .lang-card{width:min(92vw,520px);background:rgba(20,20,24,0.95);border:1px solid rgba(255,255,255,.15);border-radius:24px;padding:32px;box-shadow:0 25px 50px rgba(0,0,0,0.5),0 0 0 1px rgba(255,255,255,0.05);text-align:center;transform:translateY(20px) scale(0.95);transition:all .4s cubic-bezier(0.34, 1.56, 0.64, 1);backdrop-filter:blur(10px);position:relative;z-index:1;}
    .lang-overlay.show .lang-card{transform:translateY(0) scale(1);}
    .lang-overlay.fade-out .lang-card{transform:translateY(20px) scale(0.95);}
    .flag-grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:20px}
    .flag-btn{display:flex;flex-direction:column;align-items:center;justify-content:center;gap:12px;border:1px solid rgba(255,255,255,.15);border-radius:16px;padding:24px;cursor:pointer;background:rgba(25,26,31,0.8);transition:all .3s cubic-bezier(0.34, 1.56, 0.64, 1);user-select:none;backdrop-filter:blur(5px);position:relative;overflow:hidden;}
    .flag-btn::before{content:'';position:absolute;inset:0;background:linear-gradient(135deg,rgba(255,255,255,0.1) 0%,transparent 50%,rgba(255,255,255,0.05) 100%);opacity:0;transition:opacity .3s ease;}
    .flag-btn:hover{transform:translateY(-4px) scale(1.02);border-color:rgba(255,255,255,.3);box-shadow:0 10px 25px rgba(0,0,0,0.3);}
    .flag-btn:hover::before{opacity:1;}
    .flag-btn:active{transform:translateY(-2px) scale(1.01);}
    .flag-btn img{width:56px;height:56px;border-radius:50%;object-fit:cover;border:2px solid rgba(255,255,255,0.1);transition:border-color .3s ease;}
    .flag-btn:hover img{border-color:rgba(255,255,255,0.3);}
    .flag-btn div:last-child{font-size:15px;color:var(--text);font-weight:600;letter-spacing:0.5px;}
    .lang-card h3{font-size:24px;font-weight:700;color:var(--text);margin:0 0 8px 0;letter-spacing:0.5px;text-shadow:0 2px 4px rgba(0,0,0,0.3);}
    .lang-note{color:var(--muted);font-size:14px;margin-top:16px;line-height:1.5;opacity:0.8;}

    @media (max-width:1024px){
      .k-grid{grid-template-columns:1fr 1fr}
      .program{grid-template-columns:1fr}
      .coaches{grid-template-columns:1fr 1fr}
      .pricing{grid-template-columns:1fr}
      .contact{grid-template-columns:1fr}
      
      /* Language modal mobile */
      .lang-card{width:min(95vw,400px);padding:24px;}
      .lang-card h3{font-size:20px;}
      .flag-btn{padding:20px;}
      .flag-btn img{width:48px;height:48px;}
      
      /* Sauna modal tablet optimizations */
      .modal-dialog {
        margin: 20px;
        max-width: calc(100vw - 40px);
      }
      
      .time-slots-grid {
        grid-template-columns: repeat(3, 1fr);
        gap: 10px;
      }
      
      .time-slot {
        padding: 12px 8px;
        font-size: 14px;
        min-height: 48px;
      }
    }
    @media (max-width:720px){
      .menu{display:none;position:static;transform:none;}
      .burger{display:inline-flex}
      .k-grid{grid-template-columns:1fr}
      
      /* Language modal small mobile */
      .lang-card{width:min(98vw,350px);padding:20px;}
      .lang-card h3{font-size:18px;}
      .flag-grid{gap:12px;margin-top:16px;}
      .flag-btn{padding:16px;gap:8px;}
      .flag-btn img{width:40px;height:40px;}
      .flag-btn div:last-child{font-size:13px;}
      .lang-note{font-size:12px;margin-top:12px;}
      
      /* Sauna modal medium mobile optimizations */
      .modal-dialog {
        margin: 15px;
        max-width: calc(100vw - 30px);
      }
      
      .time-slots-grid {
        grid-template-columns: repeat(2, 1fr);
        gap: 8px;
      }
      
      .time-slot {
        padding: 11px 7px;
        font-size: 13px;
        min-height: 46px;
      }
    }

    /* ====== CAROUSEL (jedan prozor) ====== */
    #transformacije .grid-top{display:flex;align-items:baseline;justify-content:space-between;gap:12px;margin-bottom:14px}
    #transformacije h2{margin:0}

    .x-viewport{
      position:relative; overflow:hidden;
      border-radius:var(--radius);
      border:1px solid rgba(255,255,255,.06);
      box-shadow:var(--shadow);
      background:var(--card);
      aspect-ratio: 16/9;
      /* spriječi skrolanje stranice dok swipe-aš */
      touch-action: none;
      -webkit-user-select:none; user-select:none;
    }
    .x-track{ display:flex; width:100%; height:100%; transform:translateX(0%); transition: transform .45s ease; will-change: transform; }
    .x-item{ min-width:100%; height:100%; }
    .x-item img{ width:100%; height:100%; object-fit:cover; display:block; }

    .x-nav{display:none}
    @media(min-width:1024px){ .x-nav{display:flex; gap:10px; align-items:center} }

    .x-btn{
      display:inline-flex;align-items:center;justify-content:center;
      width:42px;height:42px;border-radius:999px;border:1px solid rgba(255,255,255,.12);
      background:#121216;cursor:pointer;transition:background .2s ease, border-color .2s ease, opacity .2s ease;
    }
    /* hover bez "skakanja" */
    .x-btn:hover{border-color:rgba(255,255,255,.22);background:#17171c;opacity:.95}
    .x-btn:active{opacity:.9}
    .x-btn svg{width:18px;height:18px}

    .x-abs{position:absolute;top:50%;transform:translateY(-50%);z-index:5;opacity:.92}
    .x-left{left:10px}
    .x-right{right:10px}

    /* HINT — samo na mobitelu */
    /* HINT — samo na mobitelu */
.swipe-hint{
  position:absolute; left:50%; top:50%; transform:translate(-50%,-50%);
  display:none;                /* desktop: skriven */
  align-items:center; gap:8px; padding:8px 12px;
  font-size:14px; color:#fff; text-shadow:0 1px 2px rgba(0,0,0,.6);
  background:rgba(0,0,0,.35);
  border:1px solid rgba(255,255,255,.12); border-radius:999px;
  user-select:none; pointer-events:none;
  animation:pulse 1.2s ease-in-out infinite, floaty 2.6s ease-in-out infinite;
  opacity:1; transition:opacity .35s ease;      /* za fade-out */
  z-index: 6;                                    /* iznad strelica (koje su z-index:5) */
}
@media (max-width: 720px){
  .swipe-hint{ display:flex; }                   /* mobitel: prikaži */
  .quote p{max-height:100px}                     /* mobitel: kraća visina */
}
/* blagi fade-out kad se gasi */
.swipe-hint.fade-out{ opacity:0; }

@keyframes pulse{ 0%{opacity:.55} 50%{opacity:1} 100%{opacity:.55} }
@keyframes floaty{ 0%{transform:translate(-50%,-50%) translateY(0)}
                   50%{transform:translate(-50%,-50%) translateY(-3px)}
                   100%{transform:translate(-50%,-50%) translateY(0)} }
  
.hint-fadeout {
  animation: hintFadeOut 2s ease forwards;
}

@keyframes hintFadeOut {
  from { opacity:1; }
  to { opacity:0; visibility:hidden; }
}

/* Modal fade effects */
.modal {
  opacity: 0;
  visibility: hidden;
  transition: opacity 0.3s ease, visibility 0.3s ease;
}

.modal.show {
  opacity: 1;
  visibility: visible;
}

.modal .lang-card {
  transform: translateY(-20px);
  transition: transform 0.3s ease;
}

.modal.show .lang-card {
  transform: translateY(0);
}

/* Form submission loading effect */
.form-loading {
  position: relative;
  pointer-events: none;
}

.form-loading::after {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: rgba(255, 255, 255, 0.8);
  display: flex;
  align-items: center;
  justify-content: center;
  z-index: 1000;
}

.form-loading::before {
  content: '';
  position: absolute;
  top: 50%;
  left: 50%;
  width: 20px;
  height: 20px;
  margin: -10px 0 0 -10px;
  border: 2px solid #f3f3f3;
  border-top: 2px solid #007bff;
  border-radius: 50%;
  animation: spin 1s linear infinite;
  z-index: 1001;
}

@keyframes spin {
  0% { transform: rotate(0deg); }
  100% { transform: rotate(360deg); }
}

/* Enhanced testimonial cards */
.testimonial-card {
  opacity: 0;
  transform: translateY(20px);
  animation: testimonialFadeIn 0.6s ease forwards;
  transition: all 0.3s ease;
}

.testimonial-card:hover {
  transform: translateY(-5px);
  box-shadow: 0 10px 30px rgba(0,0,0,0.1);
}

@keyframes testimonialFadeIn {
  to { opacity: 1; transform: translateY(0); }
}

/* Enhanced time slot selection */
.time-slot {
  transition: all 0.3s ease;
  cursor: pointer;
}

.time-slot:hover {
  transform: scale(1.05);
  box-shadow: 0 5px 15px rgba(0,0,0,0.2);
}

.time-slot.selected {
  transform: scale(1.1);
  box-shadow: 0 8px 25px rgba(0,123,255,0.3);
}

/* Enhanced error messages */
.error-msg {
  animation: errorSlideIn 0.3s ease;
}

@keyframes errorSlideIn {
  from {
    opacity: 0;
    transform: translateY(-10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

/* Success animation */
.success-animation {
  animation: successPulse 0.6s ease;
}

@keyframes successPulse {
  0% { transform: scale(1); }
  50% { transform: scale(1.05); }
  100% { transform: scale(1); }
}

/* Character counter */
.char-counter {
  font-size: 12px; color: var(--muted); margin-top: 4px;
  text-align: right;
}
.char-counter.warning { color: #ff9800; }
.char-counter.error { color: #f44336; }

/* Intl-tel-input stilovi uklonjeni */

/* Time slots grid */
.time-slots-grid {
  display: grid;
  grid-template-columns: repeat(3, 1fr);
  gap: 8px;
  margin-top: 8px;
}

.time-slot {
  padding: 12px 8px;
  border: 1px solid rgba(255,255,255,.12);
  border-radius: 8px;
  background: #121216;
  color: var(--text);
  text-align: center;
  cursor: pointer;
  transition: all 0.2s ease;
  font-size: 14px;
  font-weight: 500;
}

.time-slot:hover {
  background: #1a1a1f;
  border-color: rgba(255,255,255,.22);
}

.time-slot.selected {
  background: var(--brand);
  border-color: var(--brand);
  color: #fff;
}

.time-slot.booked {
  background: #2a2a2a;
  border-color: #444;
  color: #666;
  cursor: not-allowed;
  opacity: 0.6;
}

.time-slot.booked:hover {
  background: #2a2a2a;
  border-color: #444;
}

@media (max-width: 480px) {
  .time-slots-grid {
    grid-template-columns: repeat(2, 1fr);
  }
  
  .time-slot {
    padding: 10px 6px;
    font-size: 13px;
    min-height: 44px; /* Better touch target */
  }
  
  /* Sauna modal mobile optimizations */
  .modal-dialog {
    margin: 10px;
    max-width: calc(100vw - 20px);
  }
  
  .modal-content {
    border-radius: 16px;
  }
  
  .modal-body {
    padding: 20px;
  }
  
  .form-control {
    font-size: 16px; /* Prevent zoom on iOS */
    padding: 12px;
  }
  
  .btn {
    min-height: 44px; /* Better touch target */
    font-size: 16px;
  }
}

/* Trainer field fade animation */
#trenerField {
  transition: opacity 0.8s ease, transform 0.8s ease, max-height 0.8s ease;
  overflow: hidden;
  max-height: 0; /* Početno stanje - sakriveno */
  opacity: 0;
  transform: translateY(-10px);
  margin-top: 0 !important;
  padding-top: 0;
  padding-bottom: 0;
}

#trenerField:not(.hidden) {
  opacity: 1;
  transform: translateY(0);
  max-height: 200px;
  margin-top: 10px !important;
  padding-top: 0;
  padding-bottom: 0;
  transition: opacity 0.8s ease, transform 0.8s ease, max-height 0.8s ease;
}

#trenerField.hidden {
  opacity: 0;
  transform: translateY(-10px);
  max-height: 0;
  margin-top: 0 !important;
  padding-top: 0;
  padding-bottom: 0;
}

/* FORSIRANJE BIJELE BOJE ZA MOBILNI DRAWER - FINALNO RJEŠENJE */
.mobile-drawer a, 
.mobile-drawer a:link, 
.mobile-drawer a:visited, 
.mobile-drawer a:hover, 
.mobile-drawer a:active {
  color: #ffffff !important;
  text-decoration: none !important;
}

aside.mobile-drawer nav a, 
aside.mobile-drawer nav a:link, 
aside.mobile-drawer nav a:visited, 
aside.mobile-drawer nav a:hover, 
aside.mobile-drawer nav a:active {
  color: #ffffff !important;
  text-decoration: none !important;
}

/* GUMB ZATVORI U MOBILNOM DRAWER-U */
.mobile-drawer .btn,
.mobile-drawer button.btn,
#drawerClose {
  color: #ffffff !important;
  background: var(--brand) !important;
  border: 0 !important;
}

/* ANIMACIJA ZA TRAKU S ISKUSTVIMA */
@keyframes scrollTestimonials {
  0% { transform: translateX(0); }
  100% { transform: translateX(-50%); }
}

/* VERTIKALNA ANIMACIJA ZA MOBILNI */
@keyframes scrollTestimonialsVertical {
  0% { transform: translateY(0); }
  100% { transform: translateY(-50%); }
}

.testimonials-track {
  white-space: nowrap;
  cursor: default;
  user-select: none;
  -webkit-user-select: none;
  -moz-user-select: none;
  -ms-user-select: none;
  pointer-events: none;
  animation-play-state: running !important;
  animation-fill-mode: none !important;
  animation-iteration-count: infinite !important;
  animation-timing-function: linear !important;
  animation-direction: normal !important;
  animation-delay: 0s !important;
  will-change: transform;
  transform: translateZ(0);
  backface-visibility: hidden;
}

/* Smooth scrolling for manual interaction */
.testimonials-track-container {
  scroll-behavior: smooth;
  overflow: hidden;
}

.testimonial-item {
  display: inline-block;
  min-width: 250px;
  background: rgba(255,255,255,.03);
  border: 1px solid rgba(255,255,255,.08);
  border-radius: 12px;
  padding: 16px;
  margin-right: 15px;
  flex-shrink: 0;
}

.testimonial-item p {
  margin: 0 0 8px 0;
  font-style: italic;
  color: var(--text);
}

.testimonial-item .author {
  font-size: 14px;
  color: var(--muted);
  text-align: right;
}

/* ===== DISABLED OPTIONS STYLES ===== */
select option:disabled {
  background-color: #333 !important;
  color: #666 !important;
  opacity: 0.5;
}

select option:disabled:hover {
  background-color: #333 !important;
  color: #666 !important;
}

/* ===== CUSTOM VALIDATION STYLES ===== */
.field {
  position: relative;
  margin-bottom: 16px;
}

.error-msg {
  display: none;
  position: relative;
  margin-top: 8px;
  padding: 10px 12px;
  border-radius: 10px;
  background: #ff4d4f;
  color: #fff;
  font-size: 14px;
  line-height: 1.3;
}

.error-msg::before {
  content: "";
  position: absolute;
  top: -6px;
  left: 16px;
  border-width: 6px;
  border-style: solid;
  border-color: transparent transparent #ff4d4f transparent;
}

.field.invalid input,
.field.invalid textarea,
.field.invalid select {
  border-color: #ff4d4f !important;
  outline: none;
}

.field.invalid .error-msg {
  display: block;
}

/* RESPONSIVE - MOBILNI DIZAJN */
@media (max-width: 720px) {
  .testimonials-track-container {
    overflow: hidden !important;
    padding: 0 !important;
    height: 300px !important;
    position: relative !important;
  }
  
  .testimonials-track {
    display: block !important;
    white-space: normal !important;
    height: auto !important;
    position: relative !important;
  }
  
  .testimonial-item {
    display: block !important;
    min-width: auto !important;
    width: 100% !important;
    margin-right: 0 !important;
    margin-bottom: 12px !important;
    flex-shrink: 1 !important;
    height: 90px !important;
    position: relative !important;
  }
  
  .testimonial-item:last-child {
    margin-bottom: 0 !important;
  }
}

  </style>
</head>
<body>
  <!-- MODAL: language picker -->
  <div id="langModal" class="lang-overlay" aria-hidden="true">
    <!-- Video Background -->
    <div class="lang-video-bg">
      <video autoplay muted loop playsinline>
        <source src="images/videoteretana.mp4" type="video/mp4">
      </video>
      <div class="lang-video-overlay"></div>
    </div>
    
    <div class="lang-card">
      <h3>Odaberi jezik / Choose language</h3>
      <div class="flag-grid">
        <button class="flag-btn" data-lang="hr" aria-label="Hrvatski">
          <img src="images/hrv.png" alt="Hrvatski"><div>Hrvatski</div>
        </button>
        <button class="flag-btn" data-lang="en" aria-label="English">
          <img src="images/uk.png" alt="English"><div>English</div>
        </button>
      </div>
      <div class="lang-note">
        Kasnije možeš promijeniti preko zastavica u zaglavlju.<br>
        You can change it later via the flags in the header.
      </div>
    </div>
  </div>

  <!-- MODAL: dodaj iskustvo -->
  <div id="testimonialModal" class="lang-overlay" aria-hidden="true">
    <div class="lang-card">
      <h3 data-i18n="testimonials.modal.title">Podijeli svoje iskustvo</h3>
      <form id="testimonialForm" novalidate>
        <div class="field" style="margin-top:16px">
          <label data-i18n="testimonials.modal.name">Ime i Prezime *</label>
          <input type="text" id="testimonialName" class="input" placeholder="Npr. Marko Marić" data-i18n-placeholder="form.name.ph" oninput="capitalizeWords(this);" required data-error="validation.name" />
          <div class="error-msg" aria-live="polite"></div>
        </div>
        <div class="field" style="margin-top:12px">
          <label data-i18n="testimonials.modal.experience">Tvoje iskustvo *</label>
          <textarea id="testimonialText" class="input" placeholder="Podijeli svoje iskustvo s GoodLife..." data-i18n-placeholder="testimonials.modal.experience.ph" style="min-height:100px" maxlength="150" oninput="capitalizeFirstLetter(this);" required data-error="validation.experience"></textarea>
          <div class="char-counter" id="charCounter">0/150</div>
          <div class="error-msg" aria-live="polite"></div>
        </div>
        <div style="display:flex;gap:10px;margin-top:16px">
          <button type="submit" class="btn primary" data-i18n="testimonials.modal.submit">Pošalji</button>
          <button type="button" class="btn close-modal" id="closeTestimonialModal" data-close data-i18n="testimonials.modal.cancel">Odustani</button>
        </div>
      </form>
    </div>
  </div>

  <header id="siteHeader">
    <div class="wrap nav">
      <div class="brand" id="logoBtn" title="Početna">
        <img src="images/goodlifelogo.png" alt="Good Life logo" style="height:85px;" />
      </div>

      <nav class="menu">
        <a href="#pocetna" class="nav-link" data-i18n="nav.home">Početna</a>
        <a href="#onama" class="nav-link" data-i18n="nav.about">O nama</a>
        <a href="#paketi" class="nav-link" data-i18n="nav.packages">Paketi</a>
        <a href="#clanarine" class="nav-link" data-i18n="nav.memberships">Članarine</a>
        <a href="#sauna" class="nav-link" data-i18n="nav.sauna">Sauna</a>
        <a href="#kontakt" class="nav-link" data-i18n="nav.contact">Kontakt</a>
      </nav>

      <div style="display:flex;align-items:center;gap:8px">
        <div class="lang-switch">
          <button class="flag-mini" id="langHR" title="Hrvatski"><img src="images/hrv.png" alt="Hrvatski"></button>
          <button class="flag-mini" id="langEN" title="English"><img src="images/uk.png" alt="English"></button>
        </div>
        <button class="burger" aria-label="Izbornik" aria-expanded="false"><span></span></button>
      </div>
    </div>
  </header>

  <!-- Drawer + overlay -->
  <div class="drawer-overlay" id="drawerOverlay"></div>
  <aside class="mobile-drawer" id="drawer" aria-hidden="true">
    <div class="top">
      <strong data-i18n="menu.title">Izbornik</strong>
      <button id="drawerClose" class="btn" style="padding:8px 12px;background:var(--brand);border:0;border-radius:10px;color:#ffffff !important;" data-i18n="menu.close">Zatvori</button>
    </div>
    <nav>
      <a href="#pocetna" class="nav-link mlink" data-i18n="nav.home">Početna</a>
      <a href="#onama" class="nav-link mlink" data-i18n="nav.about">O nama</a>
      <a href="#paketi" class="nav-link mlink" data-i18n="nav.packages">Paketi</a>
      <a href="#clanarine" class="nav-link mlink" data-i18n="nav.memberships">Članarine</a>
      <a href="#sauna" class="nav-link mlink" data-i18n="nav.sauna">Sauna</a>
      <a href="#kontakt" class="nav-link mlink" data-i18n="nav.contact">Kontakt</a>
    </nav>
  </aside>

  <section class="hero show" id="pocetna">
    <div class="inner wrap">
      <h1 style="margin-top:20px;" data-i18n="hero.title">Ostvari svoj potencijal — živi Good Life!</h1>
      <p class="lead" data-i18n="hero.lead">Postigni svoje fitness ciljeve uz vrhunske trenere i moderan program treninga.</p>
      <div class="actions">
        <a class="btn primary nav-link" href="#paketi" data-i18n="hero.btn.packages">Pogledaj pakete</a>
        <a class="btn nav-link" href="#kontakt" data-i18n="hero.btn.contact">Kontaktiraj nas</a>
      </div>
    </div>
  </section>

  <section id="onama">
    <div class="wrap">
      <h2 data-i18n="about.title">O nama</h2>
      <p class="muted" data-i18n="about.text">GoodLife Fitness centar u Posušju nije samo obična teretana — to je mjesto gdje zajednica ljudi s istim ciljem radi zajedno na zdravlju i napretku. Naši treneri kreiraju individualne programe prilagođene tvom cilju: gubitku kilograma, povećanju mišićne mase, jačanju kondicije ili rehabilitaciji nakon ozljeda. Nudimo stručne savjete o prehrani, redovito praćenje napretka te prijateljsku atmosferu u kojoj ćeš pronaći dodatnu motivaciju.</p>
    </div>
  </section>

  <section id="benefiti">
    <div class="wrap">
      <div class="k-grid">
        <div class="card"><h3 data-i18n="benefit.1.title">🎯 1-na-1 coaching</h3><p class="muted" data-i18n="benefit.1.text">Individualni pristup, jasni ciljevi i mjerljivi rezultati.</p></div>
        <div class="card"><h3 data-i18n="benefit.2.title">🏋️‍♀️ Funkcionalni treninzi</h3><p class="muted" data-i18n="benefit.2.text">Snaga, mobilnost i kardio za maksimalan učinak.</p></div>
        <div class="card"><h3 data-i18n="benefit.3.title">📈 Praćenje napretka</h3><p class="muted" data-i18n="benefit.3.text">Mjerenja, fotke napretka i plan prilagođen rezultatima.</p></div>
      </div>
    </div>
  </section>

  <section id="programi">
    <div class="wrap program">
      <div>
        <h2 data-i18n="programs.title">Programi treninga</h2>
        <p class="muted" data-i18n="programs.lead">Svaki plan uključuje procjenu, edukaciju o tehnici i prehranu.</p>
        <div class="k-grid" style="margin-top:12px">
          <div class="card"><h3 data-i18n="programs.weightloss">Mršavljenje</h3><p class="muted" data-i18n="programs.weightloss.desc">HIIT + snaga, 3–5x tjedno.</p></div>
          <div class="card"><h3 data-i18n="programs.strength">Snaga & hipertrofija</h3><p class="muted" data-i18n="programs.strength.desc">Periodizacija, složene vježbe, progresija.</p></div>
          <div class="card"><h3 data-i18n="programs.condition">Kondicija & mobilnost</h3><p class="muted" data-i18n="programs.condition.desc">Kružni treninzi, core, mobilnost.</p></div>
        </div>
      </div>
      <div class="img"><img src="images/programs.jpg" alt="Trening u teretani" /></div>
    </div>
  </section>

  <!-- ===== TRANSFORMACIJE: JEDAN PROZOR (CAROUSEL) ===== -->
  <section id="transformacije">
    <div class="wrap">
      <div class="grid-top">
        <div>
          <h2 data-i18n="transforms.title">Rezultati transformacija</h2>
          <p class="muted" data-i18n="transforms.subtitle">Pravi ljudi, pravi rezultati — pomičemo granice zajedno.</p>
        </div>
        <div class="x-nav">
          
        </div>
      </div>

      <div class="x-viewport" id="xViewport" tabindex="0" aria-roledescription="carousel">
        <div class="x-track" id="xSlider">
          <figure class="x-item"><img src="images/slika1.jpeg" alt="Transformacija 1"></figure>
          <figure class="x-item"><img src="images/slika2.jpeg" alt="Transformacija 2"></figure>
          <figure class="x-item"><img src="images/slika3.jpeg" alt="Transformacija 3"></figure>
        </div>

        <!-- apsolutne strelice u viewportu -->
        <button class="x-btn x-abs x-left" id="xPrevAbs" aria-label="Prev">
          <svg viewBox="0 0 24 24" fill="none"><path d="M15 6L9 12L15 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>
        <button class="x-btn x-abs x-right" id="xNextAbs" aria-label="Next">
          <svg viewBox="0 0 24 24" fill="none"><path d="M9 6L15 12L9 18" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
        </button>

        <!-- HINT: samo mobitel, centriran, pulsira dok ne krene listanje (bez palca) -->
        <div class="swipe-hint x-hint-in" id="swipeHint">
          <span data-i18n="transforms.hint">Povuci udesno za više</span>
        </div>
      </div>
    </div>
  </section>
  <!-- ===== /TRANSFORMACIJE ===== -->

  <section id="paketi">
    <div class="wrap">
      <h2 data-i18n="packages.title">Paketi</h2>
      <p class="muted" data-i18n="packages.lead">Odaberi svoj plan — bez skrivenih troškova.</p>
      <div class="pricing" style="margin-top:16px">
        <div class="card price"><h3>Basic</h3><div class="tag">29€ <span data-i18n="pricing.monthly">mjesečno</span></div><p class="muted" data-i18n="packages.basic.desc">2x tjedno, grupni treninzi</p><a class="btn primary nav-link package-btn" href="#kontakt" data-package="Basic" data-i18n="common.start">Kreni</a></div>
        <div class="card price" style="border:2px solid var(--brand)"><h3>Standard</h3><div class="tag">49€ <span data-i18n="pricing.monthly">mjesečno</span></div><p class="muted" data-i18n="packages.standard.desc">3x tjedno + plan</p><a class="btn primary nav-link package-btn" href="#kontakt" data-package="Standard" data-i18n="common.start">Kreni</a></div>
        <div class="card price"><h3>Premium</h3><div class="tag">79€ <span data-i18n="pricing.monthly">mjesečno</span></div><p class="muted" data-i18n="packages.premium.desc">Neograničeno + 1-na-1 mjesečno</p><a class="btn primary nav-link package-btn" href="#kontakt" data-package="Premium" data-i18n="common.start">Kreni</a></div>
      </div>
    </div>
  </section>

  <!-- ČLANARINE -->
  <section id="clanarine" style="background-image: url('images/clanarine.jpeg'); background-size: cover; background-position: center; background-repeat: no-repeat; position: relative;">
    <div style="background: rgba(0,0,0,0.5); position: absolute; inset: 0; z-index: 1;"></div>
    <div class="wrap" style="position: relative; z-index: 2;">
      <h2 data-i18n="memberships.title">Članarine</h2>
      <div class="pricing" style="margin-top:16px">
        <div class="card">
          <h3 data-i18n="memberships.basic">Osnovni paket</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.basic.2x">2x tjedno — <strong>40 KM</strong></li>
            <li data-i18n="m.basic.3x">3x tjedno — <strong>50 KM</strong></li>
            <li data-i18n="m.basic.unl">Neograničeno — <strong>60 KM</strong></li>
            <li data-i18n="m.basic.vip">VIP (neograničeno + sauna) — <strong>100 KM</strong></li>
            <li data-i18n="m.basic.day">Jednodnevni — <strong>7 KM</strong></li>
            <li data-i18n="m.basic.half">Polumjesečni (15 dana) — <strong>35 KM</strong></li>
          </ul>
        </div>
        <div class="card">
          <h3 data-i18n="memberships.students">Srednjoškolci</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.stu.2x">2x tjedno — <strong>25 KM</strong></li>
            <li data-i18n="m.stu.3x">3x tjedno — <strong>35 KM</strong></li>
            <li data-i18n="m.stu.unl">Neograničeno — <strong>45 KM</strong></li>
            <li data-i18n="m.stu.group">Grupni treninzi — <strong>45 KM</strong></li>
            <li data-i18n="m.stu.day">Jednodnevni — <strong>6 KM</strong></li>
          </ul>
        </div>
        <div class="card">
          <h3 data-i18n="memberships.discounts">Popusti</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="m.disc.3m">3 mjeseca — <strong>-10%</strong></li>
            <li data-i18n="m.disc.6m">6 mjeseci — <strong>-20%</strong></li>
            <li data-i18n="m.disc.12m">12 mjeseci — <strong>-30%</strong></li>
            <li data-i18n="m.disc.sto">Trajni nalog (1 godina) — <strong>-20%</strong></li>
          </ul>
        </div>
      </div>

      <div class="card" style="margin-top:16px">
        <h3 data-i18n="memberships.benefits">Posebne pogodnosti</h3>
        <p class="muted" style="margin:0" data-i18n="memberships.benefits.text">Pogodnosti za firme • Obiteljski popusti • Popusti za klubove</p>
      </div>
    </div>
  </section>

  <section id="treneri">
    <div class="wrap">
      <h2 data-i18n="coaches.title">Upoznaj trenere</h2>
      <div class="coaches" style="margin-top:12px">
        <article class="card coach"><img src="images/coach1.jpg" alt="Trener 1" /><div class="info"><h3 style="text-align:center">Ivan</h3></div></article>
        <article class="card coach"><img src="images/coach2.jpg" alt="Trener 2" /><div class="info"><h3 style="text-align:center">Tina</h3></div></article>
        <article class="card coach"><img src="images/coach3.jpg" alt="Trener 3" /><div class="info"><h3 style="text-align:center">Toni</h3></div></article>
        <article class="card coach"><img src="images/coach4.jpg" alt="Trener 4" /><div class="info"><h3 style="text-align:center">Davor</h3></div></article>
      </div>
    </div>
  </section>

  <section id="sauna" style="background-image: url('images/sauna.jpeg'); background-size: cover; background-position: center; background-repeat: no-repeat; position: relative;">
    <div style="background: rgba(0,0,0,0.5); position: absolute; inset: 0; z-index: 1;"></div>
    <div class="wrap" style="position: relative; z-index: 2;">
      <h2 data-i18n="sauna.title">Sauna</h2>
      <p class="muted" data-i18n="sauna.lead">Odmorite se i opustite nakon treninga u našoj modernoj sauni.</p>
      
      <div class="k-grid" style="margin-top:16px">
        <div class="card">
          <h3 data-i18n="sauna.benefits.title">Prednosti saune</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="sauna.benefits.detox">Detoksikacija organizma</li>
            <li data-i18n="sauna.benefits.circulation">Poboljšanje cirkulacije</li>
            <li data-i18n="sauna.benefits.relaxation">Opuštanje mišića</li>
            <li data-i18n="sauna.benefits.recovery">Brže oporavak nakon treninga</li>
            <li data-i18n="sauna.benefits.stress">Smanjenje stresa</li>
            <li data-i18n="sauna.benefits.immunity">Jačanje imuniteta</li>
          </ul>
        </div>
        
        <div class="card">
          <h3 data-i18n="sauna.rules.title">Pravila korištenja</h3>
          <ul class="muted" style="margin:0;padding-left:18px;line-height:1.9">
            <li data-i18n="sauna.rules.time">Maksimalno 15 minuta po sesiji</li>
            <li data-i18n="sauna.rules.towel">Obavezno korištenje ručnika</li>
            <li data-i18n="sauna.rules.hydration">Pijte dovoljno vode</li>
            <li data-i18n="sauna.rules.health">Ne koristite ako imate zdravstvene probleme</li>
            <li data-i18n="sauna.rules.clean">Očistite nakon korištenja</li>
            <li data-i18n="sauna.rules.respect">Poštujte druge korisnike</li>
          </ul>
        </div>
        
        <div class="card">
          <h3 data-i18n="sauna.access.title">Pristup sauni</h3>
          <p class="muted" data-i18n="sauna.access.text">Sauna je dostupna svim članovima VIP paketa i može se rezervirati klikom na "Rezerviraj termin".</p>
          <div style="margin-top:16px">
            <button class="btn primary" id="openSaunaModal" data-open="#saunaModal" data-i18n="sauna.book">Rezerviraj termin</button>
            <button class="btn" id="openCancelModal" data-open="#cancelModal" style="margin-top:8px;margin-left:0;" data-i18n="sauna.cancel">Otkaži rezervaciju</button>
          </div>
        </div>
      </div>
    </div>
  </section>

  <section id="raspored" style="background-image: url('images/rasporedgrupnihtreninga.jpeg'); background-size: cover; background-position: center; background-repeat: no-repeat; position: relative;">
    <div style="background: rgba(0,0,0,0.5); position: absolute; inset: 0; z-index: 1;"></div>
    <div class="wrap" style="position: relative; z-index: 2;">
      <h2 data-i18n="schedule.title">Raspored grupnih treninga</h2>
      <div class="card" style="margin-top:12px">
        <div class="table-scroll">
          <table>
            <thead>
              <tr>
                <th data-i18n="schedule.day">Dan</th>
                <th>07:00</th><th>12:00</th><th>18:00</th><th>20:00</th>
              </tr>
            </thead>
            <tbody>
              <tr>
                <td data-i18n="day.mon">Pon</td>
                <td>HIIT</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td data-i18n="w.full">Full body</td>
              </tr>
              <tr>
                <td data-i18n="day.tue">Uto</td>
                <td data-i18n="w.str">Snaga</td>
                <td>Core</td>
                <td>HIIT</td>
                <td data-i18n="w.cond">Kondicija</td>
              </tr>
              <tr>
                <td data-i18n="day.wed">Sri</td>
                <td data-i18n="w.full">Full body</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td>HIIT</td>
              </tr>
              <tr>
                <td data-i18n="day.thu">Čet</td>
                <td data-i18n="w.str">Snaga</td>
                <td>Core</td>
                <td data-i18n="w.cond">Kondicija</td>
                <td data-i18n="w.full">Full body</td>
              </tr>
              <tr>
                <td data-i18n="day.fri">Pet</td>
                <td>HIIT</td>
                <td data-i18n="w.mob">Mobilnost</td>
                <td data-i18n="w.str">Snaga</td>
                <td data-i18n="w.relax">Opustanje</td>
              </tr>
            </tbody>
          </table>
        </div>
      </div>
    </div>
  </section>

  <section id="cjenik">
    <div class="wrap">
      <h2 data-i18n="pricing.title">Cjenik</h2>
      <div class="pricing" style="margin-top:12px">
        <div class="card price"><h3 data-i18n="pricing.group">Grupni treninzi</h3><div class="tag">39€ <span data-i18n="pricing.monthly">mjesečno</span></div><p class="muted" data-i18n="pricing.group.desc">3x tjedno</p><a class="btn primary nav-link pricing-btn" href="#kontakt" data-program="Grupni treninzi" data-i18n="pricing.join">Upiši se</a></div>
        <div class="card price" style="border:2px solid var(--brand)"><h3 data-i18n="pricing.pt">Osobni trening</h3><div class="tag">25€ <span data-i18n="pricing.hourly">po satu</span></div><p class="muted" data-i18n="pricing.pt.desc">1-na-1</p><a class="btn primary nav-link pricing-btn" href="#kontakt" data-program="Osobni trening" data-i18n="pricing.book">Rezerviraj</a></div>
        <div class="card price"><h3 data-i18n="pricing.online">Online plan</h3><div class="tag">59€ <span data-i18n="pricing.monthly">mjesečno</span></div><p class="muted" data-i18n="pricing.online.desc">Plan + check-in</p><a class="btn primary nav-link pricing-btn" href="#kontakt" data-program="Online plan" data-i18n="pricing.request">Zatraži plan</a></div>
      </div>
    </div>
  </section>

  <section id="iskustva">
    <div class="wrap">
      <div style="display:flex;align-items:center;justify-content:space-between;gap:12px;margin-bottom:12px">
        <h2 data-i18n="testimonials.title">Iskustva članova</h2>
        <button class="btn primary" id="addTestimonialBtn" data-open="#testimonialModal" data-i18n="testimonials.add">Dodaj iskustvo</button>
      </div>
      
      <!-- Automatska traka s iskustvima -->
      <div class="testimonials-track-container" style="margin-top:12px;overflow:hidden;position:relative;background:var(--card);border-radius:var(--radius);border:1px solid rgba(255,255,255,.06);padding:20px 0;">
        <div class="testimonials-track" id="testimonialsTrack" style="display:flex;gap:20px;animation:scrollTestimonials 30s linear infinite;">
          <!-- Iskustva će se dinamički dodavati ovdje -->
        </div>
      </div>
      
      <!-- Backup grid za slučaj da animacija ne radi -->
      <div class="k-grid" id="testimonialsGrid" style="margin-top:12px;display:none;">
        <div class="card quote"><p data-i18n="testimonials.1">"Za 3 mjeseca -10 kg i osjećam se bolje nego ikad."</p><span class="muted">— Ana</span></div>
        <div class="card quote"><p data-i18n="testimonials.2">"Podigao sam bench za 20 kg."</p><span class="muted">— Luka</span></div>
        <div class="card quote"><p data-i18n="testimonials.3">"Najbolja atmosfera i oprema."</p><span class="muted">— Petra</span></div>
        <div class="card quote"><p>"Odličan trening, preporučujem!"</p><span class="muted">— Marko</span></div>
        <div class="card quote"><p>"Najbolja teretana u gradu."</p><span class="muted">— Ivana</span></div>
        <div class="card quote"><p>"Treneri su stručni i pristupačni."</p><span class="muted">— Tomislav</span></div>
        <div class="card quote"><p>"Atmosfera je odlična."</p><span class="muted">— Marija</span></div>
        <div class="card quote"><p>"Rezultati su vidljivi već nakon mjesec dana."</p><span class="muted">— Ante</span></div>
        <div class="card quote"><p>"Oprema je moderna i kvalitetna."</p><span class="muted">— Jelena</span></div>
        <div class="card quote"><p>"Cijene su pristupačne."</p><span class="muted">— Stipe</span></div>
      </div>
    </div>
  </section>

  <!-- MODAL: rezervacija saune -->
  <div id="saunaModal" class="lang-overlay" aria-hidden="true">
    <div class="lang-card" style="max-width: 600px; max-height: 90vh; overflow-y: auto;">
      <h3 data-i18n="sauna.modal.title">Rezerviraj saunu</h3>
      <form id="formSauna" novalidate>
        <div class="field" style="margin-top:12px">
          <label data-i18n="form.name.label">Ime i Prezime *</label>
          <input type="text" id="s_imeprezime" class="input" placeholder="Npr. Marko Marić" data-i18n-placeholder="form.name.ph" oninput="capitalizeWords(this);" required data-error="validation.name" />
          <div class="error-msg" aria-live="polite"></div>
        </div>
        <div class="field" style="margin-top:8px">
          <label data-i18n="form.email.label">Email *</label>
          <input type="email" id="s_email" class="input" placeholder="tvoj@email.com" data-i18n-placeholder="form.email.ph" required data-error="validation.email" data-error-format="validation.email" />
          <div class="error-msg" aria-live="polite"></div>
        </div>
<div class="field" style="margin-top:8px">
  <label data-i18n="form.phone.label">Telefon *</label>
  <input type="tel" id="s_tel" class="input" placeholder="+387 63 123 456" data-i18n-placeholder="form.phone.ph" required data-error="validation.phone" />
  <div class="error-msg" aria-live="polite"></div>
</div>
        <div class="field" style="margin-top:8px">
          <label data-i18n="sauna.modal.date">Datum *</label>
          <input type="date" id="s_datum" class="input" required data-error="validation.selectDate" />
          <div class="error-msg" aria-live="polite"></div>
        </div>
        <div class="field" style="margin-top:8px">
          <label data-i18n="sauna.modal.time">Odaberite termin *</label>
          <select id="s_termin" class="input" required data-error="validation.timeSlot">
            <option value="" data-i18n="sauna.modal.time.select">Odaberite termin</option>
            <option value="09:00">09:00</option>
            <option value="10:00">10:00</option>
            <option value="11:00">11:00</option>
            <option value="12:00">12:00</option>
            <option value="13:00">13:00</option>
            <option value="14:00">14:00</option>
            <option value="15:00">15:00</option>
            <option value="16:00">16:00</option>
            <option value="17:00">17:00</option>
            <option value="18:00">18:00</option>
            <option value="19:00">19:00</option>
            <option value="20:00">20:00</option>
            <option value="21:00">21:00</option>
          </select>
          <div class="error-msg" aria-live="polite"></div>
        </div>
        <div class="field" style="margin-top:8px">
          <label data-i18n="sauna.modal.message">Napomena</label>
          <textarea id="s_napomena" class="input" placeholder="Dodatne napomene..." data-i18n-placeholder="sauna.modal.message.ph" style="min-height:60px" oninput="capitalizeFirstLetter(this);"></textarea>
        </div>
        <div class="sauna-info" style="margin-top:8px;padding:8px;background:rgba(255,255,255,.05);border-radius:8px;font-size:13px;">
          <p data-i18n="sauna.modal.info">• Svaki termin traje 1 sat<br>• Maksimalno 7 dana unaprijed<br>• Za otkazivanje javite se na: <a href="tel:+38763119888" style="color:var(--brand);">+387 63 119 888</a></p>
        </div>
        <div style="display:flex;gap:10px;margin-top:12px;">
          <button type="submit" class="btn primary" data-i18n="sauna.modal.submit">Rezerviraj</button>
          <button type="button" class="btn close-modal" id="closeSaunaModal" data-close data-i18n="sauna.modal.cancel">Odustani</button>
        </div>
      </form>
    </div>
  </div>

  <!-- MODAL: otkazivanje saune -->
  <div id="cancelModal" class="lang-overlay" aria-hidden="true">
    <div class="lang-card" style="max-width: 500px;">
      <h3 data-i18n="sauna.cancel.title">Otkaži rezervaciju saune</h3>
      <form id="formCancel" novalidate>
        <div class="field" style="margin-top:12px">
          <label data-i18n="form.email.label">Email *</label>
          <input type="email" id="c_email" class="input" placeholder="tvoj@email.com" data-i18n-placeholder="form.email.ph" required data-error="validation.email" />
          <div class="error-msg" aria-live="polite"></div>
        </div>
        <div class="field" style="margin-top:8px">
          <label data-i18n="sauna.cancel.code.label">Kod za otkazivanje *</label>
          <input type="text" id="c_code" class="input" placeholder="GL-XXXXX-HR" data-i18n-placeholder="sauna.cancel.code.ph" required data-error="validation.code" />
          <div class="error-msg" aria-live="polite"></div>
        </div>
        <div class="sauna-info" style="margin-top:8px;padding:8px;background:rgba(255,255,255,.05);border-radius:8px;font-size:13px;">
          <p data-i18n="sauna.cancel.info">Unesite email i kod koji ste dobili u potvrdi rezervacije.</p>
        </div>
        <div style="display:flex;gap:10px;margin-top:12px;">
          <button type="submit" class="btn primary" data-i18n="sauna.cancel.submit">Otkaži rezervaciju</button>
          <button type="button" class="btn close-modal" id="closeCancelModal" data-close data-i18n="sauna.cancel.cancel">Odustani</button>
        </div>
      </form>
    </div>
  </div>


  <section id="kontakt">
    <div class="wrap contact">
      <div>
        <h2 data-i18n="contact.title">Rezerviraj termin ili pošalji upit</h2>
        <form id="rez-form" action="https://formspree.io/f/xqadnqjp" method="POST" class="card" novalidate>
          <div class="field">
            <label data-i18n="form.name.label">Ime i Prezime *</label>
            <input name="Ime i prezime" id="imeInput" required class="input" placeholder="Npr. Marko Marić" data-i18n-placeholder="form.name.ph" autocomplete="name" oninput="capitalizeWords(this);" data-error="validation.name" />
            <div class="error-msg" aria-live="polite"></div>
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.email.label">Email *</label>
            <input name="Email" type="email" required class="input" placeholder="tvoj@email.com" data-i18n-placeholder="form.email.ph" autocomplete="email" id="emailInput" autocapitalize="none" data-error="validation.email" data-error-format="validation.email" />
            <div class="error-msg" aria-live="polite"></div>
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.program.label">Program *</label>
            <select name="Program" id="programSelect" class="input" required data-error="validation.required">
              <option value="Mršavljenje" data-i18n="form.program.opt.weightloss">Mršavljenje</option>
              <option value="Snaga" data-i18n="form.program.opt.strength">Snaga</option>
              <option value="Kondicija" data-i18n="form.program.opt.condition">Kondicija</option>
              <option value="Rehabilitacija" data-i18n="form.program.opt.rehab">Rehabilitacija</option>
              <option value="Opći upit/pitanje" data-i18n="form.program.opt.general">Opći upit/pitanje</option>
            </select>
            <div class="error-msg" aria-live="polite"></div>
          </div>

          <div class="field hidden" id="trenerField" style="margin-top:10px">
            <label data-i18n="form.trainer.label">Trener</label>
            <select name="Trener" id="trenerSelect" class="input" required data-error="validation.required"></select>
            <div class="error-msg" aria-live="polite"></div>
          </div>

          <div class="field" style="margin-top:10px">
            <label data-i18n="form.message.label">Poruka</label>
            <textarea name="Poruka" id="porukaTextarea" placeholder="Napiši svoj cilj ili pitanje…" data-i18n-placeholder="form.message.ph" oninput="if(this.value.length>0){const charMap={'a':'A','b':'B','c':'C','č':'Č','ć':'Ć','d':'D','đ':'Đ','e':'E','f':'F','g':'G','h':'H','i':'I','j':'J','k':'K','l':'L','m':'M','n':'N','o':'O','p':'P','q':'Q','r':'R','s':'S','š':'Š','t':'T','u':'U','v':'V','w':'W','x':'X','y':'Y','z':'Z','ž':'Ž'};const firstChar=this.value.charAt(0);const isAlreadyCapitalized=charMap[firstChar.toLowerCase()]===firstChar;if(!isAlreadyCapitalized){const capitalizedFirst=charMap[firstChar.toLowerCase()]||firstChar.toUpperCase();this.value=capitalizedFirst+this.value.slice(1);}}"></textarea>
            <div class="error-msg" aria-live="polite"></div>
          </div>

          <button class="btn primary" style="margin-top:14px" type="submit" data-i18n="form.submit">Pošalji</button>
          <div id="status" class="status"></div>
        </form>
      </div>

      <div>
        <div class="card">
  <h3 data-i18n="contact.loc.title">Location & contacts</h3>
  <p class="muted">Fra Grge Martića 10, 88240 Posušje</p>

  <div class="contact-item">
    <img src="images/phone.png" alt="Phone" class="icon">
    <a href="tel:+38763119888">+387 63 119 888</a>
  </div>

  <div class="contact-item">
    <img src="images/gmail.png" alt="Email" class="icon">
    <a href="mailto:goodlifefitnesscentarposusje@gmail.com">
      Email
    </a>
  </div>

  <div class="contact-item">
    <img src="images/instagram.png" alt="Instagram" class="icon">
    <a href="https://instagram.com/goodlife_fitnesscentar" target="_blank">
      Instagram
    </a>
  </div>

  <div class="contact-item">
    <img src="images/facebook.png" alt="Facebook" class="icon">
    <a href="https://facebook.com/goodlife_fitnesscentar" target="_blank">
      Facebook
    </a>
  </div>
</div>



          </p>
          <iframe 
            src="https://www.google.com/maps/embed?pb=!1m18!1m12!1m3!1d2895.435999621775!2d17.323715475329625!3d43.472370664108865!2m3!1f0!2f0!3f0!3m2!1i1024!2i768!4f13.1!3m3!1m2!1s0x134b271078fb3337%3A0xe6a905b3f512513!2sGoodLife%20Fitness%20Centar!5e0!3m2!1sen!2hr!4v1757019991119!5m2!1sen!2hr" 
            width="100%" height="300" 
            style="border:0; border-radius:12px; margin-top:10px;" 
            allowfullscreen="" loading="lazy" 
            referrerpolicy="no-referrer-when-downgrade">
          </iframe>
        </div>
      </div>
    </div>
  </section>

  <footer>
    <div class="wrap row">
      <div>© <span id="y"></span> GOODLIFE. <span data-i18n="footer.rights">Sva prava pridržana.</span></div>
      <div class="muted" data-i18n="footer.hours">Pon–Pet 07–22 • Sub 07–22 • Ned NE RADIMO!</div>
    </div>
  </footer>

<script>
/* ===== I18N ===== */
const I18N = {
  hr: {
    "nav.home":"Početna","nav.about":"O nama","nav.packages":"Paketi","nav.memberships":"Članarine","nav.sauna":"Sauna","nav.contact":"Kontakt",
    "menu.title":"Izbornik","menu.close":"Zatvori",
    "hero.title":"Ostvari svoj potencijal — živi Good Life!",
    "hero.lead":"Postigni svoje fitness ciljeve uz vrhunske trenere i moderan program treninga.",
    "hero.btn.packages":"Pogledaj pakete","hero.btn.contact":"Kontaktiraj nas",
    "about.title":"O nama",
    "about.text":"GoodLife Fitness centar u Posušju nije samo obična teretana — to je mjesto gdje zajednica ljudi s istim ciljem radi zajedno na zdravlju i napretku. Naši treneri kreiraju individualne programe prilagođene tvom cilju: gubitku kilograma, povećanju mišićne mase, jačanju kondicije ili rehabilitaciji nakon ozljeda. Nudimo stručne savjete o prehrani, redovito praćenje napretka te prijateljsku atmosferu u kojoj ćeš pronaći dodatnu motivaciju.",
    "benefit.1.title":"🎯 1-na-1 coaching","benefit.1.text":"Individualni pristup, jasni ciljevi i mjerljivi rezultati.",
    "benefit.2.title":"🏋️‍♀️ Funkcionalni treninzi","benefit.2.text":"Snaga, mobilnost i kardio za maksimalan učinak.",
    "benefit.3.title":"📈 Praćenje napretka","benefit.3.text":"Mjerenja, fotke napretka i plan prilagođen rezultatima.",
    "programs.title":"Programi treninga","programs.lead":"Svaki plan uključuje procjenu, edukaciju o tehnici i prehranu.",
    "programs.weightloss":"Mršavljenje","programs.weightloss.desc":"HIIT + snaga, 3–5x/tjedno",
    "programs.strength":"Snaga & hipertrofija","programs.strength.desc":"Periodizacija, složene vježbe, progresija.",
    "programs.condition":"Kondicija & mobilnost","programs.condition.desc":"Kružni treninzi, core, mobilnost.",
    "transforms.title":"Rezultati transformacija",
    "transforms.subtitle":"Pravi ljudi, pravi rezultati — pomičemo granice zajedno.",
    "transforms.hint":"Povuci udesno za više",
    "packages.title":"Paketi","packages.lead":"Odaberi svoj plan — bez skrivenih troškova.",
    "packages.basic.desc":"2x tjedno, grupni treninzi","packages.standard.desc":"3x tjedno + plan","packages.premium.desc":"Neograničeno + 1-na-1 mjesečno",
    "packages.basic.name":"Basic paket","packages.standard.name":"Standard paket","packages.premium.name":"Premium paket",
    "common.start":"Kreni",
    "memberships.title":"Članarine","memberships.basic":"Osnovni paket","memberships.students":"Srednjoškolci","memberships.discounts":"Popusti",
    "memberships.benefits":"Posebne pogodnosti","memberships.benefits.text":"Pogodnosti za firme • Obiteljski popusti • Popusti za klubove",
    "coaches.title":"Upoznaj trenere",
    "sauna.title":"Sauna","sauna.lead":"Odmorite se i opustite nakon treninga u našoj modernoj sauni.",
    "sauna.benefits.title":"Prednosti saune","sauna.benefits.detox":"Detoksikacija organizma","sauna.benefits.circulation":"Poboljšanje cirkulacije","sauna.benefits.relaxation":"Opuštanje mišića","sauna.benefits.recovery":"Brže oporavak nakon treninga","sauna.benefits.stress":"Smanjenje stresa","sauna.benefits.immunity":"Jačanje imuniteta",
    "sauna.rules.title":"Pravila korištenja","sauna.rules.time":"Maksimalno 15 minuta po sesiji","sauna.rules.towel":"Obavezno korištenje ručnika","sauna.rules.hydration":"Pijte dovoljno vode","sauna.rules.health":"Ne koristite ako imate zdravstvene probleme","sauna.rules.clean":"Očistite nakon korištenja","sauna.rules.respect":"Poštujte druge korisnike",
    "sauna.access.title":"Pristup sauni","sauna.access.text":"Sauna je dostupna svim članovima VIP paketa i može se rezervirati klikom na \"Rezerviraj termin\".","sauna.book":"Rezerviraj termin",
    "sauna.modal.title":"Rezerviraj saunu","sauna.modal.date":"Datum *","sauna.modal.time":"Odaberite termin *","sauna.modal.time.select":"Odaberite vrijeme","sauna.modal.message":"Napomena","sauna.modal.message.ph":"Dodatne napomene...","sauna.modal.submit":"Rezerviraj","sauna.modal.cancel":"Odustani","sauna.modal.info":"• Svaki termin traje 1 sat<br>• Maksimalno 7 dana unaprijed<br>• Za otkazivanje javite se na: <a href=\"tel:+38763119888\" style=\"color:var(--brand);\">+387 63 119 888</a>",
    "sauna.cancel":"Otkaži rezervaciju","sauna.cancel.title":"Otkaži rezervaciju saune","sauna.cancel.code.label":"Kod za otkazivanje *","sauna.cancel.code.ph":"GL-XXXXX-HR","sauna.cancel.submit":"Otkaži rezervaciju","sauna.cancel.cancel":"Odustani","sauna.cancel.info":"Unesite email i kod koji ste dobili u potvrdi rezervacije.",
    "schedule.title":"Raspored grupnih treninga","schedule.day":"Dan",
    "day.mon":"Pon","day.tue":"Uto","day.wed":"Sri","day.thu":"Čet","day.fri":"Pet",
    "w.mob":"Mobilnost","w.str":"Snaga","w.full":"Full body","w.cond":"Kondicija","w.relax":"Opustanje",
    "pricing.title":"Cjenik","pricing.group":"Grupni treninzi","pricing.group.desc":"3x tjedno","pricing.join":"Upiši se",
    "pricing.pt":"Osobni trening","pricing.pt.desc":"1-na-1","pricing.book":"Rezerviraj",
    "pricing.online":"Online plan","pricing.online.desc":"Plan + check-in","pricing.request":"Zatraži plan",
    "testimonials.title":"Iskustva članova","testimonials.add":"Dodaj iskustvo","testimonials.1":"\"Za 3 mjeseca -10 kg i osjećam se bolje nego ikad.\"","testimonials.2":"\"Podigao sam bench za 20 kg.\"","testimonials.3":"\"Najbolja atmosfera i oprema.\"",
    "testimonials.modal.title":"Podijeli svoje iskustvo","testimonials.modal.name":"Ime i Prezime *","testimonials.modal.experience":"Tvoje iskustvo *","testimonials.modal.experience.ph":"Podijeli svoje iskustvo s GoodLife...","testimonials.modal.submit":"Pošalji","testimonials.modal.cancel":"Odustani",
    "testimonials.toast.success":"Iskustvo uspješno dodano!","testimonials.toast.error":"Greška pri slanju iskustva","testimonials.toast.short":"Iskustvo je prekratko (min. 10 znakova)","testimonials.toast.long":"Iskustvo je predugačko (max. 200 znakova)",
    "validation.required":"Molimo popunite sva obavezna polja","validation.name":"Molimo popunite polje za ime i prezime","validation.email":"Molimo popunite polje za email","validation.phone":"Molimo popunite polje za telefon","validation.experience":"Molimo popunite polje za iskustvo","validation.timeSlot":"Molimo popunite sva obavezna polja i odaberite termin","validation.slotUnavailable":"Ovaj termin više nije dostupan","validation.pastDate":"Ne možete rezervirati za prošlost","validation.selectDate":"Molimo odaberite datum","validation.code":"Molimo unesite kod za otkazivanje","sauna.success":"Rezervacija saune uspješno poslana!","sauna.error":"Greška pri slanju rezervacije. Molimo pokušajte ponovo.","sauna.cancel.success":"Rezervacija uspješno otkazana!","sauna.cancel.error":"Greška pri otkazivanju rezervacije.",
    "testimonials.readMore":"Učitaj više","testimonials.readLess":"Prikaži manje",
    "packages.basic.name":"Basic paket","packages.standard.name":"Standard paket","packages.premium.name":"Premium paket",
    "contact.title":"Rezerviraj termin ili pošalji upit",
    "form.name.label":"Ime i Prezime *","form.name.ph":"Npr. Marko Marić",
    "form.email.label":"Email *","form.email.ph":"tvoj@email.com",
    "form.phone.label":"Telefon *","form.phone.ph":"+387 63 123 456",
    "form.program.label":"Program *",
    "form.program.opt.weightloss":"Mršavljenje","form.program.opt.strength":"Snaga","form.program.opt.condition":"Kondicija","form.program.opt.online":"Online plan","form.program.opt.pt":"Osobni trening","form.program.opt.group":"Grupni treninzi","form.program.opt.rehab":"Rehabilitacija","form.program.opt.general":"Opći upit/pitanje",
    "form.trainer.label":"Trener",
    "form.message.label":"Poruka","form.message.ph":"Napiši svoj cilj ili pitanje…",
    "form.submit":"Pošalji",
    "contact.loc.title":"Lokacija & kontakti",
    "coach.ivan.role":"Snaga","coach.tina.role":"Mršavljenje","coach.toni.role":"Kondicija","coach.davor.role":"Rehabilitacija",
    "footer.rights":"Sva prava pridržana.","footer.hours":"Pon–Pet 07–22 • Sub 07–22 • Ned NE RADIMO!",
    "m.basic.2x":"2x tjedno — <strong>40 KM</strong>",
    "m.basic.3x":"3x tjedno — <strong>50 KM</strong>",
    "m.basic.unl":"Neograničeno — <strong>60 KM</strong>",
    "m.basic.vip":"VIP (neograničeno + sauna) — <strong>100 KM</strong>",
    "m.basic.day":"Jednodnevni — <strong>7 KM</strong>",
    "m.basic.half":"Polumjesečni (15 dana) — <strong>35 KM</strong>",
    "m.stu.2x":"2x tjedno — <strong>25 KM</strong>",
    "m.stu.3x":"3x tjedno — <strong>35 KM</strong>",
    "m.stu.unl":"Neograničeno — <strong>45 KM</strong>",
    "m.stu.group":"Grupni treninzi — <strong>45 KM</strong>",
    "m.stu.day":"Jednodnevni — <strong>6 KM</strong>",
    "m.disc.3m":"3 mjeseca — <strong>-10%</strong>",
    "m.disc.6m":"6 mjeseci — <strong>-20%</strong>",
    "m.disc.12m":"12 mjeseci — <strong>-30%</strong>",
    "m.disc.sto":"Trajni nalog (1 godina) — <strong>-20%</strong>",
    "pricing.monthly":"/mj",
    "pricing.hourly":"/sat"
  },
  en: {
    "nav.home":"Home","nav.about":"About","nav.packages":"Packages","nav.memberships":"Memberships","nav.sauna":"Sauna","nav.contact":"Contact",
    "menu.title":"Menu","menu.close":"Close",
    "hero.title":"Unlock your potential — live the Good Life!",
    "hero.lead":"Reach your fitness goals with expert coaches and modern training programs.",
    "hero.btn.packages":"See packages","hero.btn.contact":"Contact us",
    "about.title":"About us",
    "about.text":"GoodLife Fitness Center in Posušje is more than a gym — it’s a community working together on health and progress. Our coaches tailor programs for fat loss, muscle gain, conditioning, or post-injury rehab. We provide nutrition guidance, regular progress tracking, and a motivating atmosphere.",
    "benefit.1.title":"🎯 1-on-1 coaching","benefit.1.text":"Personal approach, clear goals, measurable results.",
    "benefit.2.title":"🏋️‍♀️ Functional training","benefit.2.text":"Strength, mobility and cardio for maximum impact.",
    "benefit.3.title":"📈 Progress tracking","benefit.3.text":"Measurements, progress photos and adaptive planning.",
    "programs.title":"Training programs","programs.lead":"Every plan includes an assessment, technique coaching and nutrition tips.",
    "programs.weightloss":"Weight loss","programs.weightloss.desc":"HIIT + strength, 3–5×/week",
    "programs.strength":"Strength & hypertrophy","programs.strength.desc":"Periodization, compound lifts, progression.",
    "programs.condition":"Conditioning & mobility","programs.condition.desc":"Circuits, core, mobility.",
    "transforms.title":"Transformation results",
    "transforms.subtitle":"Real people, real results — pushing limits together.",
    "transforms.hint":"Swipe right for more",
    "packages.title":"Packages","packages.lead":"Pick your plan — no hidden fees.",
    "packages.basic.desc":"2×/week, group sessions","packages.standard.desc":"3×/week + plan","packages.premium.desc":"Unlimited + monthly 1-on-1",
    "packages.basic.name":"Basic package","packages.standard.name":"Standard package","packages.premium.name":"Premium package",
    "common.start":"Start",
    "memberships.title":"Memberships","memberships.basic":"Basic plan","memberships.students":"High-school students","memberships.discounts":"Discounts",
    "memberships.benefits":"Special benefits","memberships.benefits.text":"Corporate benefits • Family discounts • Club discounts",
    "coaches.title":"Meet the coaches",
    "sauna.title":"Sauna","sauna.lead":"Relax and unwind after your workout in our modern sauna.",
    "sauna.benefits.title":"Sauna benefits","sauna.benefits.detox":"Body detoxification","sauna.benefits.circulation":"Improved circulation","sauna.benefits.relaxation":"Muscle relaxation","sauna.benefits.recovery":"Faster post-workout recovery","sauna.benefits.stress":"Stress reduction","sauna.benefits.immunity":"Immune system boost",
    "sauna.rules.title":"Usage rules","sauna.rules.time":"Maximum 15 minutes per session","sauna.rules.towel":"Towel use mandatory","sauna.rules.hydration":"Stay hydrated","sauna.rules.health":"Do not use if you have health issues","sauna.rules.clean":"Clean up after use","sauna.rules.respect":"Respect other users",
    "sauna.access.title":"Sauna access","sauna.access.text":"Sauna is available to all VIP package members and can be reserved by clicking \"Book session\".","sauna.book":"Book session",
    "sauna.modal.title":"Book sauna","sauna.modal.date":"Date *","sauna.modal.time":"Select time slot *","sauna.modal.time.select":"Select time","sauna.modal.message":"Notes","sauna.modal.message.ph":"Additional notes...","sauna.modal.submit":"Book","sauna.modal.cancel":"Cancel","sauna.modal.info":"• Each session lasts 1 hour<br>• Maximum 7 days in advance<br>• For cancellation call: <a href=\"tel:+38763119888\" style=\"color:var(--brand);\">+387 63 119 888</a>",
    "sauna.cancel":"Cancel reservation","sauna.cancel.title":"Cancel sauna reservation","sauna.cancel.code.label":"Cancellation code *","sauna.cancel.code.ph":"GL-XXXXX-HR","sauna.cancel.submit":"Cancel reservation","sauna.cancel.cancel":"Cancel","sauna.cancel.info":"Enter the email and code you received in the reservation confirmation.",
    "schedule.title":"Group class schedule","schedule.day":"Day",
    "day.mon":"Mon","day.tue":"Tue","day.wed":"Wed","day.thu":"Thu","day.fri":"Fri",
    "w.mob":"Mobility","w.str":"Strength","w.full":"Full body","w.cond":"Conditioning","w.relax":"Relax",
    "pricing.title":"Pricing","pricing.group":"Group training","pricing.group.desc":"3× per week","pricing.join":"Join now",
    "pricing.pt":"Personal training","pricing.pt.desc":"1-on-1","pricing.book":"Book",
    "pricing.online":"Online plan","pricing.online.desc":"Plan + check-in","pricing.request":"Request plan",
    "testimonials.title":"Member stories","testimonials.add":"Add testimonial","testimonials.1":"\"Lost 10 kg in 3 months — feel better than ever.\"","testimonials.2":"\"Added 20 kg to my bench.\"","testimonials.3":"\"Best atmosphere and equipment.\"",
    "testimonials.modal.title":"Share your experience","testimonials.modal.name":"Full name *","testimonials.modal.experience":"Your experience *","testimonials.modal.experience.ph":"Share your experience with GoodLife...","testimonials.modal.submit":"Submit","testimonials.modal.cancel":"Cancel",
    "testimonials.toast.success":"Testimonial added successfully!","testimonials.toast.error":"Error sending testimonial","testimonials.toast.short":"Testimonial too short (min. 10 characters)","testimonials.toast.long":"Testimonial too long (max. 200 characters)",
    "validation.required":"Please fill out all required fields","validation.name":"Please fill out the name field","validation.email":"Please fill out the email field","validation.phone":"Please fill out the phone field","validation.experience":"Please fill out the experience field","validation.timeSlot":"Please fill out all required fields and select a time slot","validation.slotUnavailable":"This time slot is no longer available","validation.pastDate":"You cannot book for the past","validation.selectDate":"Please select a date","validation.code":"Please enter the cancellation code","sauna.success":"Sauna reservation sent successfully!","sauna.error":"Error sending reservation. Please try again.","sauna.cancel.success":"Reservation cancelled successfully!","sauna.cancel.error":"Error cancelling reservation.",
    "testimonials.readMore":"Read more","testimonials.readLess":"Show less",
    "packages.basic.name":"Basic package","packages.standard.name":"Standard package","packages.premium.name":"Premium package",
    "contact.title":"Book a session or send an inquiry",
    "form.name.label":"Full name *","form.name.ph":"e.g. Marko Marić",
    "form.email.label":"Email *","form.email.ph":"your@email.com",
    "form.phone.label":"Phone *","form.phone.ph":"+387 63 123 456",
    "form.program.label":"Program *",
    "form.program.opt.weightloss":"Weight loss","form.program.opt.strength":"Strength","form.program.opt.condition":"Conditioning","form.program.opt.online":"Online plan","form.program.opt.pt":"Personal training","form.program.opt.group":"Group training","form.program.opt.rehab":"Rehabilitation","form.program.opt.general":"General question",
    "form.trainer.label":"Trainer",
    "form.message.label":"Message","form.message.ph":"Tell us your goal or question…",
    "form.submit":"Send",
    "contact.loc.title":"Location & contacts",
    "coach.ivan.role":"Strength","coach.tina.role":"Weight loss","coach.toni.role":"Conditioning","coach.davor.role":"Rehabilitation",
    "footer.rights":"All rights reserved.","footer.hours":"Mon–Fri 07–22 • Sat 07–22 • Sun CLOSED",
    "m.basic.2x":"2× per week — <strong>40 KM</strong>",
    "m.basic.3x":"3× per week — <strong>50 KM</strong>",
    "m.basic.unl":"Unlimited — <strong>60 KM</strong>",
    "m.basic.vip":"VIP (unlimited + sauna) — <strong>100 KM</strong>",
    "m.basic.day":"Day pass — <strong>7 KM</strong>",
    "m.basic.half":"Half-month (15 days) — <strong>35 KM</strong>",
    "m.stu.2x":"2× per week — <strong>25 KM</strong>",
    "m.stu.3x":"3× per week — <strong>35 KM</strong>",
    "m.stu.unl":"Unlimited — <strong>45 KM</strong>",
    "m.stu.group":"Group training — <strong>45 KM</strong>",
    "m.stu.day":"Day pass — <strong>6 KM</strong>",
    "m.disc.3m":"3 months — <strong>-10%</strong>",
    "m.disc.6m":"6 months — <strong>-20%</strong>",
    "m.disc.12m":"12 months — <strong>-30%</strong>",
    "m.disc.sto":"Standing order (1 year) — <strong>-20%</strong>",
    "pricing.monthly":"/month",
    "pricing.hourly":"/hour"
  }
};

/* ===== Helpers ===== */
const $ = s => document.querySelector(s);
const $$ = s => document.querySelectorAll(s);

/* Year */
$('#y').textContent = new Date().getFullYear();

/* Force home on every page load/refresh */
function forceHome() {
  // Disable browser's automatic scroll restoration
  if ('scrollRestoration' in history) {
    history.scrollRestoration = 'manual';
  }
  
  history.replaceState(null, '', location.pathname + location.search + '#pocetna');
  
  // Force scroll to top multiple times to override browser behavior
  window.scrollTo(0, 0);
  setTimeout(() => window.scrollTo(0, 0), 0);
  setTimeout(() => window.scrollTo(0, 0), 10);
  setTimeout(() => window.scrollTo(0, 0), 50);
  
  // Update active nav link
  const menuLinks = document.querySelectorAll('.menu a');
  menuLinks.forEach(a => a.classList.toggle('active', a.getAttribute('href') === '#pocetna'));
}

/* Fade-in on load and force home */
window.addEventListener('load', () => { 
  document.body.classList.add('fade-in');
  forceHome();
});

// Backup for mobile - DOMContentLoaded
document.addEventListener('DOMContentLoaded', () => {
  forceHome();
});

/* ===== I18N apply ===== */
function applyI18n(lang){
  const dict = I18N[lang] || I18N.hr;
  document.documentElement.lang = lang;

  $$('[data-i18n]').forEach(el=>{
    const k = el.dataset.i18n;
    if (dict[k]) el.innerHTML = dict[k];
  });
  $$('[data-i18n-placeholder]').forEach(el=>{
    const k = el.dataset.i18nPlaceholder;
    if (dict[k]) el.placeholder = dict[k];
  });

  $('#langHR')?.classList.toggle('active', lang==='hr');
  $('#langEN')?.classList.toggle('active', lang==='en');
  
  // Phone code dropdown is now handled by intl-tel-input plugin
  
  // Re-render testimonials with updated timestamps
  setTimeout(() => {
    if (typeof loadTestimonials === 'function') {
      loadTestimonials();
    }
  }, 100);
}

/* ===== Modal helpers (lock body scroll) ===== */
const langModal = $('#langModal');
function openLangModal(){
  langModal?.classList.add('show');
  langModal?.setAttribute('aria-hidden','false');
  document.body.style.top = `-${window.scrollY}px`;
  document.body.classList.add('modal-open');
}
function closeLangModal(){
  langModal?.classList.remove('show');
  langModal?.setAttribute('aria-hidden','true');
  const y = parseInt((document.body.style.top || '0').replace('-',''),10) || 0;
  document.body.classList.remove('modal-open');
  document.body.style.top = '';
  window.scrollTo(0, y || 0);
}

// Funkcija za čišćenje sauna modala i otključavanje skrolanja
function closeSaunaModalAndUnlockScroll(){
  const modal = document.getElementById('saunaModal');
  
  // Pokušaj zatvoriti preko Bootstrap-a
  try {
    if (window.bootstrap && modal) {
      const inst = bootstrap.Modal.getInstance(modal) || new bootstrap.Modal(modal);
      inst.hide();
    }
  } catch(e) {}
  
  // Ručno zatvori modal
  if (modal) {
    modal.classList.remove('show', 'fade');
    modal.setAttribute('aria-hidden','true');
    modal.style.display = 'none';
    modal.style.paddingRight = '';
  }
  
  // Ukloni sve modal backdrop elemente
  document.querySelectorAll('.modal-backdrop').forEach(b => b.remove());
  
  // Vrati scroll na body i html
  document.body.classList.remove('modal-open');
  document.body.style.overflow = '';
  document.body.style.paddingRight = '';
  document.body.style.top = '';
  document.documentElement.classList.remove('modal-open');
  document.documentElement.style.overflow = '';
  
  // Dodatno čišćenje - ukloni sve inline stilove koji mogu blokirati scroll
  document.body.removeAttribute('style');
  document.documentElement.removeAttribute('style');
  
  console.log('Modal cleaned and scroll unlocked');
}

// Funkcija za otključavanje scroll-a
function unlockScroll(){
  // Vrati scroll na body i html
  document.body.classList.remove('modal-open');
  document.body.style.overflow = '';
  document.body.style.paddingRight = '';
  document.body.style.top = '';
  document.documentElement.classList.remove('modal-open');
  document.documentElement.style.overflow = '';
  
  // Dodatno čišćenje - ukloni sve inline stilove koji mogu blokirati scroll
  document.body.removeAttribute('style');
  document.documentElement.removeAttribute('style');
  
  // Ukloni sve modal backdrop elemente
  document.querySelectorAll('.modal-backdrop').forEach(b => b.remove());
  
  console.log('Scroll unlocked');
}

/* ===== First-visit logic: modal samo kad NIJE reload ===== */
const savedLang = localStorage.getItem('gl_lang');
const navEntry = performance.getEntriesByType?.('navigation')?.[0];
const isReload = navEntry ? navEntry.type === 'reload'
                          : (performance.navigation && performance.navigation.type === 1);

// Provjeri da li je stranica učitala nakon forme (ne prikazuj modal)
const isFormSubmission = sessionStorage.getItem('formSubmitted') === 'true';

if (!isReload && !isFormSubmission) {
  // prikaži modal i ZAKLJUČAJ pozadinu
  langModal?.classList.add('show');
  langModal?.setAttribute('aria-hidden','false');
  document.body.style.top = `-${window.scrollY}px`;
  document.body.classList.add('modal-open');
  if (savedLang) applyI18n(savedLang);
} else {
  applyI18n(savedLang || 'hr');
  langModal?.classList.remove('show');
  langModal?.setAttribute('aria-hidden','true');
}

// Očisti form submission flag nakon učitavanja
if (isFormSubmission) {
  sessionStorage.removeItem('formSubmitted');
}


/* Odabir jezika iz modala: fade & jump home */
function chooseLangFirst(lang){
  localStorage.setItem('gl_lang', lang);
  currentLang = lang; // Ažuriraj currentLang varijablu
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');

  setTimeout(()=> {
    closeLangModal();
applyI18n(lang);
// changeLang(lang); // Uklonjen poziv za intl-tel-input
    history.replaceState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo({ top:0, behavior:'instant' });
    document.body.classList.remove('leaving');
    void document.body.offsetWidth;
    document.body.classList.add('fade-in');
  }, 650);
}

/* Promjena jezika preko zastavica u headeru: fade & home */
function switchLangFromHeader(lang){
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');

  setTimeout(()=> {
    localStorage.setItem('gl_lang', lang);
    currentLang = lang; // Ažuriraj currentLang varijablu
applyI18n(lang);
// changeLang(lang); // Uklonjen poziv za intl-tel-input
    history.pushState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo({ top:0, behavior:'instant' });
    document.body.classList.remove('leaving');
    void document.body.offsetWidth;
    document.body.classList.add('fade-in');
  }, 650);
}

/* Bindovi jezika */
$$('.flag-btn').forEach(b=> b.addEventListener('click', ()=> chooseLangFirst(b.dataset.lang)));
$('#langHR')?.addEventListener('click', ()=> switchLangFromHeader('hr'));
$('#langEN')?.addEventListener('click', ()=> switchLangFromHeader('en'));

/* ===== Refresh (normal + logo) → fade i povratak na početnu ===== */
if ('scrollRestoration' in history) history.scrollRestoration = 'manual';

// Always force home on any page load/refresh with fade effect
window.addEventListener('beforeunload', () => {
  sessionStorage.setItem('forceHome','1');
  // Add fade-out effect like language switching
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');
});

// Fallback za mobile/Safari gdje beforeunload ponekad ne okida
window.addEventListener('pagehide', () => {
  sessionStorage.setItem('forceHome','1');
  // Add fade-out effect like language switching
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');
});

window.addEventListener('pageshow', () => {
  if (sessionStorage.getItem('forceHome') === '1'){
    sessionStorage.removeItem('forceHome');
    history.replaceState(null, '', location.pathname + location.search + '#pocetna');
    window.scrollTo(0,0);
    
    // Add fade-in effect like language switching
    setTimeout(() => {
      document.body.classList.add('fade-in');
    }, 100);
  }
});
function handleLogoClick(e) {
  e.preventDefault();
  
  // Prevent multiple clicks
  if (document.body.classList.contains('leaving')) {
    return;
  }
  
  // Faster animation for logo
  document.body.classList.remove('fade-in');
  void document.body.offsetWidth;
  document.body.classList.add('leaving');

  setTimeout(() => {
    // Force reload
    location.reload();
  }, 0); // Instant for logo
}

// Multiple event listeners for better mobile support
$('#logoBtn')?.addEventListener('click', handleLogoClick);

// Debounced touchend to prevent double triggers
let logoClickTimeout = null;
$('#logoBtn')?.addEventListener('touchend', (e) => {
  e.preventDefault();
  
  if (logoClickTimeout) {
    clearTimeout(logoClickTimeout);
  }
  
  logoClickTimeout = setTimeout(() => {
    handleLogoClick(e);
    logoClickTimeout = null;
  }, 50);
});

/* ===== Nav / drawer / spy ===== */
const headerEl = document.getElementById('siteHeader');
const headerCssH = parseInt(getComputedStyle(document.documentElement).getPropertyValue('--headerH')) || 70;
const menuLinks = document.querySelectorAll('.menu a');
const allLinks  = document.querySelectorAll('a.nav-link, .menu a, .mlink');

function setActive(href){ menuLinks.forEach(a=> a.classList.toggle('active', a.getAttribute('href') === href)); }

const sections = document.querySelectorAll('section');
window.addEventListener('load', ()=>{
  sections.forEach(s=>s.classList.add('show'));
  initTransformSlider(); // INIT CAROUSEL
});

function smoothScrollTo(hash){
  const target = document.querySelector(hash); if(!target) return;
  const offset = (headerEl?.offsetHeight || headerCssH) + 10;
  const y = target.getBoundingClientRect().top + window.pageYOffset - offset;
  window.scrollTo({ top:y, behavior:'smooth' });
}

const watchIds = ['#pocetna','#onama','#benefiti','#programi','#transformacije','#paketi','#clanarine','#treneri','#sauna','#raspored','#cjenik','#iskustva','#kontakt'];
const watchTargets = watchIds.map(sel=>document.querySelector(sel)).filter(Boolean);
const ratios = {};
const io = new IntersectionObserver((entries)=>{
  entries.forEach(en => { ratios[en.target.id] = en.intersectionRatio; });
  let bestId = null, bestRatio = -1;
  Object.keys(ratios).forEach(id=>{ if(ratios[id] > bestRatio){ bestRatio = ratios[id]; bestId = id; } });
  if(!bestId) return;
  const href = '#'+bestId;
  setActive(href);
  const cleanUrl = (href === '#pocetna') ? (location.pathname + location.search) : href;
  history.replaceState(null, '', cleanUrl);
}, {
  root: null,
  rootMargin: `-${(headerEl?.offsetHeight || headerCssH)}px 0px -50% 0px`,
  threshold: Array.from({length: 21}, (_,i)=> i/20)
});
watchTargets.forEach(t=> io.observe(t));

let realCloseDrawer = ()=>{};
allLinks.forEach(a=>{
  a.addEventListener('click', (e)=>{
    const href = a.getAttribute('href');
    if(href && href.startsWith('#')){
      e.preventDefault();
      smoothScrollTo(href);
      setActive(href);
      const cleanUrl = (href === '#pocetna') ? (location.pathname + location.search) : href;
      history.pushState(null, '', cleanUrl);
      realCloseDrawer();
    }
  });
});

/* Drawer */
const burger = document.querySelector('.burger');
const drawer = document.getElementById('drawer');
const overlay = document.getElementById('drawerOverlay');
const drawerClose = document.getElementById('drawerClose');

function openDrawer(){
  drawer.classList.add('open');
  overlay.classList.add('show');
  drawer.setAttribute('aria-hidden','false');
  burger.setAttribute('aria-expanded','true');
  document.body.style.overflow='hidden';
}
realCloseDrawer = function(){
  drawer.classList.remove('open');
  overlay.classList.remove('show');
  drawer.setAttribute('aria-hidden','true');
  burger.setAttribute('aria-expanded','false');
  document.body.style.overflow='';
};
burger?.addEventListener('click', openDrawer);
drawerClose?.addEventListener('click', realCloseDrawer);
overlay?.addEventListener('click', realCloseDrawer);
window.addEventListener('keydown', (e)=>{ if(e.key==='Escape') realCloseDrawer(); });

/* Auto-hide header (slower show) */
let hideTimer = null;
function onScroll(){
  if (drawer && drawer.classList.contains('open')) return;
  const y = window.scrollY;
  if (y > 10){ headerEl.classList.add('hide'); }
  else { headerEl.classList.remove('hide'); }
  if (hideTimer) clearTimeout(hideTimer);
  hideTimer = setTimeout(()=>{ headerEl.classList.remove('hide'); }, 380);
}
window.addEventListener('scroll', onScroll, {passive:true});

// These will be defined after DOM loads
let programSelect, trenerField, trenerSelect;
// Uklonjena nepotrebna polja
const hideTrainerFor = new Set([
  'Opći upit/pitanje','General question'
]);

// Email aliases for trainers
const trainerEmails = {
  'Ivan': 'kivan92@gmail.com',
  'Tina': 'tinna.maras@gmail.com',
  'Toni': 'info+toni@goodlife.hr', // Dodajte Toni email kada ga imate
  'Davor': 'davorcolic60@gmail.com'
};

function ensureTrainersFilled(){
  if (!trenerSelect) return;
  if (trenerSelect.options.length === 0){
    ['Ivan','Tina','Toni','Davor'].forEach(name=>{
      const opt=document.createElement('option'); opt.value=name; opt.textContent=name; trenerSelect.appendChild(opt);
    });
  }
}

function updateTrainerVisibility(){
  const val = programSelect?.value || '';
  
  // Sakrij SAMO za opće upite
  if (hideTrainerFor.has(val)) {
    trenerField.classList.add('hidden');
    trenerSelect.removeAttribute('required');
    
    // Čekaj da se animacija završi prije čišćenja
    setTimeout(() => {
      if (trenerField.classList.contains('hidden')) {
        trenerSelect.innerHTML = '';
      }
    }, 800);
    return;
  }
  
  // Prikaži za SVE ostale programe s identičnom fade animacijom
  trenerField.classList.remove('hidden');
  ensureTrainersFilled();
  trenerSelect.setAttribute('required','required');
}

// Form submission logic with trainer-specific emails
const rezForm = document.getElementById('rez-form');
const defaultEndpoint = 'https://formspree.io/f/xqadnqjp'; // Glavni endpoint za opće upite

// Funkcija za pretvaranje imena trenera u genitiv
function getTrainerGenitive(name) {
  const genitiveMap = {
    'Ivan': 'Ivana',
    'Tina': 'Tine', 
    'Davor': 'Davora',
    'Toni': 'Tonija',
    'Marko': 'Marka',
    'Ana': 'Ane',
    'Petra': 'Petre',
    'Tomislav': 'Tomislava'
  };
  
  return genitiveMap[name] || name; // Vrati genitiv ili originalno ime ako nije pronađeno
}

function updateFormAction() {
  const selectedTrainerName = trenerSelect?.value;
  
  // Uvijek koristi isti endpoint (službeni email)
    rezForm.action = defaultEndpoint;
}

// Update hidden fields when trainer is selected
// trenerSelect?.addEventListener('change', (e) => {
//   const trainerName = e.target.value;
//   updateFormAction();
// });

// Update form action when program changes
// programSelect?.addEventListener('change', () => {
//   updateFormAction();
//   updateTrainerVisibility();
// });

// Add form submission debug
rezForm?.addEventListener('submit', (e) => {
  // Postavi flag da je forma poslana
  sessionStorage.setItem('formSubmitted', 'true');
  // Form submission handled by Formspree
});

// if (programSelect){
//   updateTrainerVisibility();
//   updateFormAction(); // Initialize form action
// }

/* ===== CAROUSEL LOGIC (jedan viewport) ===== */
function initTransformSlider(){
  const track = document.getElementById('xSlider');
  const viewport = document.getElementById('xViewport');
  const btnPrev = document.getElementById('xPrev');
  const btnNext = document.getElementById('xNext');
  const btnPrevAbs = document.getElementById('xPrevAbs');
  const btnNextAbs = document.getElementById('xNextAbs');
  const hint = document.getElementById('swipeHint');
  if(!track || !viewport) return;

  const total = track.children.length;
  let index = 0;

  const hideHint = ()=> hint?.classList.add('hidden');
  // auto-hide nakon 4.5s ako nema interakcije
  setTimeout(hideHint, 4500);

  function goTo(i){
  index = (i + total) % total;
  track.style.transform = `translateX(${-index*100}%)`;

  // Hint logika
  if (index === 0) {
    hint?.classList.remove('hidden','hint-fadeout');
  } else {
    if (!hint.classList.contains('hint-fadeout')) {
      hint.classList.add('hint-fadeout');
      setTimeout(()=> hint.classList.add('hidden'), 600); // sakrij nakon fade-a
    }
  }
}




  const next = ()=> goTo(index+1);
  const prev = ()=> goTo(index-1);

  // Gumbi
  [btnNext,btnPrev,btnNextAbs,btnPrevAbs].forEach(b=>{
    b?.addEventListener('click', ()=>{ hideHint(); });
  });
  btnNext?.addEventListener('click', next);
  btnPrev?.addEventListener('click', prev);
  btnNextAbs?.addEventListener('click', next);
  btnPrevAbs?.addEventListener('click', prev);

  // Touch swipe (bez vertikalnog skrola dok swipe-aš)
  let tStartX=0, tDelta=0, touching=false, moved=false;
  viewport.addEventListener('touchstart', (e)=>{
    if(!e.touches[0]) return;
    touching=true; moved=false; tDelta=0;
    tStartX = e.touches[0].clientX;
    track.style.transition='none';
  }, {passive:true});
  viewport.addEventListener('touchmove', (e)=>{
    if(!touching || !e.touches[0]) return;
    tDelta = e.touches[0].clientX - tStartX;
    if (Math.abs(tDelta)>5 && !moved){ moved=true; hideHint(); }
    // spriječi scroll stranice dok vučeš
    e.preventDefault();
    const pct = (-index*100) + (tDelta / viewport.clientWidth)*100;
    track.style.transform = `translateX(${pct}%)`;
  }, {passive:false});
  viewport.addEventListener('touchend', ()=>{
    track.style.transition='';
    if (moved && Math.abs(tDelta) > viewport.clientWidth*0.15){
      (tDelta<0) ? next() : prev();
    } else {
      goTo(index);
    }
    touching=false; moved=false; tDelta=0;
  });

  // Mouse drag (spriječi selekciju/slike)
  let drag=false, mStart=0, mDelta=0;
  viewport.addEventListener('mousedown', (e)=>{
    drag=true; mStart=e.clientX; mDelta=0; track.style.transition='none'; hideHint(); e.preventDefault();
  });
  window.addEventListener('mousemove', (e)=>{
    if(!drag) return;
    mDelta = e.clientX - mStart;
    const pct = (-index*100) + (mDelta / viewport.clientWidth)*100;
    track.style.transform = `translateX(${pct}%)`;
  });
  window.addEventListener('mouseup', ()=>{
    if(!drag) return;
    track.style.transition='';
    if (Math.abs(mDelta) > viewport.clientWidth*0.15){
      (mDelta<0) ? next() : prev();
    } else {
      goTo(index);
    }
    drag=false; mDelta=0;
  });

  // Keyboard
  viewport.addEventListener('keydown', (e)=>{
    if(e.key==='ArrowRight') next();
    else if(e.key==='ArrowLeft') prev();
  });

  goTo(0);
}

/* ===== TESTIMONIALS FUNCTIONALITY ===== */
const testimonialsGrid = document.getElementById('testimonialsGrid');
const testimonialModal = document.getElementById('testimonialModal');
const addTestimonialBtn = document.getElementById('addTestimonialBtn');
const closeTestimonialModal = document.getElementById('closeTestimonialModal');
const testimonialForm = document.getElementById('testimonialForm');
const testimonialText = document.getElementById('testimonialText');
const charCounter = document.getElementById('charCounter');

// Default testimonials with timestamps (10 iskustava)
const defaultTestimonials = [
  { name: "Ana", text: "Za 3 mjeseca -10 kg i osjećam se bolje nego ikad.", timestamp: Date.now() - 86400000 * 10 },
  { name: "Luka", text: "Podigao sam bench za 20 kg.", timestamp: Date.now() - 86400000 * 9 },
  { name: "Petra", text: "Najbolja atmosfera i oprema.", timestamp: Date.now() - 86400000 * 8 },
  { name: "Marko", text: "Odličan trening, preporučujem!", timestamp: Date.now() - 86400000 * 7 },
  { name: "Ivana", text: "Najbolja teretana u gradu.", timestamp: Date.now() - 86400000 * 6 },
  { name: "Tomislav", text: "Treneri su stručni i pristupačni.", timestamp: Date.now() - 86400000 * 5 },
  { name: "Marija", text: "Atmosfera je odlična.", timestamp: Date.now() - 86400000 * 4 },
  { name: "Ante", text: "Rezultati su vidljivi već nakon mjesec dana.", timestamp: Date.now() - 86400000 * 3 },
  { name: "Jelena", text: "Oprema je moderna i kvalitetna.", timestamp: Date.now() - 86400000 * 2 },
  { name: "Stipe", text: "Cijene su pristupačne.", timestamp: Date.now() - 86400000 * 1 }
];

// Load testimonials from localStorage or use defaults
function loadTestimonials() {
  const saved = localStorage.getItem('gl_testimonials');
  const testimonials = saved ? JSON.parse(saved) : defaultTestimonials;
  
  // Sort by timestamp (newest first for better engagement)
  testimonials.sort((a, b) => b.timestamp - a.timestamp);
  
  renderTestimonials(testimonials);
  return testimonials;
}

// Save testimonials to localStorage
function saveTestimonials(testimonials) {
  localStorage.setItem('gl_testimonials', JSON.stringify(testimonials));
}

// Format timestamp to relative time
function formatTimestamp(timestamp) {
  const now = Date.now();
  const diff = now - timestamp;
  const days = Math.floor(diff / 86400000);
  const hours = Math.floor(diff / 3600000);
  const minutes = Math.floor(diff / 60000);
  
  const currentLang = localStorage.getItem('gl_lang') || 'hr';
  
  if (currentLang === 'en') {
    // English translations
    if (days > 0) return `added ${days} ${days === 1 ? 'day' : 'days'} ago`;
    if (hours > 0) return `added ${hours} ${hours === 1 ? 'hour' : 'hours'} ago`;
    if (minutes > 0) return `added ${minutes} ${minutes === 1 ? 'minute' : 'minutes'} ago`;
    return 'just now';
  } else {
    // Croatian translations
    if (days > 0) return `prije ${days} ${days === 1 ? 'dan' : 'dana'}`;
    if (hours > 0) return `prije ${hours} ${hours === 1 ? 'sat' : 'sati'}`;
    if (minutes > 0) return `prije ${minutes} ${minutes === 1 ? 'minuta' : 'minuta'}`;
    return 'upravo sada';
  }
}

  // Render testimonials in track
function renderTestimonials(testimonials) {
    console.log('Rendering testimonials:', testimonials); // Debug
    const track = document.getElementById('testimonialsTrack');
    const grid = document.getElementById('testimonialsGrid');
    
    console.log('Track element:', track); // Debug
    console.log('Grid element:', grid); // Debug
    
    if (!track) {
      console.error('testimonialsTrack element not found!'); // Debug
      return;
    }
    
    // Clear track
    track.innerHTML = '';
    
    // Check if mobile
    const isMobile = window.innerWidth <= 720;
    
    if (isMobile) {
      // Mobile: show testimonials vertically with seamless loop
      const mobileTestimonials = [...testimonials, ...testimonials];
      
      mobileTestimonials.forEach((testimonial, index) => {
        const item = document.createElement('div');
        item.className = 'testimonial-item';
    
    // Check if text is long (more than 70 characters)
    const isLongText = testimonial.text.length > 70;
    const displayText = isLongText ? testimonial.text.substring(0, 70) + '...' : testimonial.text;
    
    const currentLang = localStorage.getItem('gl_lang') || 'hr';
    const readMoreText = currentLang === 'en' ? 'Read more' : 'Učitaj više';
    
        item.innerHTML = `
        <p ${isLongText ? 'class="long-text" data-full-text="' + testimonial.text + '"' : ''}>"${displayText}"</p>
        ${isLongText ? '<button class="read-more-btn" onclick="toggleReadMore(this)" data-i18n="testimonials.readMore">' + readMoreText + '</button>' : ''}
          <div class="author">— ${testimonial.name} (${formatTimestamp(testimonial.timestamp)})</div>
        `;
        
        track.appendChild(item);
      });
      
      // Apply mobile styles with vertical animation
      track.style.display = 'block';
      track.style.whiteSpace = 'normal';
      track.style.height = 'auto';
      track.style.overflow = 'visible';
      
      // Calculate actual height and animate in pixels
      setTimeout(() => {
        const trackHeight = track.scrollHeight;
        const halfHeight = trackHeight / 2;
        
        track.style.animation = `none`;
        track.style.transform = `translateY(0px)`;
        
        // Create smooth animation using requestAnimationFrame
        let startTime = null;
        // Dynamic duration based on number of testimonials (more testimonials = longer duration)
        const baseDuration = 30000; // 30 seconds base
        const duration = baseDuration + (testimonials.length * 2000); // +2 seconds per testimonial
        
        function animate(currentTime) {
          if (!startTime) startTime = currentTime;
          const elapsed = currentTime - startTime;
          const progress = (elapsed % duration) / duration;
          
          const translateY = -progress * halfHeight;
          track.style.transform = `translateY(${translateY}px)`;
          
          requestAnimationFrame(animate);
        }
        
        requestAnimationFrame(animate);
      }, 100);
      
    } else {
      // Desktop: show testimonials with seamless loop
      const duplicatedTestimonials = [...testimonials, ...testimonials];
      
      duplicatedTestimonials.forEach((testimonial, index) => {
        const item = document.createElement('div');
        item.className = 'testimonial-item';
        
        // Check if text is long (more than 70 characters)
        const isLongText = testimonial.text.length > 70;
        const displayText = isLongText ? testimonial.text.substring(0, 70) + '...' : testimonial.text;
        
        const currentLang = localStorage.getItem('gl_lang') || 'hr';
        const readMoreText = currentLang === 'en' ? 'Read more' : 'Učitaj više';
        
        item.innerHTML = `
          <p ${isLongText ? 'class="long-text" data-full-text="' + testimonial.text + '"' : ''}>"${displayText}"</p>
          ${isLongText ? '<button class="read-more-btn" onclick="toggleReadMore(this)" data-i18n="testimonials.readMore">' + readMoreText + '</button>' : ''}
          <div class="author">— ${testimonial.name} (${formatTimestamp(testimonial.timestamp)})</div>
        `;
        
        track.appendChild(item);
      });
      
      // Apply desktop styles
      track.style.display = 'flex';
      track.style.whiteSpace = 'nowrap';
      
      // Calculate actual width and animate in pixels
      setTimeout(() => {
        const trackWidth = track.scrollWidth;
        const halfWidth = trackWidth / 2;
        
        track.style.animation = `none`;
        track.style.transform = `translateX(0px)`;
        
        // Create smooth animation using requestAnimationFrame
        let startTime = null;
        // Dynamic duration based on number of testimonials (more testimonials = longer duration)
        const baseDuration = 30000; // 30 seconds base
        const duration = baseDuration + (testimonials.length * 2000); // +2 seconds per testimonial
        
        function animate(currentTime) {
          if (!startTime) startTime = currentTime;
          const elapsed = currentTime - startTime;
          const progress = (elapsed % duration) / duration;
          
          const translateX = -progress * halfWidth;
          track.style.transform = `translateX(${translateX}px)`;
          
          requestAnimationFrame(animate);
        }
        
        requestAnimationFrame(animate);
      }, 100);
    }
    
    // Hide backup grid
    if (grid) {
      grid.style.display = 'none';
    }
}

// Toggle read more functionality
function toggleReadMore(button) {
  const item = button.closest('.testimonial-item');
  const textElement = item.querySelector('p.long-text');
  const currentLang = localStorage.getItem('gl_lang') || 'hr';
  
  // Get the original testimonial text from the data attribute
  const originalText = textElement.dataset.fullText;
  
  if (textElement.classList.contains('expanded')) {
    // Collapse - show only first 70 characters
    const shortText = originalText.substring(0, 70) + '...';
    textElement.textContent = `"${shortText}"`;
    textElement.classList.remove('expanded');
    button.setAttribute('data-i18n', 'testimonials.readMore');
    button.textContent = currentLang === 'en' ? 'Read more' : 'Učitaj više';
  } else {
    // Expand - show full text
    textElement.textContent = `"${originalText}"`;
    textElement.classList.add('expanded');
    button.setAttribute('data-i18n', 'testimonials.readLess');
    button.textContent = currentLang === 'en' ? 'Show less' : 'Prikaži manje';
  }
}

// Show toast notification
function showToast(message, isError = false) {
  const toast = document.createElement('div');
  toast.className = `toast ${isError ? 'error' : ''}`;
  toast.textContent = message;
  document.body.appendChild(toast);
  
  // Show toast with fade-in
  setTimeout(() => toast.classList.add('show'), 50);
  
  // Hide toast after 3 seconds with fade-out
  setTimeout(() => {
    toast.classList.remove('show');
    setTimeout(() => {
      if (document.body.contains(toast)) {
        document.body.removeChild(toast);
      }
    }, 400); // Longer fade-out for smoother effect
  }, 3000);
}

// Validate testimonial text
function validateTestimonial(text) {
  const trimmed = text.trim();
  if (trimmed.length < 10) {
    showToast(getI18nText('testimonials.toast.short'), true);
    return false;
  }
  if (trimmed.length > 150) {
    showToast(getI18nText('testimonials.toast.long'), true);
    return false;
  }
  return true;
}

// Update validation messages for all forms
function updateValidationMessages(lang) {
  // This function is now handled by showError() which gets the current language
  // No need to manually update since we get lang dynamically
}

// Custom validation functions
function showError(field, msgKey) {
  const wrap = field.closest('.field');
  const box = wrap.querySelector('.error-msg');
  if (!box) return;
  
  wrap.classList.add('invalid');
  const lang = document.documentElement.lang || localStorage.getItem('gl_lang') || 'hr';
  const dict = I18N[lang] || I18N.hr;
  box.textContent = dict[msgKey] || msgKey;
}

function clearError(field) {
  const wrap = field.closest('.field');
  const box = wrap.querySelector('.error-msg');
  if (!box) return;
  
  wrap.classList.remove('invalid');
  box.textContent = "";
}

function validateField(field) {
  clearError(field);

  if (field.hasAttribute('required') && !field.value.trim()) {
    const errorKey = field.dataset.error || 'validation.required';
    showError(field, errorKey);
    return false;
  }

  if (field.type === 'email' && field.value.trim()) {
    const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
    if (!emailRegex.test(field.value.trim())) {
      const errorKey = field.dataset.errorFormat || 'validation.email';
      showError(field, errorKey);
      return false;
    }
  }

  return true;
}

// Initialize custom validation for all forms
function initCustomValidation() {
  const forms = document.querySelectorAll('form[novalidate]');
  
  forms.forEach(form => {
    const inputs = form.querySelectorAll('input, textarea, select');
    
    // Prevent native validation tooltips and add live validation
    inputs.forEach(input => {
      input.addEventListener('invalid', e => e.preventDefault());
      input.addEventListener('input', () => validateField(input));
      input.addEventListener('blur', () => validateField(input));
    });
    
    // Custom form submission validation
    form.addEventListener('submit', (e) => {
      let allValid = true;
      inputs.forEach(input => {
        if (!validateField(input)) {
          allValid = false;
        }
      });
      
      if (!allValid) {
        e.preventDefault();
        return false;
      }
      
      // Samo ako je forma validna, postavi flag
      sessionStorage.setItem('formSubmitted', 'true');
    });
  });
}

// Update validation messages for all forms
function updateValidationMessages(lang) {
  // This function is now handled by showError() which gets the current language
  // No need to manually update since we get lang dynamically
}

// Get i18n text
function getI18nText(key) {
  const lang = document.documentElement.lang || localStorage.getItem('gl_lang') || 'hr';
  const dict = I18N[lang] || I18N.hr;
  return dict[key] || key;
}

// Add new testimonial
function addTestimonial(name, text) {
  console.log('Adding testimonial:', name, text); // Debug
  if (!validateTestimonial(text)) return false;
  
  const testimonials = loadTestimonials();
  const newTestimonial = { 
    name: name.trim(), 
    text: text.trim(),
    timestamp: Date.now()
  };
  
  console.log('New testimonial:', newTestimonial); // Debug
  
  // Add to beginning of array (newest first)
  testimonials.unshift(newTestimonial);
  
  // Keep only 50 testimonials (remove the oldest) - increased from 10 to 50
  if (testimonials.length > 50) {
    testimonials.splice(50);
  }
  
  // Sort by timestamp (newest first for better engagement)
  testimonials.sort((a, b) => b.timestamp - a.timestamp);
  
  console.log('All testimonials after adding:', testimonials); // Debug
  
  saveTestimonials(testimonials);
  renderTestimonials(testimonials);
  showToast(getI18nText('testimonials.toast.success'));
  return true;
}

// Modal functions
// Old modal functions - now handled by scroll lock/unlock system
// function openTestimonialModal() {
//   console.log('Opening testimonial modal'); // Debug
//   
//   // Store current scroll position
//   const currentScrollY = window.scrollY;
//   
//   testimonialModal?.classList.add('show');
//   testimonialModal?.setAttribute('aria-hidden','false');
//   
//   // Lock scroll to prevent background scrolling
//   document.body.style.top = `-${currentScrollY}px`;
//   document.body.classList.add('modal-open');
// }

// function closeTestimonialModalFunc() {
//   console.log('Closing testimonial modal'); // Debug
//   // Add fade out effect
//   testimonialModal?.classList.add('fade-out');
//   
//   setTimeout(() => {
//     testimonialModal?.classList.remove('show', 'fade-out');
//     testimonialModal?.setAttribute('aria-hidden','true');
//     
//     // Restore scroll position
//     const scrollY = parseInt((document.body.style.top || '0').replace('-',''),10) || 0;
//     document.body.classList.remove('modal-open');
//     document.body.style.top = '';
//     window.scrollTo(0, scrollY);
//     
//     // Reset form
//     testimonialForm?.reset();
//     console.log('Modal closed and form reset'); // Debug
//   }, 200); // 200ms fade duration
// }

// Event listeners - now handled by data-open and data-close
// addTestimonialBtn?.addEventListener('click', openTestimonialModal);
// closeTestimonialModal?.addEventListener('click', (e) => {
//   e.preventDefault(); // spriječi skok na vrh
//   closeTestimonialModalFunc();
// });

// Sauna modal event listeners
const saunaModal = document.getElementById('saunaModal');
const openSaunaModalBtn = document.getElementById('openSaunaModal');
const closeSaunaModalBtn = document.getElementById('closeSaunaModal');
const saunaForm = document.getElementById('saunaForm');

// Old sauna modal functions - now handled by scroll lock/unlock system
// function openSaunaModalFunc() {
//   const currentScrollY = window.scrollY;
//   
//   saunaModal?.classList.add('show');
//   saunaModal?.setAttribute('aria-hidden','false');
//   
//   document.body.style.top = `-${currentScrollY}px`;
//   document.body.classList.add('modal-open');
//   
//   // Set date limits (today to 7 days ahead)
//   const today = new Date();
//   const maxDate = new Date(today);
//   maxDate.setDate(today.getDate() + 7);
//   
//   const dateInput = document.getElementById('saunaDate');
//   if (dateInput) {
//     dateInput.min = today.toISOString().split('T')[0];
//     dateInput.max = maxDate.toISOString().split('T')[0];
//   }
//   
//   // Generate time slots
//   generateTimeSlots();
// }

// function closeSaunaModalFunc() {
//   saunaModal?.classList.add('fade-out');
//   
//   setTimeout(() => {
//     saunaModal?.classList.remove('show', 'fade-out');
//     saunaModal?.setAttribute('aria-hidden','true');
//     
//     const scrollY = parseInt((document.body.style.top || '0').replace('-',''),10) || 0;
//     document.body.classList.remove('modal-open');
//     document.body.style.top = '';
//     window.scrollTo(0, scrollY);
//     
//     saunaForm?.reset();
//   }, 200);
// }

// Sauna booking system
let bookedSlots = JSON.parse(localStorage.getItem('sauna_bookings') || '{}');

// Generate time slots (9:00 to 21:00, 1 hour each)
function generateTimeSlots() {
  const timeSlotsContainer = document.getElementById('timeSlots');
  if (!timeSlotsContainer) return;
  
  timeSlotsContainer.innerHTML = '';
  
  const selectedDate = document.getElementById('saunaDate')?.value;
  if (!selectedDate) {
    const message = getI18nText('validation.selectDate');
    timeSlotsContainer.innerHTML = `<p style="color: var(--muted); text-align: center;">${message}</p>`;
    return;
  }
  
  // Check if date is in the past
  const today = new Date().toISOString().split('T')[0];
  if (selectedDate < today) {
    const message = getI18nText('validation.pastDate');
    timeSlotsContainer.innerHTML = `<p style="color: var(--muted); text-align: center;">${message}</p>`;
    return;
  }
  
  // Generate slots from 9:00 to 21:00
  for (let hour = 9; hour <= 21; hour++) {
    const timeSlot = document.createElement('div');
    timeSlot.className = 'time-slot';
    timeSlot.dataset.time = `${hour.toString().padStart(2, '0')}:00`;
    timeSlot.textContent = `${hour.toString().padStart(2, '0')}:00`;
    
    // Check if slot is booked
    const slotKey = `${selectedDate}_${hour.toString().padStart(2, '0')}:00`;
    if (bookedSlots[slotKey]) {
      timeSlot.classList.add('booked');
      timeSlot.title = 'Termin je zauzet';
    } else {
      timeSlot.addEventListener('click', () => selectTimeSlot(timeSlot));
    }
    
    timeSlotsContainer.appendChild(timeSlot);
  }
}

// Select time slot
function selectTimeSlot(slot) {
  // Remove previous selection
  document.querySelectorAll('.time-slot.selected').forEach(s => s.classList.remove('selected'));
  
  // Add selection to clicked slot
  slot.classList.add('selected');
  selectedTimeSlot = slot.dataset.time;
  
  // Set the value in hidden input for validation
  const terminValue = document.getElementById('terminValue');
  if (terminValue) {
    terminValue.value = slot.dataset.time;
    // Clear any validation error
    validateField(terminValue);
  }
}

// Save booking to localStorage
function saveBooking(date, time, name, email, phone, message) {
  const slotKey = `${date}_${time}`;
  bookedSlots[slotKey] = {
    name: name,
    email: email,
    phone: phone,
    message: message,
    bookedAt: new Date().toISOString()
  };
  localStorage.setItem('sauna_bookings', JSON.stringify(bookedSlots));
}

// Date change handler
document.getElementById('saunaDate')?.addEventListener('change', () => {
  generateTimeSlots();
  selectedTimeSlot = null;
});

// Event listeners - now handled by data-open and data-close
// openSaunaModalBtn?.addEventListener('click', openSaunaModalFunc);
// closeSaunaModalBtn?.addEventListener('click', (e) => {
//   e.preventDefault(); // spriječi skok na vrh
//   closeSaunaModalFunc();
// });

// Close modal on overlay click
saunaModal?.addEventListener('click', (e) => {
  if (e.target === saunaModal) {
    closeSaunaModalFunc();
  }
});

// Close modal on Escape key
window.addEventListener('keydown', (e) => {
  if (e.key === 'Escape' && saunaModal?.classList.contains('show')) {
    closeSaunaModalFunc();
  }
});

// Stari event listener za sauna formu je uklonjen - koristi se novi handler ispod

// Additional mobile-friendly event listeners - now handled by data-open
// addTestimonialBtn?.addEventListener('touchend', (e) => {
//   e.preventDefault();
//   openTestimonialModal();
// });

// closeTestimonialModal?.addEventListener('touchend', (e) => {
//   e.preventDefault(); // spriječi skok na vrh
//   closeTestimonialModalFunc();
// });

// Close modal on overlay click - DISABLED for testimonial modal
// testimonialModal?.addEventListener('click', (e) => {
//   if (e.target === testimonialModal) {
//     closeModal(testimonialModal);
//   }
// });

// Close modal on Escape key
window.addEventListener('keydown', (e) => {
  if (e.key === 'Escape' && testimonialModal?.classList.contains('show')) {
    closeModal(testimonialModal);
  }
});

// Character counter functionality
testimonialText?.addEventListener('input', (e) => {
  const length = e.target.value.length;
  charCounter.textContent = `${length}/150`;
  
  // Change color based on length
  charCounter.className = 'char-counter';
  if (length > 130) charCounter.classList.add('warning');
  if (length >= 150) charCounter.classList.add('error');
});

// Handle form submission
testimonialForm?.addEventListener('submit', (e) => {
  // Postavi flag da je forma poslana
  sessionStorage.setItem('formSubmitted', 'true');
  
  const name = document.getElementById('testimonialName')?.value?.trim();
  const text = document.getElementById('testimonialText')?.value?.trim();
  
  // Validate all fields
  const inputs = testimonialForm.querySelectorAll('input, textarea, select');
  let allValid = true;
  
  inputs.forEach(input => {
    if (!validateField(input)) {
      allValid = false;
    }
  });
  
  if (!allValid) {
    e.preventDefault();
    return false;
  }
  
  // Add loading effect
  testimonialForm.classList.add('form-loading');
  
  const success = addTestimonial(name, text);
  if (success) {
    // Add success animation
    testimonialForm.classList.add('success-animation');
    
    // Remove loading effect and close modal with delay
    setTimeout(() => {
      testimonialForm.classList.remove('form-loading', 'success-animation');
      // Close modal using new system
      const modal = document.getElementById('testimonialModal');
      if (modal) {
        closeModal(modal);
        testimonialForm.reset();
      }
    }, 500);
  } else {
    testimonialForm.classList.remove('form-loading');
  }
});

// Initialize testimonials on page load
window.addEventListener('load', () => {
  loadTestimonials();
  
  // Initialize form elements after DOM loads
  programSelect = document.getElementById('programSelect');
  trenerField = document.getElementById('trenerField');
  trenerSelect = document.getElementById('trenerSelect');
  
  // Initialize custom validation after DOM loads
  initCustomValidation();
  
  // Initialize trainer visibility and form action
  if (programSelect) {
    updateTrainerVisibility();
    updateFormAction();
    
    // Add event listeners after elements are initialized
    programSelect.addEventListener('change', () => {
      updateFormAction();
      updateTrainerVisibility();
    });
  }
  
  // Add trainer selection event listener
  if (trenerSelect) {
    trenerSelect.addEventListener('change', (e) => {
      const trainerName = e.target.value;
      updateFormAction();
    });
  }
});

// Package selection functionality
const packageBtns = document.querySelectorAll('.package-btn');

// Pricing selection functionality
const pricingBtns = document.querySelectorAll('.pricing-btn');

// Package to program mapping
const packageToProgram = {
  'Basic': 'packages.basic.name',
  'Standard': 'packages.standard.name', 
  'Premium': 'packages.premium.name'
};

// Handle package button clicks
packageBtns.forEach(btn => {
  btn.addEventListener('click', (e) => {
    e.preventDefault();
    
    const packageName = btn.dataset.package;
    const programKey = packageToProgram[packageName];
    
    // Set the program in dropdown
    if (programSelect && programKey) {
      // Get current language
      const currentLang = localStorage.getItem('gl_lang') || 'hr';
      
      // Remove all existing package and pricing options first
      const packageKeys = Object.values(packageToProgram);
      const pricingValues = ['Grupni treninzi', 'Osobni trening', 'Online plan'];
      
      // Get all translated package names for current language
      const translatedPackageNames = packageKeys.map(key => 
        I18N[currentLang][key] || I18N.hr[key]
      );
      
      const allDynamicValues = [...translatedPackageNames, ...pricingValues];
      
      for (let i = programSelect.options.length - 1; i >= 0; i--) {
        const option = programSelect.options[i];
        if (allDynamicValues.includes(option.value)) {
          programSelect.removeChild(option);
        }
      }
      
      // Get translated text
      const translatedText = I18N[currentLang][programKey] || I18N.hr[programKey];
      
      // Add the new package option
      const newOption = document.createElement('option');
      newOption.value = translatedText;
      newOption.textContent = translatedText;
      programSelect.appendChild(newOption);
      
      // Set the value
      programSelect.value = translatedText;
      
      // Trigger change event to update trainer visibility
      const changeEvent = new Event('change', { bubbles: true });
      programSelect.dispatchEvent(changeEvent);
    }
    
    // Scroll to contact form
    smoothScrollTo('#kontakt');
  });
});

// Handle pricing button clicks
pricingBtns.forEach(btn => {
  btn.addEventListener('click', (e) => {
    e.preventDefault();
    
    const programValue = btn.dataset.program;
    
    // Set the program in dropdown
    if (programSelect && programValue) {
      // Get current language
      const currentLang = localStorage.getItem('gl_lang') || 'hr';
      // Remove all existing package and pricing options first
      const packageKeys = Object.values(packageToProgram);
      const pricingValues = ['Grupni treninzi', 'Osobni trening', 'Online plan'];
      
      // Get all translated package names for current language
      const translatedPackageNames = packageKeys.map(key => 
        I18N[currentLang][key] || I18N.hr[key]
      );
      
      // Get all translated pricing names for current language
      const pricingToI18n = {
        'Grupni treninzi': 'form.program.opt.group',
        'Osobni trening': 'form.program.opt.pt',
        'Online plan': 'form.program.opt.online'
      };
      
      const translatedPricingNames = pricingValues.map(value => {
        const i18nKey = pricingToI18n[value];
        return i18nKey ? (I18N[currentLang][i18nKey] || I18N.hr[i18nKey]) : value;
      });
      
      const allDynamicValues = [...translatedPackageNames, ...translatedPricingNames];
      
      for (let i = programSelect.options.length - 1; i >= 0; i--) {
        const option = programSelect.options[i];
        if (allDynamicValues.includes(option.value)) {
          programSelect.removeChild(option);
        }
      }
      
      // Get translated text based on current language
      const i18nKey = pricingToI18n[programValue];
      const translatedText = i18nKey ? (I18N[currentLang][i18nKey] || I18N.hr[i18nKey]) : programValue;
      
      // Add the new pricing option
      const newOption = document.createElement('option');
      newOption.value = translatedText;
      newOption.textContent = translatedText;
      programSelect.appendChild(newOption);
      
      // Set the value
      programSelect.value = translatedText;
      
      // Trigger change event to update trainer visibility
      const changeEvent = new Event('change', { bubbles: true });
      programSelect.dispatchEvent(changeEvent);
    }
    
    // Scroll to contact form
    smoothScrollTo('#kontakt');
  });
});

/* ===== AUTO CAPITALIZE INPUTS ===== */
const imeInput = document.getElementById('imeInput');
const testimonialNameInput = document.getElementById('testimonialName');
const porukaTextarea = document.getElementById('porukaTextarea');

// Funkcija za pretvaranje prvog slova svake riječi u veliko slovo (za ime i prezime)
function capitalizeWords(input) {
  const charMap = {
    'a': 'A', 'b': 'B', 'c': 'C', 'č': 'Č', 'ć': 'Ć', 'd': 'D', 'đ': 'Đ',
    'e': 'E', 'f': 'F', 'g': 'G', 'h': 'H', 'i': 'I', 'j': 'J', 'k': 'K',
    'l': 'L', 'm': 'M', 'n': 'N', 'o': 'O', 'p': 'P', 'q': 'Q', 'r': 'R',
    's': 'S', 'š': 'Š', 't': 'T', 'u': 'U', 'v': 'V', 'w': 'W', 'x': 'X',
    'y': 'Y', 'z': 'Z', 'ž': 'Ž'
  };
  
  const words = input.value.split(' ');
  const capitalizedWords = words.map(word => {
    if (word.length > 0) {
      const firstChar = word.charAt(0);
      const capitalizedFirst = charMap[firstChar.toLowerCase()] || firstChar.toUpperCase();
      return capitalizedFirst + word.slice(1).toLowerCase();
    }
    return word;
  });
  
  input.value = capitalizedWords.join(' ');
}

// Funkcija za pretvaranje samo prvog slova cijelog teksta u veliko slovo (za iskustvo)
function capitalizeFirstLetter(input) {
  const charMap = {
    'a': 'A', 'b': 'B', 'c': 'C', 'č': 'Č', 'ć': 'Ć', 'd': 'D', 'đ': 'Đ',
    'e': 'E', 'f': 'F', 'g': 'G', 'h': 'H', 'i': 'I', 'j': 'J', 'k': 'K',
    'l': 'L', 'm': 'M', 'n': 'N', 'o': 'O', 'p': 'P', 'q': 'Q', 'r': 'R',
    's': 'S', 'š': 'Š', 't': 'T', 'u': 'U', 'v': 'V', 'w': 'W', 'x': 'X',
    'y': 'Y', 'z': 'Z', 'ž': 'Ž'
  };
  
  if (input.value.length > 0) {
    const firstChar = input.value.charAt(0);
    
    // Provjeri je li prvo slovo već veliko
    const isAlreadyCapitalized = charMap[firstChar.toLowerCase()] === firstChar;
    
    if (!isAlreadyCapitalized) {
      const capitalizedFirst = charMap[firstChar.toLowerCase()] || firstChar.toUpperCase();
      input.value = capitalizedFirst + input.value.slice(1);
    }
  }
}


/* ===== EMAIL VALIDATION MESSAGES ===== */
const emailInput = document.getElementById('emailInput');

/* Final safety */
applyI18n(localStorage.getItem('gl_lang') || 'hr');

// Safety: spriječi skok na vrh za sve href="#" linkove
document.querySelectorAll('a[href="#"], a[href=""]').forEach(a => {
  a.addEventListener('click', e => e.preventDefault());
});

// Safety: provjeri da su svi "Odustani" gumbovi type="button"
document.querySelectorAll('button:not([type])').forEach(btn => {
  if (btn.textContent.includes('Odustani') || btn.textContent.includes('Cancel')) {
    btn.type = 'button';
  }
});

// ===== JEDNOSTAVNI SCROLL LOCK SISTEM =====
function openModal(sel) {
  const m = document.querySelector(sel);
  if (!m) return;

  // Jednostavno zaključa scroll
  document.body.classList.add('modal-open');

  m.classList.add('show');
  m.setAttribute('aria-hidden', 'false');
  
  // Trigger animation after a small delay to ensure DOM is ready
  setTimeout(() => {
    m.classList.add('animating');
  }, 10);
  
  // Special handling for sauna modal
  if (sel === '#saunaModal') {
    // Set date limits (today to 6 days ahead = 7 days total)
    const today = new Date();
    const maxDate = new Date(today);
    maxDate.setDate(today.getDate() + 6); // Today + 6 days = 7 days total
    
    const dateInput = document.getElementById('s_datum');
    if (dateInput) {
      dateInput.min = today.toISOString().split('T')[0];
      dateInput.max = maxDate.toISOString().split('T')[0];
    }
    
    // Update termini when modal opens (if date is already selected)
    setTimeout(() => {
      updateTermini();
    }, 100);
  }
}

function closeModal(m) {
  if (!m) return;

  // Start closing animation
  m.classList.add('closing');
  
  // Detect mobile for faster animations
  const isMobile = window.innerWidth <= 768;
  const animationDuration = isMobile ? 200 : 300;
  
  // Wait for animation to complete, then remove modal
  setTimeout(() => {
    m.classList.remove('show', 'closing', 'animating');
    m.setAttribute('aria-hidden', 'true');
    
    // Jednostavno otključa scroll
    document.body.classList.remove('modal-open');
    unlockScroll(); // Dodatno osiguranje
    
    // Special handling for sauna modal
    if (m.id === 'saunaModal') {
      // Reset form and enable the "Rezerviraj termin" button
      const form = document.getElementById('formSauna');
      if (form) {
        form.reset();
      }
      
      // Reset the "Rezerviraj termin" button state
      const openSaunaModalBtn = document.getElementById('openSaunaModal');
      if (openSaunaModalBtn) {
        openSaunaModalBtn.disabled = false;
        openSaunaModalBtn.style.opacity = '1';
      }
      
      // Reset selectedTimeSlot
      selectedTimeSlot = null;
    }
  }, animationDuration);
  
  // Resetiraj forme (osim za sauna modal koji se već resetuje gore)
  if (m.id !== 'saunaModal') {
    const form = m.querySelector('form');
    if (form) {
      form.reset();
    }
  }
}

// otvaranje
document.querySelectorAll('[data-open]').forEach(btn => {
  btn.addEventListener('click', e => {
    e.preventDefault();
    openModal(btn.getAttribute('data-open'));
  });
  
  // Dodatni event listener za mobitel
  btn.addEventListener('touchend', e => {
    e.preventDefault();
    openModal(btn.getAttribute('data-open'));
  });
});

// zatvaranje
document.querySelectorAll('[data-close]').forEach(btn => {
  btn.addEventListener('click', e => {
    e.preventDefault();
    closeModal(btn.closest('.lang-overlay'));
  });
  
  // Dodatni event listener za mobitel
  btn.addEventListener('touchend', e => {
    e.preventDefault();
    closeModal(btn.closest('.lang-overlay'));
  });
});

// Initialize custom validation
initCustomValidation();

// ===== BACKGROUND IMAGE ANIMATIONS =====
function initBackgroundAnimations() {
  const animatedSections = ['#sauna', '#clanarine', '#raspored'];
  
  // Intersection Observer for scroll-triggered animations
  const observer = new IntersectionObserver((entries) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        // Add animation class when section comes into view
        entry.target.classList.add('animate-bg');
        
        // Remove observer after animation to improve performance
        observer.unobserve(entry.target);
      }
    });
  }, {
    threshold: 0.3, // Trigger when 30% of section is visible
    rootMargin: '0px 0px -50px 0px' // Start animation slightly before section is fully visible
  });
  
  // Observe all animated sections
  animatedSections.forEach(selector => {
    const section = document.querySelector(selector);
    if (section) {
      observer.observe(section);
    }
  });
}

// Initialize background animations when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  initBackgroundAnimations();
});

// Initialize custom validation when DOM is ready
document.addEventListener('DOMContentLoaded', () => {
  initCustomValidation();
});

<!-- Intl-tel-input JavaScript uklonjen -->
</script>

<script>
const WEB_APP_URL = "https://script.google.com/macros/s/AKfycbyQ3k0SQUAdx8fbf2tzjuxyncPwLJEZQ_-kNoNN_ktp2bAiChB-UJtq5RT6aM4We8-e-A/exec";
let currentLang = localStorage.getItem('gl_lang') || 'hr'; // 'hr' ili 'en'

// Ažuriraj currentLang kada se promijeni jezik
document.addEventListener('DOMContentLoaded', () => {
  // Slušaj promjene u localStorage
  window.addEventListener('storage', (e) => {
    if (e.key === 'gl_lang') {
      currentLang = e.newValue || 'hr';
    }
  });
});

// 1) Zatamnjenje zauzetih termina na odabrani datum
async function updateTermini(){
  const datumEl = document.getElementById('s_datum');
  const terminEl = document.getElementById('s_termin');
  if(!datumEl || !terminEl) return;

  const datum = datumEl.value;      // format: YYYY-MM-DD
  if(!datum) return;

  try{
    const r = await fetch(WEB_APP_URL);       // doGet -> vraća [{datum:'YYYY-MM-DD', termin:'HH:MM'}, ...]
    const list = await r.json();

    // reset: omogući sve opcije
    [...terminEl.options].forEach(o => o.disabled = false);

    // disable zauzete za taj datum
    list.forEach(it=>{
      if(it.datum === datum){
        const opt = [...terminEl.options].find(o => o.value === it.termin);
        if(opt) opt.disabled = true;
      }
    });

    console.log(`Updated termini for ${datum}: ${list.filter(it => it.datum === datum).length} booked slots`);
  }catch(err){
    console.error('Greška pri dohvaćanju zauzetih termina:', err);
  }
}
const datumEl = document.getElementById('s_datum');
if(datumEl) datumEl.addEventListener('change', updateTermini);

// 2) Slanje rezervacije na Apps Script (upis u Sheet + mailovi)
const form = document.getElementById('formSauna');
if(form){
  form.addEventListener('submit', async (e)=>{
    e.preventDefault();

    const submitBtn = form.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    
    // Onemogući gumb i pokaži loading
    submitBtn.disabled = true;
    submitBtn.textContent = currentLang==='en' ? 'Sending...' : 'Šalje se...';
    submitBtn.style.opacity = '0.6';

    const data = {
      action: 'reserve',  // DODAJ OVO!
      imeprezime: document.getElementById('s_imeprezime')?.value?.trim(),
      email:      document.getElementById('s_email')?.value?.trim(),
      telefon:    document.getElementById('s_tel')?.value?.trim(),
      datum:      document.getElementById('s_datum')?.value,         // YYYY-MM-DD
      termin:     document.getElementById('s_termin')?.value,        // HH:MM
      napomena:   document.getElementById('s_napomena')?.value || '',
      lang:       currentLang
    };

    // brze provjere na klijentu
    if(!data.imeprezime || !data.email || !data.telefon || !data.datum || !data.termin){
      alert(currentLang==='en' ? 'Please fill all required fields.' : 'Ispuni sva obavezna polja.');
      // Vrati gumb u normalno stanje
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.opacity = '1';
      return;
    }
    
    // Dodatna provera da li je termin stvarno dostupan
    const terminEl = document.getElementById('s_termin');
    const selectedOption = terminEl.options[terminEl.selectedIndex];
    if(selectedOption.disabled){
      alert(currentLang==='en' ? 'This time slot is no longer available. Please select another time.' : 'Ovaj termin više nije dostupan. Molimo odaberite drugi termin.');
      // Vrati gumb u normalno stanje
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.opacity = '1';
      return;
    }
    
    // Dodatna provera - ažuriraj termine pre slanja
    await updateTermini();
    
    // Ponovno proveri da li je termin još uvek dostupan
    const selectedOptionAfterUpdate = terminEl.options[terminEl.selectedIndex];
    if(selectedOptionAfterUpdate.disabled){
      alert(currentLang==='en' ? 'This time slot was just booked by someone else. Please select another time.' : 'Ovaj termin je upravo rezervisan od strane nekog drugog. Molimo odaberite drugi termin.');
      // Vrati gumb u normalno stanje
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.opacity = '1';
      return;
    }

    try{
      const r = await fetch(WEB_APP_URL, {
        method: 'POST',
        // bez custom headera koji bi aktivirali preflight
        headers: { 'Content-Type': 'text/plain;charset=utf-8' }, // simple request
        body: JSON.stringify(data)
      });
      const res = await r.json();

      if(res.ok){
        alert(currentLang==='en'
          ? `Reservation saved!\nCode: ${res.code}`
          : `Rezervacija spremljena!\nKod: ${res.code}`
        );
        closeModal(document.getElementById('saunaModal'));
        form.reset();
        updateTermini();
      }else{
        alert((currentLang==='en' ? 'Error: ' : 'Greška: ') + (res.error || ''));
      }
    }catch(err){
      alert('Network error: ' + err);
    } finally {
      // Vrati gumb u normalno stanje
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.opacity = '1';
    }
  });
}

// 3) (Opcionalno) kad se modal otvori i datum je već postavljen, odmah zatamni
if(datumEl && datumEl.value) { updateTermini(); }

// forma za otkazivanje (email + kod)
const formCancel = document.getElementById('formCancel');
if(formCancel){
  formCancel.addEventListener('submit', async (e)=>{
    e.preventDefault();
    
    // Pronađi submit button i dodaj loading state
    const submitBtn = formCancel.querySelector('button[type="submit"]');
    const originalText = submitBtn.textContent;
    
    // Onemogući gumb i pokaži loading
    submitBtn.disabled = true;
    submitBtn.textContent = currentLang==='en' ? 'Cancelling...' : 'Otkazuje se...';
    submitBtn.style.opacity = '0.6';
    
    const payload = {
      action: 'cancel',
      email: document.getElementById('c_email').value.trim(),
      code:  document.getElementById('c_code').value.trim()
    };
    try{
      const r = await fetch(WEB_APP_URL, {
        method: 'POST',
        headers: { 'Content-Type': 'text/plain;charset=utf-8' },
        body: JSON.stringify(payload)
      });
      const res = await r.json();
      
      // Vrati originalni tekst gumba
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.opacity = '1';
      
      if(res.ok){
        // Get current language
        const currentLang = localStorage.getItem('gl_lang') || 'hr';
        let msg = currentLang === 'en' ? 'Appointment cancelled successfully!' : 'Termin je uspešno otkazan!';
        alert(msg);
        
        // Debug informacije u konzoli
        console.log('Mail korisniku: ' + (res.mailedUser ? 'OK' : 'NE ' + (res.errUser||'')));
        console.log('Mail adminu: ' + (res.mailedAdmin ? 'OK' : 'NE ' + (res.errAdmin||'')));
        formCancel.reset();
        updateTermini();
        // Zatvori modal nakon uspješnog otkazivanja
        const cancelModal = document.getElementById('cancelModal');
        if(cancelModal) {
          closeModal(cancelModal);
          unlockScroll();
        }
      }else{
        alert('Greška: ' + (res.error||''));
      }
    }catch(err){
      // Vrati originalni tekst gumba i u slučaju greške
      submitBtn.disabled = false;
      submitBtn.textContent = originalText;
      submitBtn.style.opacity = '1';
      alert('Mrežna greška.');
      console.error(err);
    }
  });
}
</script>

<!-- Dupli event listener uklonjen - koristi se onaj iznad -->
</body>
</html>
